exports.id=4231,exports.ids=[4231],exports.modules={82345:(e,s,a)=>{Promise.resolve().then(a.bind(a,69339))},80760:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>h});var t=a(10326),l=a(17577),r=a(89420),n=a(88295),i=a.n(n),o=a(1824),c=a(43404),d=a(6168);let m=["pending","confirmed","cancelled","rescheduled"],x={pending:"bg-yellow-900/60 text-yellow-200",confirmed:"bg-green-900/60 text-green-200",cancelled:"bg-red-900/60 text-red-200"},u={paid:"bg-emerald-900/60 text-emerald-200",pending:"bg-amber-900/60 text-amber-200",failed:"bg-red-900/60 text-red-200",cancelled:"bg-slate-800 text-slate-300"};function h(){let[e,s]=(0,l.useState)([]),[a,n]=(0,l.useState)([]),[h,g]=(0,l.useState)(!0),[p,b]=(0,l.useState)(null),[f,j]=(0,l.useState)({status:"pending",paymentStatus:"pending",adminMessage:"",userName:"",email:"",phone:"",country:"",preferredStartDate:"",numberOfPeople:1,mode:"",pricePerPerson:"",notes:""}),[N,y]=(0,l.useState)(!1),v=(0,l.useMemo)(()=>{let e={};return a.forEach(s=>{e[s._id]=s,s.slug&&(e[s.slug]=s)}),e},[a]),w=e=>{b(e),j({status:e.status||"pending",paymentStatus:e.paymentStatus||"pending",adminMessage:e.adminMessage||"",userName:e.userName||"",email:e.email||"",phone:e.phone||"",country:e.country||"",preferredStartDate:e.preferredStartDate?i()(e.preferredStartDate).format("YYYY-MM-DD"):"",numberOfPeople:e.numberOfPeople||1,mode:e.mode||"",pricePerPerson:e.pricePerPerson||"",notes:e.notes||""})},k=async()=>{if(p){y(!0);try{await (0,r.pE)(`/health-program-bookings/${p._id}`,f);let e=await (0,r.R1)("/health-program-bookings");s(e?.data||e||[]),b(null),j({status:"pending",paymentStatus:"pending",adminMessage:"",userName:"",email:"",phone:"",country:"",preferredStartDate:"",numberOfPeople:1,mode:"",pricePerPerson:"",notes:""})}catch(e){alert((0,d.i)(e,"Failed to update booking"))}finally{y(!1)}}},P=async e=>{if(confirm("Delete this booking?"))try{await (0,r.QW)(`/health-program-bookings/${e}`);let a=await (0,r.R1)("/health-program-bookings");s(a?.data||a||[])}catch(e){alert((0,d.i)(e,"Failed to delete booking"))}};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[t.jsx("h1",{className:"text-2xl font-semibold text-white",children:"Health Program Bookings"}),p&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-slate-300",children:[t.jsx(o.Z,{className:"h-5 w-5"}),"Editing booking for ",p.userName]})]}),h?t.jsx("p",{className:"text-slate-400 text-sm",children:"Loading..."}):0===e.length?t.jsx("p",{className:"text-slate-400 text-sm",children:"No health program bookings yet."}):(0,t.jsxs)("div",{className:"overflow-hidden border border-slate-800 rounded-xl bg-slate-900",children:[(0,t.jsxs)("div",{className:"grid grid-cols-12 px-4 py-3 text-xs uppercase tracking-wide text-slate-400 border-b border-slate-800",children:[t.jsx("span",{className:"col-span-2",children:"Booking Date"}),t.jsx("span",{className:"col-span-2",children:"Client"}),t.jsx("span",{className:"col-span-2",children:"Program"}),t.jsx("span",{className:"col-span-2",children:"Total (USD)"}),t.jsx("span",{className:"col-span-1",children:"Status"}),t.jsx("span",{className:"col-span-1",children:"Payment"}),t.jsx("span",{className:"col-span-2 text-right",children:"Actions"})]}),e.map(e=>{let s=v[e.programId]||v[e.programSlug],a=e.totalAmount||e.subtotal;return(0,t.jsxs)("div",{className:"grid grid-cols-12 px-4 py-3 text-sm text-white border-b border-slate-800 last:border-b-0 items-center",children:[t.jsx("div",{className:"col-span-2",children:t.jsx("p",{className:"text-sm text-slate-200",children:e.createdAt?i()(e.createdAt).format("DD MMM YYYY"):"—"})}),(0,t.jsxs)("div",{className:"col-span-2",children:[t.jsx("p",{className:"font-semibold",children:e.userName}),t.jsx("p",{className:"text-xs text-slate-400",children:e.email})]}),(0,t.jsxs)("div",{className:"col-span-2",children:[t.jsx("p",{className:"text-sm text-slate-200",children:e.programTitle||s?.title||"—"}),e.mode?(0,t.jsxs)("p",{className:"text-xs text-slate-400 capitalize",children:["Mode: ",e.mode]}):null]}),t.jsx("div",{className:"col-span-2 text-slate-200",children:a?`$${a}`:"—"}),t.jsx("div",{className:"col-span-1",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${x[e.status]||"bg-slate-800 text-slate-300"}`,children:e.status||"pending"})}),t.jsx("div",{className:"col-span-1",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${u[e.paymentStatus]||"bg-slate-800 text-slate-300"}`,children:e.paymentStatus||"pending"})}),(0,t.jsxs)("div",{className:"col-span-2 flex justify-end gap-2",children:[(0,t.jsxs)("button",{onClick:()=>w(e),className:"inline-flex items-center gap-1 px-3 py-1 rounded-lg bg-slate-800 hover:bg-slate-700 text-slate-100 text-sm",children:[t.jsx(o.Z,{className:"h-4 w-4"}),"Manage"]}),(0,t.jsxs)("button",{onClick:()=>P(e._id),className:"inline-flex items-center gap-1 px-3 py-1 rounded-lg bg-red-900/60 hover:bg-red-800 text-red-100 text-sm",children:[t.jsx(c.Z,{className:"h-4 w-4"}),"Delete"]})]})]},e._id)})]}),p&&t.jsx("div",{className:"fixed inset-0 bg-black/70 z-[9999] flex items-center justify-center px-4",children:(0,t.jsxs)("div",{className:"w-full max-w-lg bg-[#0f131a] border border-white/10 rounded-2xl shadow-2xl p-0 flex flex-col max-h-[90vh]",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-white/10",children:[t.jsx("h3",{className:"text-lg font-semibold text-white",children:"Update booking"}),t.jsx("button",{onClick:()=>b(null),className:"text-slate-400 hover:text-white text-xl",children:"\xd7"})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto px-6 py-4 space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm text-slate-300",children:"Name"}),t.jsx("input",{value:f.userName,onChange:e=>j(s=>({...s,userName:e.target.value})),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-teal-500"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm text-slate-300",children:"Email"}),t.jsx("input",{value:f.email,onChange:e=>j(s=>({...s,email:e.target.value})),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-teal-500"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm text-slate-300",children:"Phone"}),t.jsx("input",{value:f.phone,onChange:e=>j(s=>({...s,phone:e.target.value})),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-teal-500"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm text-slate-300",children:"Country"}),t.jsx("input",{value:f.country,onChange:e=>j(s=>({...s,country:e.target.value})),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-teal-500"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm text-slate-300",children:"Preferred start date"}),t.jsx("input",{type:"date",value:f.preferredStartDate,onChange:e=>j(s=>({...s,preferredStartDate:e.target.value})),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-teal-500"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm text-slate-300",children:"People"}),t.jsx("input",{type:"number",min:1,value:f.numberOfPeople,onChange:e=>j(s=>({...s,numberOfPeople:Number(e.target.value)||1})),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-teal-500"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm text-slate-300",children:"Mode"}),t.jsx("input",{value:f.mode,onChange:e=>j(s=>({...s,mode:e.target.value})),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-teal-500"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm text-slate-300",children:"Price per person (USD)"}),t.jsx("input",{type:"number",value:f.pricePerPerson,onChange:e=>j(s=>({...s,pricePerPerson:Number(e.target.value)||0})),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-teal-500"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm text-slate-300",children:"Payment status"}),t.jsx("select",{value:f.paymentStatus,onChange:e=>j(s=>({...s,paymentStatus:e.target.value})),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-teal-500",children:["pending","paid","failed","cancelled"].map(e=>t.jsx("option",{value:e,children:e},e))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm text-slate-300",children:"Status"}),t.jsx("select",{value:f.status,onChange:e=>j(s=>({...s,status:e.target.value})),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-teal-500",children:m.map(e=>t.jsx("option",{value:e,children:e},e))})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm text-slate-300",children:"Admin message (optional)"}),t.jsx("textarea",{value:f.adminMessage,onChange:e=>j(s=>({...s,adminMessage:e.target.value})),rows:3,className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-teal-500",placeholder:"Share confirmation, cancellation reason, or reschedule details."})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm text-slate-300",children:"Notes"}),t.jsx("textarea",{value:f.notes,onChange:e=>j(s=>({...s,notes:e.target.value})),rows:3,className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-teal-500"})]})]}),t.jsx("div",{className:"px-6 py-4 border-t border-white/10 space-y-2",children:(0,t.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[t.jsx("button",{onClick:()=>b(null),className:"px-4 py-2 rounded-lg bg-slate-800 text-white hover:bg-slate-700 transition",children:"Cancel"}),t.jsx("button",{onClick:k,disabled:N,className:"px-4 py-2 rounded-lg bg-teal-600 text-white hover:bg-teal-500 transition disabled:opacity-70",children:N?"Saving...":"Save"})]})})]})})]})}},69339:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>f});var t=a(10326),l=a(90434),r=a(35047),n=a(17577),i=a(60982),o=a(99731),c=a(8566),d=a(60531),m=a(69712),x=a(73891),u=a(93445),h=a(34899),g=a(14526),p=a(49634),b=a(55469);function f({children:e}){let s=(0,r.usePathname)();(0,r.useRouter)();let{user:a,loading:f,logout:j}=(0,b.a)(),[N,y]=(0,n.useState)({retreatBookings:0,healthPackages:0,healthPrograms:0,courses:0}),v=[{href:"/admin",label:"Dashboard",icon:i.Z},{href:"/admin/departments",label:"Departments",icon:o.Z},{href:"/admin/doctors",label:"Doctors",icon:c.Z},{label:"Appointments",icon:d.Z,children:[{href:"/admin/appointments",label:"General"},{href:"/admin/appointments/calendar",label:"Calendar"}]},{href:"/admin/blogs",label:"Blog Articles",icon:m.Z},{href:"/admin/reviews",label:"Patient Reviews",icon:m.Z},{href:"/admin/gallery",label:"Gallery",icon:x.Z},{href:"/admin/hero-images",label:"Hero Banner Images",icon:x.Z},{label:"Health Packages",icon:u.Z,countKey:"healthPackages",children:[{href:"/admin/packages",label:"Manage Packages"},{href:"/admin/package-bookings",label:"Package Bookings",countKey:"healthPackages"},{href:"/admin/package-bookings/calendar",label:"Calendar"},{href:"/admin/treatment-types",label:"Treatment Types"}]},{label:"Retreat Program",icon:h.Z,countKey:"retreatBookings",children:[{href:"/admin/retreat-programs",label:"Manage Programs"},{href:"/admin/retreat-destinations",label:"Retreat Destinations"},{href:"/admin/retreat-partner-hotels",label:"Partner Hotels"},{href:"/admin/retreat-bookings",label:"Retreat Bookings",countKey:"retreatBookings"}]},{label:"Health Programs",icon:u.Z,countKey:"healthPrograms",children:[{href:"/admin/health-programs",label:"Manage Programs"},{href:"/admin/health-program-bookings",label:"Health Program Bookings",countKey:"healthPrograms"}]},{label:"Courses",icon:o.Z,countKey:"courses",children:[{href:"/admin/courses",label:"Manage Courses"},{href:"/admin/course-categories",label:"Course Categories"},{href:"/admin/course-bookings",label:"Course Bookings",countKey:"courses"}]},{href:"/admin/billing",label:"Billing",icon:g.Z}],w="/admin/login"===s,[k,P]=(0,n.useState)(()=>{let e={};return v.forEach(a=>{a.children&&(e[a.label]=a.children.some(e=>s.startsWith(e.href)))}),e});if(!w&&(f||!a&&!f))return t.jsx("div",{className:"p-6",children:"Loading admin..."});if(w)return e;let S=e=>s===e?"bg-teal-600 text-white":"text-slate-300 hover:bg-slate-800",C=e=>e?t.jsx("span",{className:"absolute -top-2 -right-2 min-w-[20px] px-1.5 h-5 rounded-full bg-rose-600 text-white text-[10px] font-semibold flex items-center justify-center shadow-lg transition-opacity",children:e>99?"99+":e}):null;return(0,t.jsxs)("div",{className:"min-h-screen bg-slate-950 text-slate-100 flex",children:[(0,t.jsxs)("aside",{className:"hidden md:flex md:flex-col w-64 bg-slate-900 border-r border-slate-800",children:[t.jsx("div",{className:"h-16 flex items-center px-6 border-b border-slate-800",children:(0,t.jsxs)(l.default,{href:"/admin",className:"flex items-center gap-2",children:[t.jsx("img",{src:"/images/logo.png",alt:"Logo",className:"h-9 w-9 rounded-md object-cover"}),(0,t.jsxs)("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-sm font-semibold tracking-tight",children:"Admin Panel"}),t.jsx("span",{className:"text-xs text-slate-400",children:"Annapurna Nature Cure"})]})]})}),t.jsx("nav",{className:"flex-1 px-3 py-4 space-y-1 overflow-y-auto",children:v.map(e=>{let s=e.icon;if(e.children){let a=k[e.label];return(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>{var s;return s=e.label,void P(e=>({...e,[s]:!e[s]}))},className:`relative w-full flex items-center justify-between gap-3 px-3 py-2 rounded-lg text-sm transition ${a?"bg-slate-800 text-white":"text-slate-300 hover:bg-slate-800"}`,children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx(s,{className:"h-5 w-5"}),(0,t.jsxs)("span",{className:"relative inline-block",children:[e.label,C(e.countKey?N[e.countKey]:0)]})]}),t.jsx("span",{className:"text-xs text-slate-400",children:a?"−":"+"})]}),a&&t.jsx("div",{className:"pl-9 space-y-1",children:e.children.map(e=>t.jsx(l.default,{href:e.href,className:`relative flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition ${S(e.href)}`,children:(0,t.jsxs)("span",{className:"relative inline-block",children:[e.label,C(e.countKey?N[e.countKey]:0)]})},e.href))})]},e.label)}return(0,t.jsxs)(l.default,{href:e.href,className:`relative flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition ${S(e.href)}`,children:[t.jsx(s,{className:"h-5 w-5"}),(0,t.jsxs)("span",{className:"relative inline-block",children:[e.label,C(e.countKey?N[e.countKey]:0)]})]},e.href)})}),t.jsx("div",{className:"border-t border-slate-800 p-4",children:(0,t.jsxs)("button",{type:"button",onClick:j,className:"w-full inline-flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm bg-slate-800 hover:bg-slate-700 text-slate-200",children:[t.jsx(p.Z,{className:"h-5 w-5"}),t.jsx("span",{children:"Logout"})]})})]}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,t.jsxs)("header",{className:"h-16 flex items-center justify-between px-4 md:px-6 border-b border-slate-800 bg-slate-900/80 backdrop-blur",children:[(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Admin dashboard"}),t.jsx("h1",{className:"text-sm md:text-base font-semibold text-slate-50",children:function(){for(let e of v){if(e.href&&s.startsWith(e.href))return e.label;if(e.children){for(let a of e.children)if(s.startsWith(a.href))return a.label}}return"Overview"}()})]}),t.jsx("div",{className:"text-xs text-slate-300",children:a?.email?`Logged in as ${a.email}`:""})]}),t.jsx("main",{className:"flex-1 overflow-y-auto bg-slate-950",children:t.jsx("div",{className:"max-w-6xl mx-auto px-4 md:px-6 py-6 md:py-8",children:e})})]})]})}a(89420)},6168:(e,s,a)=>{"use strict";function t(e,s="Something went wrong"){if(!e)return s;let a=e.response?.data||e.data;if(a?.errors&&"object"==typeof a.errors){let e=Object.values(a.errors).flatMap(e=>Array.isArray(e?._errors)?e._errors:[]).filter(Boolean);if(e.length)return e.join(", ")}return a?.message?a.message:"string"==typeof e?e:e.message?e.message:s}a.d(s,{i:()=>t})},5986:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>t});let t=(0,a(68570).createProxy)(String.raw`/Users/bibekaryal/Downloads/AnnapurnaHostipal-Nakhu/frontend/app/admin/layout.js#default`)}};