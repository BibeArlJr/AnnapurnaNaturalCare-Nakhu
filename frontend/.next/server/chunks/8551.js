exports.id=8551,exports.ids=[8551],exports.modules={82345:(e,s,a)=>{Promise.resolve().then(a.bind(a,69339))},69339:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>f});var t=a(10326),l=a(90434),r=a(35047),n=a(17577),i=a(60982),o=a(99731),c=a(8566),d=a(60531),x=a(69712),m=a(73891),u=a(93445),h=a(34899),g=a(14526),p=a(49634),b=a(55469);function f({children:e}){let s=(0,r.usePathname)();(0,r.useRouter)();let{user:a,loading:f,logout:N}=(0,b.a)(),[j,y]=(0,n.useState)({retreatBookings:0,healthPackages:0,healthPrograms:0,courses:0}),v=[{href:"/admin",label:"Dashboard",icon:i.Z},{href:"/admin/departments",label:"Departments",icon:o.Z},{href:"/admin/doctors",label:"Doctors",icon:c.Z},{label:"Appointments",icon:d.Z,children:[{href:"/admin/appointments",label:"General"},{href:"/admin/appointments/calendar",label:"Calendar"}]},{href:"/admin/blogs",label:"Blog Articles",icon:x.Z},{href:"/admin/reviews",label:"Patient Reviews",icon:x.Z},{href:"/admin/gallery",label:"Gallery",icon:m.Z},{href:"/admin/hero-images",label:"Hero Banner Images",icon:m.Z},{label:"Health Packages",icon:u.Z,countKey:"healthPackages",children:[{href:"/admin/packages",label:"Manage Packages"},{href:"/admin/package-bookings",label:"Package Bookings",countKey:"healthPackages"},{href:"/admin/package-bookings/calendar",label:"Calendar"},{href:"/admin/treatment-types",label:"Treatment Types"}]},{label:"Retreat Program",icon:h.Z,countKey:"retreatBookings",children:[{href:"/admin/retreat-programs",label:"Manage Programs"},{href:"/admin/retreat-destinations",label:"Retreat Destinations"},{href:"/admin/retreat-partner-hotels",label:"Partner Hotels"},{href:"/admin/retreat-bookings",label:"Retreat Bookings",countKey:"retreatBookings"}]},{label:"Health Programs",icon:u.Z,countKey:"healthPrograms",children:[{href:"/admin/health-programs",label:"Manage Programs"},{href:"/admin/health-program-bookings",label:"Health Program Bookings",countKey:"healthPrograms"}]},{label:"Courses",icon:o.Z,countKey:"courses",children:[{href:"/admin/courses",label:"Manage Courses"},{href:"/admin/course-categories",label:"Course Categories"},{href:"/admin/course-bookings",label:"Course Bookings",countKey:"courses"}]},{href:"/admin/billing",label:"Billing",icon:g.Z}],w="/admin/login"===s,[k,P]=(0,n.useState)(()=>{let e={};return v.forEach(a=>{a.children&&(e[a.label]=a.children.some(e=>s.startsWith(e.href)))}),e});if(!w&&(f||!a&&!f))return t.jsx("div",{className:"p-6",children:"Loading admin..."});if(w)return e;let S=e=>s===e?"bg-teal-600 text-white":"text-slate-300 hover:bg-slate-800",C=e=>e?t.jsx("span",{className:"absolute -top-2 -right-2 min-w-[20px] px-1.5 h-5 rounded-full bg-rose-600 text-white text-[10px] font-semibold flex items-center justify-center shadow-lg transition-opacity",children:e>99?"99+":e}):null;return(0,t.jsxs)("div",{className:"min-h-screen bg-slate-950 text-slate-100 flex",children:[(0,t.jsxs)("aside",{className:"hidden md:flex md:flex-col w-64 bg-slate-900 border-r border-slate-800",children:[t.jsx("div",{className:"h-16 flex items-center px-6 border-b border-slate-800",children:(0,t.jsxs)(l.default,{href:"/admin",className:"flex items-center gap-2",children:[t.jsx("img",{src:"/images/logo.png",alt:"Logo",className:"h-9 w-9 rounded-md object-cover"}),(0,t.jsxs)("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-sm font-semibold tracking-tight",children:"Admin Panel"}),t.jsx("span",{className:"text-xs text-slate-400",children:"Annapurna Nature Cure"})]})]})}),t.jsx("nav",{className:"flex-1 px-3 py-4 space-y-1 overflow-y-auto",children:v.map(e=>{let s=e.icon;if(e.children){let a=k[e.label];return(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>{var s;return s=e.label,void P(e=>({...e,[s]:!e[s]}))},className:`relative w-full flex items-center justify-between gap-3 px-3 py-2 rounded-lg text-sm transition ${a?"bg-slate-800 text-white":"text-slate-300 hover:bg-slate-800"}`,children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx(s,{className:"h-5 w-5"}),(0,t.jsxs)("span",{className:"relative inline-block",children:[e.label,C(e.countKey?j[e.countKey]:0)]})]}),t.jsx("span",{className:"text-xs text-slate-400",children:a?"−":"+"})]}),a&&t.jsx("div",{className:"pl-9 space-y-1",children:e.children.map(e=>t.jsx(l.default,{href:e.href,className:`relative flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition ${S(e.href)}`,children:(0,t.jsxs)("span",{className:"relative inline-block",children:[e.label,C(e.countKey?j[e.countKey]:0)]})},e.href))})]},e.label)}return(0,t.jsxs)(l.default,{href:e.href,className:`relative flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition ${S(e.href)}`,children:[t.jsx(s,{className:"h-5 w-5"}),(0,t.jsxs)("span",{className:"relative inline-block",children:[e.label,C(e.countKey?j[e.countKey]:0)]})]},e.href)})}),t.jsx("div",{className:"border-t border-slate-800 p-4",children:(0,t.jsxs)("button",{type:"button",onClick:N,className:"w-full inline-flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm bg-slate-800 hover:bg-slate-700 text-slate-200",children:[t.jsx(p.Z,{className:"h-5 w-5"}),t.jsx("span",{children:"Logout"})]})})]}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,t.jsxs)("header",{className:"h-16 flex items-center justify-between px-4 md:px-6 border-b border-slate-800 bg-slate-900/80 backdrop-blur",children:[(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Admin dashboard"}),t.jsx("h1",{className:"text-sm md:text-base font-semibold text-slate-50",children:function(){for(let e of v){if(e.href&&s.startsWith(e.href))return e.label;if(e.children){for(let a of e.children)if(s.startsWith(a.href))return a.label}}return"Overview"}()})]}),t.jsx("div",{className:"text-xs text-slate-300",children:a?.email?`Logged in as ${a.email}`:""})]}),t.jsx("main",{className:"flex-1 overflow-y-auto bg-slate-950",children:t.jsx("div",{className:"max-w-6xl mx-auto px-4 md:px-6 py-6 md:py-8",children:e})})]})]})}a(89420)},96017:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>b});var t=a(10326),l=a(17577),r=a(88295),n=a.n(r),i=a(89420),o=a(6168),c=a(1824),d=a(43404),x=a(83401),m=a(36902),u=a(56386);let h=["pending","confirmed","cancelled","rescheduled","completed"],g={pending:"bg-yellow-900/60 text-yellow-200",confirmed:"bg-green-900/60 text-green-200",cancelled:"bg-red-900/60 text-red-200",rescheduled:"bg-blue-900/60 text-blue-200",completed:"bg-emerald-900/60 text-emerald-200"},p={paid:"bg-emerald-900/60 text-emerald-200",pending:"bg-amber-900/60 text-amber-200",failed:"bg-red-900/60 text-red-200",cancelled:"bg-slate-800 text-slate-300"};function b(){let[e,s]=(0,l.useState)([]),[a,r]=(0,l.useState)(!0),[b,f]=(0,l.useState)(null),[N,j]=(0,l.useState)({status:"pending",paymentStatus:"pending",adminMessage:"",userName:"",email:"",phone:"",country:"",preferredStartDate:"",numberOfPeople:1,retreatPricePerPerson:"",additionalNotes:""}),[y,v]=(0,l.useState)(!1);async function w(){r(!0);try{let e=await (0,i.R1)("/retreat-bookings");s(e?.data||e||[])}catch(e){console.error("Retreat bookings load error:",e)}finally{r(!1)}}let k=e=>{f(e),j({status:e.status||"pending",paymentStatus:e.paymentStatus||"pending",adminMessage:e.adminMessage||"",userName:e.userName||"",email:e.email||"",phone:e.phone||"",country:e.country||"",preferredStartDate:e.preferredStartDate?n()(e.preferredStartDate).format("YYYY-MM-DD"):"",numberOfPeople:e.numberOfPeople||1,retreatPricePerPerson:e.retreatPricePerPerson||"",additionalNotes:e.additionalNotes||""})},P=async()=>{if(b){v(!0);try{await (0,i.pE)(`/retreat-bookings/${b._id}`,N),await w(),f(null),j({status:"pending",paymentStatus:"pending",adminMessage:"",userName:"",email:"",phone:"",country:"",preferredStartDate:"",numberOfPeople:1,retreatPricePerPerson:"",additionalNotes:""})}catch(e){alert((0,o.i)(e,"Failed to update booking"))}finally{v(!1)}}},S=async e=>{if(confirm("Delete this booking?"))try{await (0,i.QW)(`/retreat-bookings/${e}`),await w()}catch(e){alert((0,o.i)(e,"Failed to delete booking"))}};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[t.jsx("h1",{className:"text-2xl font-semibold text-white",children:"Retreat Bookings"}),b&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-slate-300",children:[t.jsx(c.Z,{className:"h-5 w-5"}),"Editing booking for ",b.userName]})]}),a?t.jsx("p",{className:"text-slate-400 text-sm",children:"Loading..."}):0===e.length?t.jsx("p",{className:"text-slate-400 text-sm",children:"No retreat bookings yet."}):(0,t.jsxs)("div",{className:"overflow-hidden border border-slate-800 rounded-xl bg-slate-900",children:[(0,t.jsxs)("div",{className:"grid grid-cols-12 px-4 py-3 text-xs uppercase tracking-wide text-slate-400 border-b border-slate-800",children:[t.jsx("span",{className:"col-span-2",children:"Booking Date"}),t.jsx("span",{className:"col-span-2",children:"Client"}),t.jsx("span",{className:"col-span-2",children:"Program"}),t.jsx("span",{className:"col-span-2",children:"Total (USD)"}),t.jsx("span",{className:"col-span-1",children:"Status"}),t.jsx("span",{className:"col-span-1",children:"Payment"}),t.jsx("span",{className:"col-span-2 text-right",children:"Actions"})]}),e.map(e=>(0,t.jsxs)("div",{className:"grid grid-cols-12 px-4 py-3 text-sm text-white border-b border-slate-800 last:border-b-0 items-center",children:[t.jsx("div",{className:"col-span-2",children:t.jsx("p",{className:"text-sm text-slate-200",children:e.createdAt?n()(e.createdAt).format("DD MMM YYYY"):"—"})}),(0,t.jsxs)("div",{className:"col-span-2",children:[t.jsx("p",{className:"font-semibold",children:e.userName}),t.jsx("p",{className:"text-xs text-slate-400",children:e.email})]}),t.jsx("div",{className:"col-span-2",children:t.jsx("p",{className:"text-sm text-slate-200",children:e.programTitle})}),t.jsx("div",{className:"col-span-2 text-slate-200",children:e.totalAmountUSD?`$${e.totalAmountUSD}`:"—"}),t.jsx("div",{className:"col-span-1",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${g[e.status]||"bg-slate-800 text-slate-300"}`,children:e.status})}),t.jsx("div",{className:"col-span-1",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${p[e.paymentStatus]||"bg-slate-800 text-slate-300"}`,children:e.paymentStatus||"pending"})}),(0,t.jsxs)("div",{className:"col-span-2 flex justify-end gap-2",children:[(0,t.jsxs)("button",{onClick:()=>k(e),className:"inline-flex items-center gap-1 px-3 py-1 rounded-lg bg-slate-800 hover:bg-slate-700 text-slate-100 text-sm",children:[t.jsx(c.Z,{className:"h-4 w-4"}),"Manage"]}),(0,t.jsxs)("button",{onClick:()=>S(e._id),className:"inline-flex items-center gap-1 px-3 py-1 rounded-lg bg-red-900/60 hover:bg-red-800 text-red-100 text-sm",children:[t.jsx(d.Z,{className:"h-4 w-4"}),"Delete"]})]})]},e._id))]}),b&&t.jsx("div",{className:"fixed inset-0 bg-black/70 z-[9999] flex items-center justify-center px-4",children:(0,t.jsxs)("div",{className:"w-full max-w-lg bg-[#0f131a] border border-white/10 rounded-2xl shadow-2xl p-0 flex flex-col max-h-[90vh]",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-white/10",children:[t.jsx("h3",{className:"text-lg font-semibold text-white",children:"Update booking"}),t.jsx("button",{onClick:()=>f(null),className:"text-slate-400 hover:text-white text-xl",children:"\xd7"})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto px-6 py-4 space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm text-slate-300",children:"Name"}),t.jsx("input",{value:N.userName,onChange:e=>j(s=>({...s,userName:e.target.value})),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-teal-500"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm text-slate-300",children:"Email"}),t.jsx("input",{value:N.email,onChange:e=>j(s=>({...s,email:e.target.value})),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-teal-500"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm text-slate-300",children:"Phone"}),t.jsx("input",{value:N.phone,onChange:e=>j(s=>({...s,phone:e.target.value})),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-teal-500"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm text-slate-300",children:"Country"}),t.jsx("input",{value:N.country,onChange:e=>j(s=>({...s,country:e.target.value})),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-teal-500"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm text-slate-300",children:"Preferred start date"}),t.jsx("input",{type:"date",value:N.preferredStartDate,onChange:e=>j(s=>({...s,preferredStartDate:e.target.value})),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-teal-500"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm text-slate-300",children:"People"}),t.jsx("input",{type:"number",min:1,value:N.numberOfPeople,onChange:e=>j(s=>({...s,numberOfPeople:Number(e.target.value)||1})),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-teal-500"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm text-slate-300",children:"Price per person (USD)"}),t.jsx("input",{type:"number",value:N.retreatPricePerPerson,onChange:e=>j(s=>({...s,retreatPricePerPerson:Number(e.target.value)||0})),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-teal-500"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm text-slate-300",children:"Payment status"}),t.jsx("select",{value:N.paymentStatus,onChange:e=>j(s=>({...s,paymentStatus:e.target.value})),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-teal-500",children:["pending","paid","failed","cancelled"].map(e=>t.jsx("option",{value:e,children:e},e))})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm text-slate-300",children:"Status"}),t.jsx("select",{value:N.status,onChange:e=>j(s=>({...s,status:e.target.value})),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-teal-500",children:h.map(e=>t.jsx("option",{value:e,children:e},e))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm text-slate-300",children:"Admin message (optional)"}),t.jsx("textarea",{value:N.adminMessage,onChange:e=>j(s=>({...s,adminMessage:e.target.value})),rows:3,className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-teal-500",placeholder:"Share confirmation, cancellation reason, or reschedule details."})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm text-slate-300",children:"Notes"}),t.jsx("textarea",{value:N.additionalNotes,onChange:e=>j(s=>({...s,additionalNotes:e.target.value})),rows:3,className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-teal-500"})]})]}),(0,t.jsxs)("div",{className:"px-6 py-4 border-t border-white/10 space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[t.jsx("button",{onClick:()=>f(null),className:"px-4 py-2 rounded-lg bg-slate-800 text-white hover:bg-slate-700 transition",children:"Cancel"}),t.jsx("button",{onClick:P,disabled:y,className:"px-4 py-2 rounded-lg bg-teal-600 text-white hover:bg-teal-500 transition disabled:opacity-70",children:y?"Saving...":"Save"})]}),(0,t.jsxs)("div",{className:"text-xs text-slate-400 flex items-center gap-1",children:[t.jsx(x.Z,{className:"h-4 w-4 text-green-400"})," Confirms booking",t.jsx(m.Z,{className:"h-4 w-4 text-red-400 ml-2"})," Cancels with reason",t.jsx(u.Z,{className:"h-4 w-4 text-yellow-400 ml-2"})," Reschedules with note"]})]})]})})]})}},6168:(e,s,a)=>{"use strict";function t(e,s="Something went wrong"){if(!e)return s;let a=e.response?.data||e.data;if(a?.errors&&"object"==typeof a.errors){let e=Object.values(a.errors).flatMap(e=>Array.isArray(e?._errors)?e._errors:[]).filter(Boolean);if(e.length)return e.join(", ")}return a?.message?a.message:"string"==typeof e?e:e.message?e.message:s}a.d(s,{i:()=>t})},5986:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>t});let t=(0,a(68570).createProxy)(String.raw`/Users/bibekaryal/Downloads/AnnapurnaHostipal-Nakhu/frontend/app/admin/layout.js#default`)}};