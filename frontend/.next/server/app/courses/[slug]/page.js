(()=>{var e={};e.id=908,e.ids=[908],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},46464:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>o.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>d}),t(44076),t(49328),t(20784),t(89204),t(35866);var l=t(23191),a=t(88716),r=t(37922),o=t.n(r),i=t(95231),n={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>i[e]);t.d(s,n);let d=["",{children:["courses",{children:["[slug]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,44076)),"/Users/bibekaryal/Downloads/AnnapurnaHostipal-Nakhu/frontend/app/courses/[slug]/page.js"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,49328)),"/Users/bibekaryal/Downloads/AnnapurnaHostipal-Nakhu/frontend/app/layout.js"],error:[()=>Promise.resolve().then(t.bind(t,20784)),"/Users/bibekaryal/Downloads/AnnapurnaHostipal-Nakhu/frontend/app/error.js"],loading:[()=>Promise.resolve().then(t.bind(t,89204)),"/Users/bibekaryal/Downloads/AnnapurnaHostipal-Nakhu/frontend/app/loading.js"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/bibekaryal/Downloads/AnnapurnaHostipal-Nakhu/frontend/app/courses/[slug]/page.js"],m="/courses/[slug]/page",x={require:t,loadChunk:()=>Promise.resolve()},p=new l.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/courses/[slug]/page",pathname:"/courses/[slug]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},2341:(e,s,t)=>{Promise.resolve().then(t.bind(t,62220))},62220:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>x});var l=t(10326),a=t(17577),r=t(35047),o=t(89420),i=t(90434),n=t(6168);let d="w-full rounded-xl border px-4 py-3 text-sm focus:outline-none transition";function c({course:e,open:s,onClose:t}){let[r,i]=(0,a.useState)({name:"",email:"",phone:"",country:"",preferredStartDate:"",mode:e?.mode||"online",people:1,notes:""}),[c,m]=(0,a.useState)(!1),[x,p]=(0,a.useState)(null),[u,h]=(0,a.useState)(!1),b=(0,l.jsxs)("div",{className:"space-y-2 text-sm text-[#10231a]",children:[(0,l.jsxs)("div",{className:"rounded-lg bg-[#fff7ed] border border-[#f2d5b1] px-3 py-2",children:[l.jsx("p",{className:"font-semibold text-[#c2410c]",children:"Important"}),l.jsx("p",{children:"Extra charges apply for any activities or services not listed in the program description."})]}),(0,l.jsxs)("div",{className:"rounded-lg bg-[#fef2f2] border border-[#fecdd3] px-3 py-2",children:[l.jsx("p",{className:"font-semibold text-[#be123c]",children:"Refund Policy"}),l.jsx("p",{children:"After payment, booking cancellations will incur a 10% deduction of the total booking cost."})]})]});if(!s||!e)return null;let f=Number(r.people||1)*(Number(e.price)||0),g=e=>{let{name:s,value:t}=e.target;if("people"===s){let e=Math.max(1,Number(t)||1);i(s=>({...s,people:e}))}else i(e=>({...e,[s]:t}))},j=()=>{i({name:"",email:"",phone:"",country:"",preferredStartDate:"",mode:e?.mode||"online",people:1,notes:""}),p(null),h(!1),t?.()},y=async s=>{if(s.preventDefault(),!r.name||!r.email||!r.phone){alert("Please fill required fields.");return}m(!0);try{let s=await (0,o.sg)("/course-bookings",{courseId:e._id,courseTitle:e.title,userName:r.name,email:r.email,phone:r.phone,country:r.country,preferredStartDate:r.preferredStartDate,mode:r.mode,numberOfPeople:Number(r.people)||1,pricePerPerson:e.price,notes:r.notes}),t=s?.data?._id||s?._id||null;p(t),t&&h(!0)}catch(e){alert((0,n.i)(e,"Failed to place booking"))}m(!1)},N=async()=>{if(x)try{let e=await (0,o.sg)("/payments/stripe/checkout",{bookingId:x,type:"course"});e?.url&&(window.location.href=e.url)}catch(e){alert((0,n.i)(e,"Unable to start Stripe checkout."))}};return l.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-start justify-center px-4 py-10",onClick:j,children:(0,l.jsxs)("div",{className:"w-full max-w-3xl max-h-[90vh] bg-white rounded-2xl shadow-2xl border border-slate-200 overflow-y-auto p-6 md:p-8 space-y-6",onClick:e=>e.stopPropagation(),children:[(0,l.jsxs)("div",{className:"flex items-start justify-between",children:[(0,l.jsxs)("div",{children:[l.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-teal-600 font-semibold",children:"Book this course"}),l.jsx("h3",{className:"text-xl font-semibold text-slate-900",children:e.title}),l.jsx("p",{className:"text-sm text-slate-600",children:e.duration?`${e.duration} days`:""})]}),l.jsx("button",{onClick:j,className:"text-slate-500 hover:text-slate-900 font-semibold",children:"✕"})]}),u&&x?(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 text-sm",children:[(0,l.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-slate-50 px-4 py-3",children:[l.jsx("p",{className:"text-slate-600",children:"Mode"}),l.jsx("p",{className:"font-semibold text-slate-900 capitalize",children:r.mode})]}),(0,l.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-slate-50 px-4 py-3",children:[l.jsx("p",{className:"text-slate-600",children:"People"}),l.jsx("p",{className:"font-semibold text-slate-900",children:r.people})]}),(0,l.jsxs)("div",{className:"rounded-xl border-2 border-teal-600 bg-teal-50 px-4 py-3",children:[l.jsx("p",{className:"text-teal-700 font-semibold",children:"Total amount"}),(0,l.jsxs)("p",{className:"text-lg font-bold text-slate-900",children:["$",f]})]})]}),b,(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[l.jsx("button",{onClick:N,className:"flex-1 inline-flex justify-center items-center rounded-full bg-teal-600 text-white text-sm font-semibold px-4 py-3 hover:bg-teal-700 transition",children:"Pay now with Stripe"}),l.jsx("button",{onClick:()=>{alert("Booking placed successfully. Pay later to confirm."),j()},className:"flex-1 inline-flex justify-center items-center rounded-full border border-slate-300 text-slate-900 text-sm font-semibold px-4 py-3 hover:bg-slate-50 transition",children:"Pay later"})]})]}):x?(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"rounded-2xl border border-green-200 bg-green-50 px-4 py-3 text-green-800",children:[l.jsx("p",{className:"font-semibold",children:"Booking received"}),(0,l.jsxs)("p",{className:"text-sm text-green-700",children:["Our team will confirm shortly. Reference: ",x]})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{onClick:j,className:"inline-flex items-center justify-center px-5 py-2 rounded-full bg-teal-600 text-white text-sm font-semibold hover:bg-teal-700 transition",children:"Close"})})]}):(0,l.jsxs)("form",{className:"space-y-4",onSubmit:y,children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-sm font-semibold text-slate-800",children:"Full Name"}),l.jsx("input",{name:"name",value:r.name,onChange:g,className:`${d} border-slate-200`,required:!0})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-sm font-semibold text-slate-800",children:"Email"}),l.jsx("input",{name:"email",type:"email",value:r.email,onChange:g,className:`${d} border-slate-200`,required:!0})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-sm font-semibold text-slate-800",children:"Phone"}),l.jsx("input",{name:"phone",value:r.phone,onChange:g,className:`${d} border-slate-200`,required:!0})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-sm font-semibold text-slate-800",children:"Country"}),l.jsx("input",{name:"country",value:r.country,onChange:g,className:`${d} border-slate-200`})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-sm font-semibold text-slate-800",children:"Preferred Start Date"}),l.jsx("input",{name:"preferredStartDate",type:"date",value:r.preferredStartDate,onChange:g,className:`${d} border-slate-200`})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-sm font-semibold text-slate-800",children:"Number of People"}),l.jsx("input",{name:"people",type:"number",min:1,value:r.people,onChange:g,className:`${d} border-slate-200`})]})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-sm font-semibold text-slate-800",children:"Mode"}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:["online","residential"].map(s=>(0,l.jsxs)("label",{className:`rounded-xl border px-4 py-3 cursor-pointer transition ${r.mode===s?"border-teal-600 bg-teal-50":"border-slate-200 bg-white hover:border-teal-300"}`,children:[l.jsx("input",{type:"radio",name:"mode",value:s,checked:r.mode===s,onChange:g,className:"hidden"}),l.jsx("p",{className:"font-semibold text-slate-900 capitalize",children:s}),(0,l.jsxs)("p",{className:"text-sm text-slate-600",children:["USD ",e.price||0]})]},s))})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-sm font-semibold text-slate-800",children:"Additional Notes"}),l.jsx("textarea",{name:"notes",rows:3,value:r.notes,onChange:g,className:`${d} border-slate-200 resize-none`,placeholder:"Share any preferences"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 text-sm",children:[(0,l.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-slate-50 px-4 py-3",children:[l.jsx("p",{className:"text-slate-600",children:"Price per person"}),(0,l.jsxs)("p",{className:"font-semibold text-slate-900",children:["$",e.price||0]})]}),(0,l.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-slate-50 px-4 py-3",children:[l.jsx("p",{className:"text-slate-600",children:"People"}),l.jsx("p",{className:"font-semibold text-slate-900",children:r.people})]}),(0,l.jsxs)("div",{className:"rounded-xl border-2 border-teal-600 bg-teal-50 px-4 py-3",children:[l.jsx("p",{className:"text-teal-700 font-semibold",children:"Total amount"}),(0,l.jsxs)("p",{className:"text-lg font-bold text-slate-900",children:["$",f]})]})]}),b,(0,l.jsxs)("div",{className:"flex justify-end gap-2 pt-2",children:[l.jsx("button",{type:"button",onClick:j,className:"px-4 py-2 rounded-full border border-slate-200 text-slate-900 hover:bg-slate-50 transition",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:c,className:"px-5 py-2 rounded-full bg-teal-600 text-white text-sm font-semibold hover:bg-teal-700 transition disabled:opacity-60",children:c?"Booking...":"Book now"})]})]})]})})}let m=(e="")=>{if(!e)return"";if(e.includes("watch?v="))return e.replace("watch?v=","embed/");if(e.includes("youtu.be/")){let s=e.split("youtu.be/")[1]?.split(/[?&]/)[0];return s?`https://www.youtube.com/embed/${s}`:e}if(e.includes("youtube.com/shorts/")){let s=e.split("youtube.com/shorts/")[1]?.split(/[?&]/)[0];return s?`https://www.youtube.com/embed/${s}`:e}if(e.includes("vimeo.com/")){let s=e.split("vimeo.com/")[1]?.split(/[?&]/)[0];return s?`https://player.vimeo.com/video/${s}`:e}return e};function x(){let e=(0,r.useParams)(),s=(0,r.useSearchParams)(),[t,o]=(0,a.useState)(null),[n,d]=(0,a.useState)(!0);e?.slug;let[x,p]=(0,a.useState)([]),[u,h]=(0,a.useState)([]),[b,f]=(0,a.useState)(""),[g,j]=(0,a.useState)(!1),[y,N]=(0,a.useState)(!1),v=(0,a.useMemo)(()=>t?.galleryImages||[],[t?.galleryImages]),w=(0,a.useMemo)(()=>[...Array.isArray(t?.promoVideos)?t.promoVideos:[],...t?.videoUrl?[t.videoUrl]:[]].map(e=>"string"==typeof e?e:e?.url).filter(Boolean),[t?.promoVideos,t?.videoUrl]),k=(0,a.useMemo)(()=>{let e=v.length?v:[],s=t?.coverImage||"/images/hero-placeholder.jpg";return e.length?e:[s]},[v,t?.coverImage]),[S,P]=(0,a.useState)(0),C=(0,a.useMemo)(()=>b?u.filter(e=>(e.category?.slug||e.categorySlug)===b||(e.category?.name||e.categoryName||e.category)===b):u,[u,b]),D=e=>{f(e);let t=new URLSearchParams(s.toString());e?t.set("category",e):t.delete("category"),window.history.replaceState({},"",`/courses${t.toString()?`?${t.toString()}`:""}`)};return n?l.jsx("div",{className:"max-w-6xl mx-auto px-4 py-12 text-[#4c5f68]",children:"Loading..."}):t?(0,l.jsxs)("div",{className:"bg-[#f5f8f4] min-h-screen",children:[(0,l.jsxs)("div",{className:"relative h-[90vh] min-h-[520px] w-full overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0",children:k.map((e,s)=>{let a=s===S;return l.jsx("img",{src:e,alt:t.title,className:"absolute inset-0 h-full w-full object-cover",style:{opacity:a?1:0,transition:"opacity 1.2s ease, transform 8s ease",transform:a?"scale(1.05)":"scale(1)"}},`${e}-${s}`)})}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/60 via-black/40 to-black/70"}),l.jsx("div",{className:"relative z-10 flex h-full items-center",children:l.jsx("div",{className:"w-full max-w-6xl mx-auto px-4 sm:px-6",children:(0,l.jsxs)("div",{className:"max-w-3xl space-y-4 text-white",children:[l.jsx("span",{className:"inline-block px-3 py-1 rounded-full bg-white/10 border border-white/20 text-xs tracking-[0.25em] uppercase",children:t.category?.name||"Course"}),l.jsx("h1",{className:"text-4xl sm:text-5xl font-semibold leading-tight",children:t.title}),(()=>{let e=(t.overview||t.description||t.detailedDescription||"").replace(/<[^>]+>/g," ").trim();return e?l.jsx("p",{className:"text-base sm:text-lg text-white/90 leading-relaxed",children:e}):null})(),(0,l.jsxs)("div",{className:"flex flex-wrap gap-3 text-sm text-white/80",children:[t.duration?(0,l.jsxs)("span",{className:"px-3 py-1 rounded-full bg-white/10 border border-white/20",children:[t.duration," days"]}):null,t.mode?l.jsx("span",{className:"px-3 py-1 rounded-full bg-white/10 border border-white/20 capitalize",children:t.mode}):null,t.price?(0,l.jsxs)("span",{className:"px-3 py-1 rounded-full bg-white/10 border border-white/20",children:["USD ",t.price]}):null]}),l.jsx("button",{onClick:()=>N(!0),className:"mt-2 inline-flex items-center justify-center px-6 py-3 rounded-full bg-[#2F8D59] hover:bg-[#27784c] text-white font-semibold shadow-lg transition",children:"Enroll now"})]})})})]}),(0,l.jsxs)("div",{className:"w-full max-w-6xl xl:max-w-6xl 2xl:max-w-[1200px] mx-auto px-4 sm:px-6 py-12 space-y-10",children:[(0,l.jsxs)("div",{className:"space-y-4 relative",children:[(0,l.jsxs)("div",{className:"rounded-2xl border border-[#dfe8e2] bg-white shadow-sm p-5 md:max-w-[360px] md:w-[360px] md:ml-6 md:mb-4",style:{float:"right"},children:[l.jsx("h3",{className:"text-lg font-semibold text-[#0f1f17] mb-3",children:"Key details"}),(0,l.jsxs)("div",{className:"space-y-2 text-sm text-[#1d3329]",children:[t.duration?(0,l.jsxs)("p",{children:["Duration: ",t.duration," days"]}):null,t.mode?(0,l.jsxs)("p",{children:["Mode: ",t.mode]}):null,t.price?(0,l.jsxs)("p",{children:["Price: USD ",t.price]}):null,t.certificationInfo?(0,l.jsxs)("p",{children:["Certification: ",t.certificationInfo]}):null]})]}),(0,l.jsxs)("div",{className:"space-y-4",id:"about",children:[l.jsx("h2",{className:"text-xl font-semibold text-[#0f1f17]",children:"About this course"}),l.jsx("div",{className:"prose prose-slate max-w-none",dangerouslySetInnerHTML:{__html:t.detailedDescription||t.description||t.overview||""}})]}),l.jsx("div",{className:"clear-both md:hidden"})]}),(0,l.jsxs)("div",{className:"space-y-3",children:[l.jsx("h3",{className:"text-xl font-semibold text-[#0f1f17]",children:"Syllabus"}),t.syllabus?.length?l.jsx("div",{className:"space-y-2",children:t.syllabus.map((e,s)=>(0,l.jsxs)("details",{className:"rounded-2xl border border-[#dfe8e2] bg-white shadow-sm",children:[l.jsx("summary",{className:"cursor-pointer px-4 py-3 font-semibold text-[#0f1f17]",children:e.topic}),l.jsx("ul",{className:"px-4 pb-3 space-y-2 list-disc list-inside text-sm text-[#1d3329]",children:(e.items||[]).map((e,s)=>l.jsx("li",{children:e},s))})]},s))}):l.jsx("p",{className:"text-sm text-[#4c5f68]",children:"Syllabus coming soon."})]}),w.length?(0,l.jsxs)("div",{className:"space-y-3",id:"videos",children:[l.jsx("h3",{className:"text-xl font-semibold text-[#0f1f17]",children:"Promo videos"}),l.jsx("div",{className:"space-y-3",children:w.map((e,s)=>/youtube\.com|youtu\.be|vimeo\.com/.test(e||"")?l.jsx("iframe",{src:m(e),className:"w-full aspect-video rounded-xl border border-[#dfe8e2]",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0},`${e}-${s}`):l.jsx("video",{src:e,controls:!0,className:"w-full rounded-xl border border-[#dfe8e2]"},`${e}-${s}`))})]}):null]}),y&&l.jsx(c,{course:t,open:y,onClose:()=>N(!1)})]}):l.jsx("div",{className:"bg-[#f5f8f4] min-h-screen",children:(0,l.jsxs)("div",{className:"w-full max-w-6xl xl:max-w-6xl 2xl:max-w-[1200px] mx-auto px-4 sm:px-6 py-12 space-y-8",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-3",children:[l.jsx("p",{className:"text-sm uppercase tracking-[0.2em] text-[#2F8D59] font-semibold",children:"Courses"}),l.jsx("h1",{className:"text-3xl md:text-4xl font-semibold text-[#0f1f17]",children:"Learn with Annapurna"}),l.jsx("p",{className:"text-[#4c5f68] max-w-3xl",children:"Yoga teacher training, online and residential programs, and sound healing courses."})]}),x.length>0&&(0,l.jsxs)("div",{className:"flex flex-wrap gap-2",children:[l.jsx("button",{onClick:()=>D(""),className:`px-3 py-1.5 rounded-full border ${b?"border-[#dfe8e2] text-[#0f1f17]":"bg-[#2F8D59] text-white border-[#2F8D59]"}`,children:"All"}),x.map(e=>l.jsx("button",{onClick:()=>D(e.slug),className:`px-3 py-1.5 rounded-full border ${b===e.slug?"bg-[#2F8D59] text-white border-[#2F8D59]":"border-[#dfe8e2] text-[#0f1f17]"}`,children:e.name},e.slug))]}),(0,l.jsxs)("div",{className:"bg-white border border-[#dfe8e2] rounded-2xl p-6 shadow-sm space-y-3",children:[g?l.jsx("p",{className:"text-[#4c5f68]",children:"No such category found."}):b&&0===C.length?l.jsx("p",{className:"text-[#4c5f68]",children:"No courses available in this category yet."}):l.jsx("p",{className:"text-[#4c5f68]",children:"We couldn’t find this course. It may have been removed or renamed."}),l.jsx(i.default,{href:"/courses",className:"inline-flex px-4 py-2 rounded-full bg-[#2F8D59] text-white font-semibold hover:bg-[#27784c] transition w-fit",children:"Browse all courses"})]})]})})}},6168:(e,s,t)=>{"use strict";function l(e,s="Something went wrong"){if(!e)return s;let t=e.response?.data||e.data;if(t?.errors&&"object"==typeof t.errors){let e=Object.values(t.errors).flatMap(e=>Array.isArray(e?._errors)?e._errors:[]).filter(Boolean);if(e.length)return e.join(", ")}return t?.message?t.message:"string"==typeof e?e:e.message?e.message:s}t.d(s,{i:()=>l})},44076:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l});let l=(0,t(68570).createProxy)(String.raw`/Users/bibekaryal/Downloads/AnnapurnaHostipal-Nakhu/frontend/app/courses/[slug]/page.js#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),l=s.X(0,[8948,829,9143],()=>t(46464));module.exports=l})();