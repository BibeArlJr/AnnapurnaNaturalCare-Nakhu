(()=>{var e={};e.id=3461,e.ids=[3461],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},33361:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d}),a(52937),a(5986),a(49328),a(20784),a(89204),a(35866);var l=a(23191),t=a(88716),r=a(37922),i=a.n(r),n=a(95231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);a.d(s,o);let d=["",{children:["admin",{children:["health-programs",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,52937)),"/Users/bibekaryal/Downloads/AnnapurnaHostipal-Nakhu/frontend/app/admin/health-programs/page.js"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,5986)),"/Users/bibekaryal/Downloads/AnnapurnaHostipal-Nakhu/frontend/app/admin/layout.js"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,49328)),"/Users/bibekaryal/Downloads/AnnapurnaHostipal-Nakhu/frontend/app/layout.js"],error:[()=>Promise.resolve().then(a.bind(a,20784)),"/Users/bibekaryal/Downloads/AnnapurnaHostipal-Nakhu/frontend/app/error.js"],loading:[()=>Promise.resolve().then(a.bind(a,89204)),"/Users/bibekaryal/Downloads/AnnapurnaHostipal-Nakhu/frontend/app/loading.js"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/bibekaryal/Downloads/AnnapurnaHostipal-Nakhu/frontend/app/admin/health-programs/page.js"],m="/admin/health-programs/page",p={require:a,loadChunk:()=>Promise.resolve()},u=new l.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/admin/health-programs/page",pathname:"/admin/health-programs",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7866:(e,s,a)=>{Promise.resolve().then(a.bind(a,57455))},57455:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>b});var l=a(10326),t=a(17577),r=a(89420),i=a(6168),n=a(84625),o=a(1824),d=a(43404),c=a(53133),m=a(55967),p=a(14991),u=a(33265);a(24221);let x=(0,u.default)(async()=>{},{loadableGenerated:{modules:["app/admin/health-programs/page.js -> react-quill"]},ssr:!1}),g={title:"",slug:"",shortDescription:"",longDescription:"",durationInDays:"",modesAvailable:[],pricing:{online:"",residential:"",dayVisitor:""},inclusions:[""],outcomes:[""],coverImage:"",galleryImages:[],promoVideos:[],videoUrl:"",isPublished:!1},h=[{value:"online",label:"Online"},{value:"residential",label:"Residential"},{value:"dayVisitor",label:"Day visitor"}];function b(){let[e,s]=(0,t.useState)([]),[a,u]=(0,t.useState)(!0),[b,v]=(0,t.useState)(!1),[j,y]=(0,t.useState)(g),[f,N]=(0,t.useState)(null),[w,k]=(0,t.useState)(!1),[P,D]=(0,t.useState)(!1),[C,I]=(0,t.useState)(null),A=(e="")=>e.toString().toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),_=async()=>{u(!0);try{let e=await (0,r.R1)("/health-programs");s(e?.data||e||[])}catch(e){console.error("Health programs admin load error:",e)}finally{u(!1)}},V=async e=>{I(e._id);try{let a=await (0,r.pE)(`/health-programs/${e._id}`,{isPublished:!e.isPublished}),l=a?.data||a;s(s=>s.map(s=>s._id===e._id?{...s,...l}:s))}catch(e){alert((0,i.i)(e,"Failed to update publish status"))}finally{I(null)}},U=e=>{N(e),y({...g,...e,durationInDays:e.durationInDays||"",pricing:{online:e.pricing?.online??"",residential:e.pricing?.residential??"",dayVisitor:e.pricing?.dayVisitor??""},inclusions:e.inclusions?.length?e.inclusions:[""],outcomes:e.outcomes?.length?e.outcomes:[""],galleryImages:e.galleryImages||[],promoVideos:e.promoVideos||[],videoUrl:e.videoUrl||(e.promoVideos&&e.promoVideos[0]?.url?e.promoVideos[0].url:""),coverImage:e.coverImage||""}),D(!0),v(!0)},E=e=>{let{name:s,value:a,type:l,checked:t}=e.target;if(s.startsWith("pricing.")){let e=s.split(".")[1];y(s=>({...s,pricing:{...s.pricing,[e]:a}}));return}let r="checkbox"===l?t:a;if("title"===s&&!P){y(e=>({...e,title:r,slug:A(r)}));return}"slug"===s&&D(!0),y(e=>({...e,[s]:r}))},S=e=>{y(s=>{let a=s.modesAvailable.includes(e);return{...s,modesAvailable:a?s.modesAvailable.filter(s=>s!==e):[...s.modesAvailable,e]}})},L=(e,s,a)=>{y(l=>{let t=[...l[e]];return t[s]=a,{...l,[e]:t}})},H=e=>y(s=>({...s,[e]:[...s[e],""]})),q=(e,s)=>y(a=>({...a,[e]:a[e].filter((e,a)=>a!==s)})),R=async()=>{if(!j.title.trim()){alert("Title is required");return}k(!0);try{let e={title:j.title,slug:j.slug,shortDescription:j.shortDescription,longDescription:j.longDescription,durationInDays:j.durationInDays?Number(j.durationInDays):void 0,modesAvailable:j.modesAvailable,pricing:{online:""===j.pricing.online?0:Number(j.pricing.online),residential:""===j.pricing.residential?0:Number(j.pricing.residential),dayVisitor:""===j.pricing.dayVisitor?0:Number(j.pricing.dayVisitor)},inclusions:j.inclusions.filter(e=>e&&e.trim()),outcomes:j.outcomes.filter(e=>e&&e.trim()),coverImage:j.coverImage,galleryImages:j.galleryImages,promoVideos:[...j.promoVideos,j.videoUrl].filter(Boolean).map(e=>({type:"url",url:e})),videoUrl:j.videoUrl,isPublished:j.isPublished};f?await (0,r.pE)(`/health-programs/${f._id}`,e):await (0,r.sg)("/health-programs",e),v(!1),N(null),y(g),_()}catch(e){alert((0,i.i)(e,"Failed to save program"))}finally{k(!1)}},Z=async e=>{if(confirm("Delete this program?"))try{await (0,r.QW)(`/health-programs/${e}`),_()}catch(e){alert((0,i.i)(e,"Delete failed"))}};return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[l.jsx("h1",{className:"text-2xl font-semibold text-white",children:"Health Programs"}),l.jsx("p",{className:"text-sm text-slate-400",children:"Manage online, residential, and day visitor programs."})]}),(0,l.jsxs)("button",{onClick:()=>{y(g),N(null),D(!1),v(!0)},className:"inline-flex items-center gap-2 bg-teal-600 hover:bg-teal-500 text-white px-4 py-2 rounded-lg transition",children:[l.jsx(n.Z,{className:"h-5 w-5"}),"Add Program"]})]}),a?l.jsx("p",{className:"text-slate-400 text-sm",children:"Loading..."}):0===e.length?l.jsx("div",{className:"text-slate-400 text-sm bg-slate-900 border border-slate-800 rounded-lg p-6",children:"No programs yet."}):l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-4",children:e.map(e=>(0,l.jsxs)("div",{className:"rounded-xl border border-white/10 bg-[#0f131a] p-4 space-y-3 shadow-sm",children:[l.jsx("div",{className:"rounded-lg overflow-hidden bg-slate-800 h-32 border border-slate-800",children:e.coverImage?l.jsx("img",{src:e.coverImage,alt:e.title,className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-500 text-xs",children:"No image"})}),(0,l.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,l.jsxs)("div",{className:"space-y-1",children:[l.jsx("p",{className:"text-white font-semibold line-clamp-2",children:e.title}),l.jsx("p",{className:"text-xs text-slate-400",children:e.slug})]}),(0,l.jsxs)("div",{className:"flex flex-col items-end gap-1",children:[l.jsx("span",{className:`px-3 py-1 rounded-full text-xs ${e.isPublished?"bg-green-900/60 text-green-300":"bg-slate-800 text-slate-300"}`,children:e.isPublished?"Published":"Draft"}),l.jsx(p.W,{status:e.isPublished?"published":"draft",onToggle:()=>V(e),disabled:C===e._id})]})]}),l.jsx("p",{className:"text-sm text-slate-300 line-clamp-2",children:e.shortDescription}),(0,l.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,l.jsxs)("button",{onClick:()=>U(e),className:"inline-flex items-center gap-1 px-3 py-1.5 rounded-lg bg-slate-800 hover:bg-slate-700 text-slate-100 text-sm",children:[l.jsx(o.Z,{className:"h-4 w-4"}),"Edit"]}),(0,l.jsxs)("button",{onClick:()=>Z(e._id),className:"inline-flex items-center gap-1 px-3 py-1.5 rounded-lg bg-red-900/60 hover:bg-red-800 text-red-100 text-sm",children:[l.jsx(d.Z,{className:"h-4 w-4"}),"Delete"]})]})]},e._id))}),b&&l.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center px-4 py-8",children:(0,l.jsxs)("div",{className:"w-full max-w-5xl max-h-[90vh] bg-[#0f131a] border border-white/10 rounded-2xl shadow-2xl overflow-hidden flex flex-col",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-slate-800",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("h2",{className:"text-xl font-semibold text-white",children:[f?"Edit":"Add"," Health Program"]}),l.jsx("p",{className:"text-sm text-slate-400",children:"Standalone programs separate from health packages."})]}),l.jsx("button",{onClick:()=>v(!1),className:"text-slate-400 hover:text-white text-xl leading-none",children:"\xd7"})]}),(0,l.jsxs)("div",{className:"flex-1 overflow-y-auto px-6 py-4 space-y-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-sm text-slate-300",children:"Title"}),l.jsx("input",{name:"title",value:j.title,onChange:E,className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white"})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-sm text-slate-300",children:"Slug"}),l.jsx("input",{name:"slug",value:j.slug,onChange:E,className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white"})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-sm text-slate-300",children:"Short description"}),l.jsx("input",{name:"shortDescription",value:j.shortDescription,onChange:E,className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white"})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-sm text-slate-300",children:"Duration (days)"}),l.jsx("input",{name:"durationInDays",type:"number",value:j.durationInDays,onChange:E,className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white"})]})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-sm text-slate-300",children:"Overview"}),l.jsx("div",{className:"bg-slate-900 border border-slate-700 rounded-lg",children:l.jsx(x,{theme:"snow",value:j.longDescription,onChange:e=>y(s=>({...s,longDescription:e}))})})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm text-slate-300",children:"Available modes"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:h.map(e=>{let s=j.modesAvailable.includes(e.value);return l.jsx("button",{type:"button",onClick:()=>S(e.value),className:`px-3 py-1 rounded-full border text-xs ${s?"bg-teal-900/40 border-teal-500 text-teal-200":"bg-slate-900 border-slate-700 text-slate-300"}`,children:e.label},e.value)})})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:["online","residential","dayVisitor"].map(e=>(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsxs)("label",{className:"text-sm text-slate-300 capitalize",children:[e," price (USD)"]}),l.jsx("input",{name:`pricing.${e}`,type:"number",value:j.pricing[e],onChange:E,className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white"})]},e))}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[l.jsx("label",{className:"text-sm text-slate-300",children:"Inclusions"}),l.jsx("button",{onClick:()=>H("inclusions"),className:"text-xs text-teal-300",children:"+ Add"})]}),l.jsx("div",{className:"space-y-2",children:j.inclusions.map((e,s)=>(0,l.jsxs)("div",{className:"flex gap-2",children:[l.jsx("input",{value:e,onChange:e=>L("inclusions",s,e.target.value),className:"flex-1 bg-slate-900 border border-slate-700 rounded-lg px-4 py-2 text-white",placeholder:"Inclusion"}),j.inclusions.length>1&&l.jsx("button",{onClick:()=>q("inclusions",s),className:"px-3 py-2 rounded-lg bg-red-900/50 text-red-100",children:"Remove"})]},s))})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[l.jsx("label",{className:"text-sm text-slate-300",children:"Outcomes"}),l.jsx("button",{onClick:()=>H("outcomes"),className:"text-xs text-teal-300",children:"+ Add"})]}),l.jsx("div",{className:"space-y-2",children:j.outcomes.map((e,s)=>(0,l.jsxs)("div",{className:"flex gap-2",children:[l.jsx("input",{value:e,onChange:e=>L("outcomes",s,e.target.value),className:"flex-1 bg-slate-900 border border-slate-700 rounded-lg px-4 py-2 text-white",placeholder:"Outcome"}),j.outcomes.length>1&&l.jsx("button",{onClick:()=>q("outcomes",s),className:"px-3 py-2 rounded-lg bg-red-900/50 text-red-100",children:"Remove"})]},s))})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm text-slate-300",children:"Cover image"}),l.jsx(c.Z,{accept:"image/*",maxItems:1,value:j.coverImage?[j.coverImage]:[],onChange:e=>y(s=>({...s,coverImage:e[0]||""}))})]}),l.jsx(m.Z,{title:"Gallery & promo videos",images:j.galleryImages,setImages:e=>y(s=>({...s,galleryImages:e.slice(0,10)})),videos:j.promoVideos,setVideos:e=>y(s=>({...s,promoVideos:e.slice(0,3)})),maxImages:10,maxVideos:3,showVideoUpload:!1}),(0,l.jsxs)("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-sm text-slate-300",children:"YouTube link (optional)"}),l.jsx("input",{type:"text",value:j.videoUrl,onChange:e=>y(s=>({...s,videoUrl:e.target.value})),placeholder:"Paste a YouTube URL",className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white"})]})]}),(0,l.jsxs)("div",{className:"flex gap-2 items-center",children:[l.jsx("input",{type:"checkbox",name:"isPublished",checked:j.isPublished,onChange:E}),l.jsx("label",{className:"text-sm text-slate-300",children:"Published"})]})]}),(0,l.jsxs)("div",{className:"px-6 py-4 border-t border-slate-800 flex justify-end gap-3",children:[l.jsx("button",{onClick:()=>v(!1),className:"px-4 py-2 rounded-lg bg-slate-800 text-white",children:"Cancel"}),l.jsx("button",{onClick:R,disabled:w,className:"px-4 py-2 rounded-lg bg-teal-600 text-white disabled:opacity-60",children:w?"Saving...":f?"Save changes":"Create Program"})]})]})})]})}},52937:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>l});let l=(0,a(68570).createProxy)(String.raw`/Users/bibekaryal/Downloads/AnnapurnaHostipal-Nakhu/frontend/app/admin/health-programs/page.js#default`)},1824:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});var l=a(17577);let t=l.forwardRef(function({title:e,titleId:s,...a},t){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},a),e?l.createElement("title",{id:s},e):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"}))})},84625:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});var l=a(17577);let t=l.forwardRef(function({title:e,titleId:s,...a},t){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},a),e?l.createElement("title",{id:s},e):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))})},43404:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});var l=a(17577);let t=l.forwardRef(function({title:e,titleId:s,...a},t){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},a),e?l.createElement("title",{id:s},e):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))})}};var s=require("../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),l=s.X(0,[8948,829,9143,5092,713],()=>a(33361));module.exports=l})();