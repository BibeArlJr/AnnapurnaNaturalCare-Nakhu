(()=>{var e={};e.id=4574,e.ids=[4574],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},527:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d}),a(3248),a(5986),a(49328),a(20784),a(89204),a(35866);var s=a(23191),r=a(88716),l=a(37922),n=a.n(l),i=a(95231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);a.d(t,o);let d=["",{children:["admin",{children:["billing",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,3248)),"/Users/bibekaryal/Downloads/AnnapurnaHostipal-Nakhu/frontend/app/admin/billing/page.js"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,5986)),"/Users/bibekaryal/Downloads/AnnapurnaHostipal-Nakhu/frontend/app/admin/layout.js"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,49328)),"/Users/bibekaryal/Downloads/AnnapurnaHostipal-Nakhu/frontend/app/layout.js"],error:[()=>Promise.resolve().then(a.bind(a,20784)),"/Users/bibekaryal/Downloads/AnnapurnaHostipal-Nakhu/frontend/app/error.js"],loading:[()=>Promise.resolve().then(a.bind(a,89204)),"/Users/bibekaryal/Downloads/AnnapurnaHostipal-Nakhu/frontend/app/loading.js"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/bibekaryal/Downloads/AnnapurnaHostipal-Nakhu/frontend/app/admin/billing/page.js"],u="/admin/billing/page",m={require:a,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/billing/page",pathname:"/admin/billing",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},27513:(e,t,a)=>{Promise.resolve().then(a.bind(a,81746))},82345:(e,t,a)=>{Promise.resolve().then(a.bind(a,69339))},81746:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>g});var s=a(10326),r=a(17577),l=a(88295),n=a.n(l),i=a(89420),o=a(35047);let d={paid:"bg-emerald-900/70 text-emerald-200",pending:"bg-amber-900/70 text-amber-200",cancelled:"bg-red-900/70 text-red-200",failed:"bg-red-900/70 text-red-200",refunded:"bg-slate-800 text-slate-200"},c=e=>null==e||""===e?"—":e,u=e=>`$${Number(e||0).toFixed(2)}`,m=e=>e?n()(e).format("MMM D, YYYY"):"—",p=e=>"health"===e||"package"===e?"Health Package":"retreat"===e?"Retreat Program":"health_program"===e?"Health Program":"course"===e?"Course":"—",h=e=>{if(null==e||isNaN(e))return"—";let t=["","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"],a=["","","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"],s=e=>e<20?t[e]:e<100?`${a[Math.floor(e/10)]}${e%10?"-"+t[e%10]:""}`:e<1e3?`${t[Math.floor(e/100)]} hundred${e%100?" "+s(e%100):""}`:e<1e6?`${s(Math.floor(e/1e3))} thousand${e%1e3?" "+s(e%1e3):""}`:`${e}`,r=Math.floor(e),l=Math.round((e-r)*100),n=s(r)||"zero",i=l?` and ${s(l)} cents`:"";return`${n} dollars${i}`};function x(e,t,a){let s=[],r=(...e)=>{for(let t of e){let e=Number(t);if(!isNaN(e)&&e>0)return e}return 0},l=Number(t?.numberOfPeople||t?.peopleCount||t?.participants||e?.metadata?.numberOfPeople||1)||1,n=e?.bookingType,i="retreat_program"===n?"retreat":"health_program"===n?"health_program":"course"===n?"course":"health"===n||"package"===n?"health":n,o=Number(e?.amount)||0,d=Number(t?.totalPriceUSD||t?.totalPrice||e?.metadata?.totalPriceUSD||e?.metadata?.totalPrice)||0;if("retreat"===i){let n=t?.programTitle||t?.program?.title||a?.title||e?.metadata?.programTitle||e?.metadata?.programName,i=r(a?.basePricePerPerson,a?.pricePerPersonUSD,a?.retreatPricePerPerson,t?.program?.pricePerPerson,t?.program?.pricePerPersonUSD,t?.program?.basePricePerPerson,t?.program?.basePrice,t?.pricePerPersonUSD,t?.retreatPricePerPerson,t?.pricePerPerson,t?.retreatPricePerPersonUSD,t?.programPricePerPerson,e?.metadata?.retreatPricePerPerson);i&&s.push({label:"Retreat Program",sub:n||"—",qty:l,unit:i,total:i*l});let o=t?.accommodationChoice||t?.accommodationType||t?.accommodation?.key,d=t?.accommodation?.label||t?.accommodationLabel||o||a?.accommodationPricing?.find(e=>e.key===o)?.label||e?.metadata?.accommodationLabel,c=r(e?.metadata?.accommodationPricePerNight,e?.metadata?.accommodationPricePerPerson,e?.metadata?.accommodationPricePerPersonUSD,t?.hotelPricePerNight,t?.accommodationPricePerNight,t?.accommodationPricePerPerson,t?.accommodationPricePerPersonUSD,o&&a?.accommodationPricing?.length?a.accommodationPricing.find(e=>e.key===o)?.pricePerPersonUSD:0),u=Number(t?.accommodationNights||t?.hotelNights||e?.metadata?.accommodationNights)||Number(a?.durationDays||a?.duration)||1;c&&s.push({label:"Accommodation",sub:d||"Selected option",qty:l,unit:c,total:c*u*l})}else if("health_program"===i){let a=t?.programTitle||t?.program?.title||e?.metadata?.programTitle||"Health Program",n=r(t?.pricePerPerson,t?.pricePerPersonUSD,e?.metadata?.pricePerPerson,e?.metadata?.pricePerPersonUSD);n&&s.push({label:"Health Program",sub:a,qty:l,unit:n,total:n*l})}else if("course"===i){let a=t?.courseTitle||t?.course?.title||e?.metadata?.courseTitle||"Course",n=r(t?.pricePerPerson,e?.metadata?.pricePerPerson,t?.pricePerPersonUSD,e?.metadata?.pricePerPersonUSD);n&&s.push({label:"Course",sub:a,qty:l,unit:n,total:n*l})}else{let r=t?.packageName||a?.name,n=t?.pricePerPerson||t?.pricePerPersonUSD||a?.price||a?.pricePerPersonUSD||e?.metadata?.pricePerPerson||(e?.metadata?.packageSubtotal&&l?Number(e.metadata.packageSubtotal)/l:0)||(e?.amount&&l?e.amount/l:0)||0;n&&s.push({label:"Health Package",sub:r||"—",qty:l,unit:n,total:n*l})}if(0===s.length&&(o||d)){let e=o||d;s.push({label:"retreat"===i?"Retreat Program":"health"===i?"Health Package":"Booking",sub:t?.programTitle||a?.title||t?.packageName||a?.name||"Booking",qty:l,unit:e/l,total:e})}let c=s.reduce((e,t)=>e+(Number(t.total)||0),0)||o||e?.metadata?.subtotal||d||0;return{rows:s,subtotal:c,qty:l}}function g(){let[e,t]=(0,r.useState)([]),[a,l]=(0,r.useState)(!0),[g,P]=(0,r.useState)({status:"",bookingType:"",email:"",startDate:"",endDate:""}),[$,D]=(0,r.useState)({paidAmount:0,pendingAmount:0,count:0}),[M,S]=(0,r.useState)(null),[_,C]=(0,r.useState)(!1),[A,T]=(0,r.useState)(!1),[H,Z]=(0,r.useState)(null),[E,L]=(0,r.useState)(null),[O,Y]=(0,r.useState)(!1),[R,I]=(0,r.useState)(!1),[U,V]=(0,r.useState)(!1),[B,W]=(0,r.useState)(!1),[F,z]=(0,r.useState)([]),K=(0,r.useRef)(null),q=(0,r.useRef)(null);(0,o.useRouter)();let G=(0,r.useMemo)(()=>{let e=new URLSearchParams;return Object.entries(g).forEach(([t,a])=>{a&&e.append(t,a)}),e.toString()},[g]),J=async()=>{l(!0);try{let e=await (0,i.R1)(`/admin/payments${G?`?${G}`:""}`);t(e?.data||e||[]),D(e?.totals||{paidAmount:0,pendingAmount:0,count:0})}catch(e){console.error("Payments load error:",e)}finally{l(!1)}},Q=(0,r.useMemo)(()=>{let t=n()().subtract(30,"day");return e.filter(e=>"paid"===e.status&&e.createdAt&&n()(e.createdAt).isAfter(t)).reduce((e,t)=>e+(Number(t.amount)||0),0)},[e]),X=async e=>{C(!0),S(e),Z(null),L(null),Y(!1);try{let t=await (0,i.R1)(`/admin/payments/${e._id}`),a=t?.data||t||e;if(S(a),a.bookingId)try{if("health"===a.bookingType){let e=await (0,i.R1)("/package-bookings"),t=(e?.data||e||[]).find(e=>e._id===a.bookingId);if(t?Z(t):Y(!0),t?.packageId){let e=await (0,i.R1)(`/packages/${t.packageId}`).catch(()=>null);(e?.data||e?.name)&&L(e.data||e)}}else if("retreat"===a.bookingType){let e=await (0,i.R1)("/retreat-bookings"),t=(e?.data||e||[]).find(e=>e._id===a.bookingId);t?Z(t):Y(!0);let s=t?.programId||a.metadata?.programId;if(s){let e=await (0,i.R1)(`/retreat-programs/${s}`).catch(()=>null);(e?.data||e?.title)&&L(e.data||e)}}else if("health_program"===a.bookingType){let e=await (0,i.R1)("/health-program-bookings"),t=(e?.data||e||[]).find(e=>e._id===a.bookingId);t?Z(t):Y(!0);let s=t?.programId||a.metadata?.programId;if(s){let e=await (0,i.R1)(`/health-programs/${s}`).catch(()=>null);(e?.data||e?.title)&&L(e.data||e)}}else if("course"===a.bookingType){let e=await (0,i.R1)("/course-bookings"),t=(e?.data||e||[]).find(e=>e._id===a.bookingId);t?Z(t):Y(!0);let s=t?.courseId||a.metadata?.courseId;if(s){let e=await (0,i.R1)(`/courses/${s}`).catch(()=>null);(e?.data||e?.title)&&L(e.data||e)}}}catch(e){Y(!0)}}catch(e){}finally{C(!1)}},ee=e=>{I(!0),setTimeout(()=>K.current?.scrollIntoView({behavior:"smooth",block:"start"}),50)},et=async e=>{try{await navigator.clipboard.writeText(e||"")}catch(e){}},ea=e=>{let t=G?`?${G}`:"";window.open(`/api/admin/payments/export/${e}${t}`,"_blank")},es=e=>{z(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},er=async()=>{if(F.length&&window.confirm("Cancel selected payments? This will mark them cancelled and set linked bookings to unpaid.")){T(!0);try{await Promise.all(F.map(e=>(0,i.nc)(`/admin/payments/${e}/cancel`))),t(e=>{let t=e.filter(e=>!F.includes(e._id)),a=t.filter(e=>"paid"===e.status).reduce((e,t)=>e+(Number(t.amount)||0),0),s=t.filter(e=>"pending"===e.status).reduce((e,t)=>e+(Number(t.amount)||0),0);return D({paidAmount:a,pendingAmount:s,count:t.length}),t}),z([]),await J()}catch(e){alert(e?.message||"Failed to cancel selected payments")}finally{T(!1)}}},el=async()=>{if(M?._id){T(!0);try{let e=await (0,i.nc)(`/admin/payments/${M._id}/mark-paid`),t=e?.data||e;t&&S(t),await J()}catch(e){alert(e?.message||"Failed to mark paid")}finally{T(!1)}}},en=(e,t="Receipt")=>{let a=window.open("","PRINT","height=900,width=700");a&&(a.document.write(`
      <html>
        <head>
          <title>${t}</title>
          <style>
            @media print {
              @page { margin: 14mm; }
            }
            body { margin: 0; padding: 0; background: #f7f8fa; color: #0f172a; font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', sans-serif; }
            .page { padding: 32px 28px; max-width: 880px; margin: 0 auto; }
            .card { background: #ffffff; border: 1px solid #d1d5db; border-radius: 12px; padding: 20px; margin-bottom: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); }
            h1,h2,h3,h4 { margin: 0; color: #0f172a; }
            .muted { color: #6b7280; }
            .table { width: 100%; border-collapse: collapse; margin-top: 12px; }
            .table th { text-align: left; font-size: 12px; letter-spacing: 0.08em; color: #6b7280; padding: 10px 8px; border-bottom: 1px solid #e5e7eb; background: #f3f4f6; }
            .table td { padding: 10px 8px; border-bottom: 1px solid #e5e7eb; font-size: 14px; }
            .table tbody tr:nth-child(odd) { background: #fafafa; }
            .badge { display: inline-block; padding: 4px 10px; border-radius: 9999px; font-size: 11px; font-weight: 600; }
            .badge-green { background: rgba(16,185,129,0.12); color: #047857; }
            .badge-amber { background: rgba(251,191,36,0.18); color: #b45309; }
            .badge-red { background: rgba(248,113,113,0.15); color: #b91c1c; }
            .grid { display: grid; gap: 12px; }
            .grid-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
            .flex { display: flex; align-items: center; }
            .space-between { justify-content: space-between; }
            .right { text-align: right; }
            .center { text-align: center; }
            .mt-2 { margin-top: 8px; }
            .mt-3 { margin-top: 12px; }
            .mb-1 { margin-bottom: 4px; }
            .title { font-size: 18px; font-weight: 700; }
            .subtitle { font-size: 13px; color: #6b7280; }
            .bordered { border: 1px solid #e5e7eb; border-radius: 12px; padding: 12px; }
            .footer-note { font-size: 12px; color: #6b7280; margin-top: 10px; }
            .logo-box { width: 52px; height: 52px; border-radius: 12px; background: linear-gradient(135deg, #10b981, #14b8a6); display: flex; align-items: center; justify-content: center; color: #fff; font-weight: 700; }
          </style>
        </head>
        <body>
          <div class="page">
            ${e}
          </div>
        </body>
      </html>
    `),a.document.close(),a.focus(),a.print(),a.close())},ei=(e,t,a,s=!1)=>{var r;let{rows:l,subtotal:n}=x(e||{},t||{},a||{}),i=e?._id?`INV-${((r=e._id)&&"string"==typeof r?r.length>10?`${r.slice(0,8)}…`:r:"—").toUpperCase()}`:"INV-—",o=h(e?.amount||0),d=`
      <div class="card flex space-between">
        <div class="flex" style="gap:12px;">
          <div class="logo-box">AN</div>
          <div>
            <div class="title">Annapurna Nature Cure Hospital</div>
            <div class="subtitle">Healthy living for everyone</div>
            <div class="muted">info@example.com \xb7 +977-0000000000 \xb7 Kathmandu, Nepal</div>
          </div>
        </div>
        <div class="right">
          <div class="title">Invoice</div>
          <div class="muted">${i}</div>
          <div class="muted">Date: ${m(e?.createdAt)}</div>
          <div class="muted">Payment ID: ${e?._id||"—"}</div>
        </div>
      </div>
    `,c=e?.status==="paid"?'<span class="badge badge-green">Paid</span>':'<span class="badge badge-amber">Pending</span>',g=e?.gateway==="stripe"?'<span class="badge badge-green">Stripe</span>':'<span class="badge badge-amber">Manual</span>',b=`
      <div class="card grid grid-2">
        <div>
          <div class="subtitle mb-1">Customer</div>
          <div class="mb-1"><strong>Name:</strong> <span class="muted">${t?.userName||e?.userName||"—"}</span></div>
          <div class="mb-1"><strong>Email:</strong> <span class="muted">${t?.email||e?.userEmail||"—"}</span></div>
          <div class="mb-1"><strong>Phone:</strong> <span class="muted">${t?.phone||e?.userPhone||"—"}</span></div>
          <div class="mb-1"><strong>Country:</strong> <span class="muted">${t?.country||e?.userCountry||"—"}</span></div>
        </div>
        <div>
          <div class="subtitle mb-1">Booking</div>
          <div class="mb-1"><strong>Booking ID:</strong> <span class="muted">${e?.bookingId||"—"}</span></div>
          <div class="mb-1"><strong>Program/Package:</strong> <span class="muted">${t?.programTitle||t?.packageName||a?.title||a?.name||"—"}</span></div>
          <div class="mb-1"><strong>Type:</strong> <span class="muted">${p(e?.bookingType)}</span></div>
          <div class="mb-1"><strong>People:</strong> <span class="muted">${t?.numberOfPeople||e?.metadata?.numberOfPeople||"—"}</span></div>
          <div class="mb-1"><strong>Preferred start date:</strong> <span class="muted">${t?.preferredStartDate?m(t.preferredStartDate):"—"}</span></div>
          <div class="mt-2" style="display:flex; gap:6px;">${c}${g}</div>
        </div>
      </div>
    `,f=0===l.length?'<tr><td colspan="5" class="muted">No breakdown available.</td></tr>':l.map((e,t)=>`
          <tr>
            <td class="center">${t+1}</td>
            <td>
              <div><strong>${e.label}</strong></div>
              ${e.sub?`<div class="muted">${e.sub}</div>`:""}
            </td>
            <td class="center">${e.qty}</td>
            <td class="right">${u(e.unit)}</td>
            <td class="right">${u(e.total)}</td>
          </tr>`).join(""),v=`
      <div class="card">
        <div class="title mb-1">Receipt</div>
        <table class="table">
          <thead>
            <tr>
              <th style="width:6%;">#</th>
              <th style="width:44%;">Description</th>
              <th style="width:15%;" class="center">People</th>
              <th style="width:17%;" class="right">Unit price</th>
              <th style="width:18%;" class="right">Line total</th>
            </tr>
          </thead>
          <tbody>${f}</tbody>
        </table>
        <div class="mt-3 bordered">
          <div class="flex space-between mb-1">
            <span class="muted">Subtotal</span>
            <strong>${u(n)}</strong>
          </div>
          <div class="flex space-between">
            <span class="muted">Total paid</span>
            <div class="title">${u(e?.amount||0)}</div>
          </div>
          <div class="muted mt-2">Amount in words: ${o}</div>
        </div>
      </div>
    `,y=`
      <div class="card grid grid-2">
        <div>
          <div class="muted">This is a system generated invoice.</div>
        </div>
        <div class="right">
          <div class="muted">Authorized Signature</div>
          <div style="border-bottom: 1px solid #d1d5db; height: 28px; margin-top: 8px;"></div>
        </div>
      </div>
    `;return s?d+b+v+y:d+v+y},eo=()=>{en(ei(M,H,E,!1),"Receipt")},ed=()=>{en(ei(M,H,E,!0),"Invoice")},ec=e=>{"receipt"===e?eo():"full"===e&&ed(),W(!1)};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold text-white",children:"Billing Dashboard"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Manage payments for packages, retreats, health programs, and courses."})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:()=>ea("csv"),className:"px-3 py-2 rounded-lg border border-slate-700 bg-slate-900 text-slate-200 hover:bg-slate-800 text-sm",children:"Export CSV"}),s.jsx("button",{onClick:()=>ea("pdf"),className:"px-3 py-2 rounded-lg border border-slate-700 bg-slate-900 text-slate-200 hover:bg-slate-800 text-sm",children:"Export PDF"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-3",children:[s.jsx(b,{label:"Total paid",value:`$${($.paidAmount||0).toFixed(2)}`,accent:"text-emerald-300"}),s.jsx(b,{label:"Total pending",value:`$${($.pendingAmount||0).toFixed(2)}`,accent:"text-amber-300"}),s.jsx(b,{label:"Payments",value:$.count||0}),s.jsx(b,{label:"Net revenue",value:`$${($.paidAmount||0).toFixed(2)}`,accent:"text-emerald-200"}),s.jsx(b,{label:"Last 30 days revenue",value:`$${Q.toFixed(2)}`,accent:"text-emerald-200"})]}),s.jsx("div",{className:"border border-slate-800 rounded-xl bg-slate-900 p-4 space-y-3",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-3",children:[(0,s.jsxs)("select",{value:g.status,onChange:e=>P(t=>({...t,status:e.target.value})),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 text-sm focus:outline-none focus:ring-2 focus:ring-teal-500",children:[s.jsx("option",{value:"",children:"All statuses"}),s.jsx("option",{value:"paid",children:"Paid"}),s.jsx("option",{value:"pending",children:"Pending"}),s.jsx("option",{value:"cancelled",children:"Cancelled"}),s.jsx("option",{value:"refunded",children:"Refunded"})]}),(0,s.jsxs)("select",{value:g.bookingType,onChange:e=>P(t=>({...t,bookingType:e.target.value})),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 text-sm focus:outline-none focus:ring-2 focus:ring-teal-500",children:[s.jsx("option",{value:"",children:"All types"}),s.jsx("option",{value:"health",children:"Health Package"}),s.jsx("option",{value:"retreat",children:"Retreat"}),s.jsx("option",{value:"health_program",children:"Health Program"}),s.jsx("option",{value:"course",children:"Course"})]}),s.jsx("input",{type:"email",placeholder:"Search by email",value:g.email,onChange:e=>P(t=>({...t,email:e.target.value})),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 text-sm focus:outline-none focus:ring-2 focus:ring-teal-500"}),s.jsx("input",{type:"date",value:g.startDate,onChange:e=>P(t=>({...t,startDate:e.target.value})),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 text-sm focus:outline-none focus:ring-2 focus:ring-teal-500"}),s.jsx("input",{type:"date",value:g.endDate,onChange:e=>P(t=>({...t,endDate:e.target.value})),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 text-sm focus:outline-none focus:ring-2 focus:ring-teal-500"})]})}),a?s.jsx("p",{className:"text-slate-400 text-sm",children:"Loading..."}):0===e.length?s.jsx("div",{className:"border border-slate-800 rounded-xl bg-slate-900 p-6 text-center text-slate-400",children:"No payments found."}):(0,s.jsxs)("div",{className:"overflow-hidden border border-slate-800 rounded-xl bg-slate-900",children:[(0,s.jsxs)("div",{className:"sticky top-0 z-10 flex items-center justify-between px-4 py-3 border-b border-slate-800 text-sm text-slate-200 bg-slate-900",children:[(0,s.jsxs)("div",{children:[F.length," selected"]}),s.jsx("div",{className:"flex items-center gap-3",children:s.jsx("button",{disabled:!F.length||A,onClick:er,className:`px-3 py-1.5 rounded-lg border ${F.length?"border-red-500 text-red-200 hover:bg-red-500/10":"border-slate-700 text-slate-500 cursor-not-allowed"}`,children:"Cancel selected"})})]}),(0,s.jsxs)("div",{className:"min-w-full overflow-x-auto",children:[(0,s.jsxs)("div",{className:"grid grid-cols-[40px_120px_180px_160px_1fr_120px_110px_110px_80px] min-w-[1100px] px-6 py-3 text-[11px] uppercase tracking-wide text-slate-400 border-b border-slate-800 items-center",children:[s.jsx("span",{className:"flex items-center justify-center",children:s.jsx("input",{type:"checkbox",onChange:()=>{F.length===e.length?z([]):z(e.map(e=>e._id))},checked:F.length===e.length&&e.length>0,className:"h-4 w-4"})}),s.jsx("span",{className:"text-left",children:"Date"}),s.jsx("span",{className:"text-left",children:"Type"}),s.jsx("span",{className:"text-left",children:"Customer"}),s.jsx("span",{className:"text-left",children:"Email"}),s.jsx("span",{className:"text-right",children:"Amount"}),s.jsx("span",{className:"text-center",children:"Status"}),s.jsx("span",{className:"text-center",children:"Gateway"}),s.jsx("span",{className:"text-right",children:"Action"})]}),e.map(e=>{let t=e.metadata?.programName||e.metadata?.courseTitle||e.metadata?.programTitle||e.metadata?.packageName||"—",a=F.includes(e._id);return(0,s.jsxs)("div",{className:`grid grid-cols-[40px_120px_180px_160px_1fr_120px_110px_110px_80px] min-w-[1100px] px-6 py-4 text-sm text-white border-b border-slate-800 last:border-b-0 items-center transition-colors ${a?"bg-slate-800/60":"hover:bg-slate-900/70"}`,children:[s.jsx("div",{className:"flex items-center justify-center",children:s.jsx("input",{type:"checkbox",className:"h-4 w-4",checked:a,onChange:()=>es(e._id)})}),s.jsx("div",{className:"truncate text-slate-200",children:e.createdAt?n()(e.createdAt).format("MMM D, YYYY"):"—"}),(0,s.jsxs)("div",{className:"space-y-1 truncate",children:[s.jsx("p",{className:"font-semibold",title:e.bookingType||"—",children:p(e.bookingType)}),s.jsx("p",{className:"text-xs text-slate-400 truncate",title:t,children:t})]}),s.jsx("div",{className:"truncate",children:s.jsx("p",{className:"font-semibold truncate",title:e.userName||"—",children:e.userName||"—"})}),s.jsx("div",{className:"truncate text-slate-200",title:e.userEmail||"—",children:e.userEmail||"—"}),(0,s.jsxs)("div",{className:"text-right font-semibold text-slate-100 whitespace-nowrap",children:["$",(e.amount||0).toFixed(2)]}),s.jsx("div",{className:"flex justify-center",children:s.jsx("span",{className:`px-3 py-1 rounded-full text-[11px] ${d[e.status]||"bg-slate-800 text-slate-200"}`,children:e.status})}),(0,s.jsxs)("div",{className:"flex justify-center items-center gap-2 text-slate-200",title:e.gateway||"—",children:[s.jsx("span",{className:`h-2.5 w-2.5 rounded-full ${"stripe"===e.gateway?"bg-emerald-400":"bg-slate-400"}`}),s.jsx("span",{className:"capitalize text-sm truncate",children:"stripe"===e.gateway?"Stripe":"Manual"})]}),s.jsx("div",{className:"text-right",children:s.jsx("button",{onClick:()=>X(e),className:"text-xs text-slate-100 hover:text-white underline-offset-2 hover:underline",children:"View"})})]},e._id)})]})]}),M&&s.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 flex items-start justify-center p-4 md:p-10",children:(0,s.jsxs)("div",{className:"w-full max-w-5xl max-h-[90vh] bg-[#0f131a] border border-white/10 shadow-2xl rounded-2xl overflow-hidden flex flex-col",children:[(0,s.jsxs)("div",{className:"sticky top-0 z-10 flex items-center justify-between px-8 py-5 bg-[#0f131a] border-b border-white/5",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Payment details"}),s.jsx("button",{onClick:()=>S(null),className:"text-slate-400 hover:text-white text-xl",children:"\xd7"})]}),s.jsx("div",{className:"overflow-y-auto px-8 py-6 space-y-6 flex-1",children:_?s.jsx("p",{className:"text-slate-400 text-sm",children:"Loading..."}):(0,s.jsxs)(s.Fragment,{children:[s.jsx(y,{selected:M,booking:H,copyToClipboard:et}),"cancelled"===M.status?(0,s.jsxs)("div",{className:"border border-red-500/50 bg-red-900/30 text-red-100 rounded-xl px-4 py-3 text-sm",children:[s.jsx("p",{className:"font-semibold",children:"Payment cancelled"}),s.jsx("p",{className:"text-red-200",children:"Associated booking is now unpaid/cancelled. You can mark it paid again if this was a mistake."}),s.jsx("div",{className:"mt-2 flex gap-2",children:s.jsx("button",{onClick:el,className:"px-3 py-1.5 rounded-lg border border-red-300 text-red-100 hover:bg-red-500/10 text-xs",children:"Mark as paid again"})})]}):null,s.jsx(j,{selected:M,productData:E,onShowBooking:()=>ee(M),showBookingDetails:R,onShowProduct:()=>{V(!0),setTimeout(()=>q.current?.scrollIntoView({behavior:"smooth",block:"start"}),50)},showProductDetails:U}),s.jsx(w,{selected:M,booking:H,bookingMissing:O}),R&&H?s.jsx(v,{title:"Booking details",children:(0,s.jsxs)("div",{ref:K,className:"space-y-2",children:[s.jsx(f,{label:"Name",value:c(H.userName||H.name)}),s.jsx(f,{label:"Email",value:c(H.email)}),s.jsx(f,{label:"Phone",value:c(H.phone)}),s.jsx(f,{label:"Country",value:c(H.country)}),s.jsx(f,{label:"Start date",value:H.preferredStartDate?n()(H.preferredStartDate).format("MMM D, YYYY"):"—"}),s.jsx(f,{label:"People",value:c(H.numberOfPeople||H.peopleCount)}),s.jsx(f,{label:"Notes",value:c(H.additionalNotes||H.notes)})]})}):null,U&&E?s.jsx(v,{title:"Package / Program details",children:(0,s.jsxs)("div",{ref:q,className:"space-y-2",children:[s.jsx(f,{label:"Title",value:c(E.title||E.name)}),s.jsx(f,{label:"Duration",value:c(E.durationDays||E.duration)}),s.jsx(f,{label:"Price / person",value:c(E.pricePerPersonUSD||E.price||E.retreatPricePerPerson)}),s.jsx(f,{label:"Type",value:c(E.programType)})]})}):null,s.jsx(v,{title:"Receipt",action:s.jsx("button",{onClick:()=>W(!0),disabled:"cancelled"===M.status,className:`px-3 py-1.5 rounded-full border text-xs ${"cancelled"===M.status?"border-slate-700 text-slate-500 cursor-not-allowed":"border-slate-700 text-slate-100 hover:bg-slate-800"}`,children:"Download"}),children:s.jsx("div",{className:"sm:col-span-2 w-full",children:s.jsx(N,{payment:M,booking:H,product:E})})}),R&&H?s.jsx(v,{title:"Booking details",children:(0,s.jsxs)("div",{ref:K,className:"space-y-2",children:[s.jsx(f,{label:"Name",value:c(H.userName||H.name)}),s.jsx(f,{label:"Email",value:c(H.email)}),s.jsx(f,{label:"Phone",value:c(H.phone)}),s.jsx(f,{label:"Country",value:c(H.country)}),s.jsx(f,{label:"Start date",value:H.preferredStartDate?n()(H.preferredStartDate).format("MMM D, YYYY"):"—"}),s.jsx(f,{label:"People",value:c(H.numberOfPeople||H.peopleCount)}),s.jsx(f,{label:"Notes",value:c(H.additionalNotes||H.notes)})]})}):null,U&&E?s.jsx(v,{title:"Package / Program details",children:(0,s.jsxs)("div",{ref:q,className:"space-y-2",children:[s.jsx(f,{label:"Title",value:c(E.title||E.name)}),s.jsx(f,{label:"Duration",value:c(E.durationDays||E.duration)}),s.jsx(f,{label:"Price / person",value:c(E.pricePerPersonUSD||E.price||E.retreatPricePerPerson)}),s.jsx(f,{label:"Type",value:c(E.programType)})]})}):null,M.metadata&&Object.keys(M.metadata||{}).length?s.jsx(k,{metadata:M.metadata}):null,B&&s.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 flex items-center justify-center px-4",children:(0,s.jsxs)("div",{className:"w-full max-w-sm bg-slate-900 border border-slate-700 rounded-2xl p-5 space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-base font-semibold text-white",children:"Download options"}),s.jsx("button",{onClick:()=>W(!1),className:"text-slate-400 hover:text-white text-lg",children:"\xd7"})]}),s.jsx("p",{className:"text-sm text-slate-400",children:"Choose what you want to export."}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("button",{onClick:()=>ec("receipt"),className:"w-full px-4 py-2.5 rounded-xl bg-slate-800 hover:bg-slate-700 text-white text-sm font-semibold",children:"Download receipt only"}),s.jsx("button",{onClick:()=>ec("full"),className:"w-full px-4 py-2.5 rounded-xl border border-slate-600 text-white text-sm font-semibold hover:bg-slate-800",children:"Download full invoice (details)"})]})]})})]})})]})})]})}function b({label:e,value:t,accent:a}){return(0,s.jsxs)("div",{className:"rounded-xl border border-slate-800 bg-slate-900 px-4 py-3",children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:e}),s.jsx("p",{className:`text-xl font-semibold text-white ${a||""}`,children:t})]})}function f({label:e,value:t,mono:a,onClick:r}){return(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-[11px] text-slate-400",children:e}),r?s.jsx("button",{type:"button",onClick:r,className:`text-base text-left ${a?"font-mono break-all":"font-semibold"} text-slate-100 hover:text-teal-300`,children:t||"Not provided"}):s.jsx("p",{className:`text-base ${a?"font-mono break-all":"font-semibold"} text-slate-100`,children:t||"Not provided"})]})}function v({title:e,children:t,action:a}){return(0,s.jsxs)("div",{className:"space-y-3 border border-slate-800 rounded-xl p-4 bg-slate-900/70",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[s.jsx("h4",{className:"text-sm font-semibold text-slate-200",children:e}),a?s.jsx("div",{className:"shrink-0",children:a}):null]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:t})]})}function y({selected:e,booking:t,copyToClipboard:a}){let r=e.cancelledAt?n()(e.cancelledAt).format("MMM D, YYYY HH:mm"):null;return s.jsx("div",{className:"border border-slate-800 rounded-xl bg-slate-900/80 p-4 space-y-2",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:t?.userName||e.userName||"Customer"}),(0,s.jsxs)("p",{className:"text-3xl font-semibold text-white",children:["$",(e.amount||0).toFixed(2)]}),s.jsx("p",{className:"text-sm text-slate-400",children:e.createdAt?n()(e.createdAt).format("MMM D, YYYY HH:mm"):"—"}),r?(0,s.jsxs)("p",{className:"text-xs text-red-200",children:["Cancelled on ",r]}):null,(0,s.jsxs)("button",{type:"button",onClick:()=>a(e._id),className:"text-xs text-slate-500 hover:text-teal-300",title:"Copy payment ID",children:["Reference: ",e._id||"—"]})]}),(0,s.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[s.jsx("span",{className:`px-3 py-1 rounded-full text-[11px] ${d[e.status]||"bg-slate-800 text-slate-200"}`,children:e.status}),s.jsx("span",{className:`px-3 py-1 rounded-full text-[11px] ${"stripe"===e.gateway?"bg-emerald-900/60 text-emerald-200":"bg-slate-800 text-slate-200"}`,children:"stripe"===e.gateway?"Stripe":"Manual"})]})]})})}function j({selected:e,productData:t,onShowBooking:a,showBookingDetails:r,onShowProduct:l,showProductDetails:n}){let i=e?.bookingType==="retreat"?"View retreat program":e?.bookingType==="health"?"View package details":e?.bookingType==="health_program"?"View health program":e?.bookingType==="course"?"View course":"View product";return(0,s.jsxs)("div",{className:"flex flex-wrap gap-3 justify-center",children:[t&&!n&&s.jsx("button",{onClick:l,className:"px-4 py-2 rounded-full border border-slate-700 bg-slate-900 text-slate-100 hover:bg-slate-800 text-xs",children:i}),e.bookingId&&!r&&s.jsx("button",{onClick:a,className:"px-4 py-2 rounded-full border border-slate-700 bg-slate-900 text-slate-100 hover:bg-slate-800 text-xs",children:"View booking details"})]})}function w({selected:e,booking:t,bookingMissing:a}){return(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 border border-slate-800 rounded-xl bg-slate-900/70 p-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(f,{label:"Customer",value:c(t?.userName||e.userName)}),s.jsx(f,{label:"Email",value:c(t?.email||e.userEmail)}),s.jsx(f,{label:"Phone",value:c(t?.phone||e.userPhone)}),s.jsx(f,{label:"Country",value:c(t?.country||e.userCountry)})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(f,{label:"Payment method",value:"stripe"===e.gateway?"Stripe":"Manual"}),s.jsx(f,{label:"Type",value:p(e.bookingType)}),s.jsx(f,{label:"Booking ID",value:c(e.bookingId||(a?"record not found":"—"))}),s.jsx(f,{label:"Booking date",value:t?.preferredStartDate?n()(t.preferredStartDate).format("MMM D, YYYY"):"—"})]})]})}function N({payment:e,booking:t,product:a}){let{rows:r,subtotal:l}=x(e,t,a);return(0,s.jsxs)("div",{className:"space-y-5",children:[(0,s.jsxs)("div",{className:"overflow-hidden rounded-xl border border-slate-800 bg-slate-900/60",children:[(0,s.jsxs)("div",{className:"grid grid-cols-[1fr_5fr_2fr_2fr_2fr] gap-x-4 px-6 py-3 text-xs uppercase tracking-wide text-slate-300 font-semibold border-b border-slate-800",children:[s.jsx("span",{className:"text-left",children:"#"}),s.jsx("span",{className:"text-left",children:"Description"}),s.jsx("span",{className:"text-center",children:"People"}),s.jsx("span",{className:"text-right",children:"Unit price"}),s.jsx("span",{className:"text-right",children:"Line total"})]}),0===r.length?s.jsx("div",{className:"px-6 py-4 text-sm text-slate-300",children:"No breakdown available."}):r.map((e,t)=>(0,s.jsxs)("div",{className:"grid grid-cols-[1fr_5fr_2fr_2fr_2fr] gap-x-4 px-6 py-3 text-sm text-slate-100 border-b border-slate-800 last:border-b-0",style:{minHeight:48},children:[s.jsx("span",{className:"text-left font-mono text-slate-300",children:t+1}),(0,s.jsxs)("div",{className:"flex flex-col gap-0.5",children:[s.jsx("p",{className:"font-semibold leading-snug break-words",children:e.label}),e.sub?s.jsx("p",{className:"text-xs text-slate-400 leading-snug break-words",children:e.sub}):null]}),s.jsx("span",{className:"text-center font-mono",children:e.qty}),(0,s.jsxs)("span",{className:"text-right font-mono",children:["$",Number(e.unit||0).toFixed(2)]}),(0,s.jsxs)("span",{className:"text-right font-mono",children:["$",Number(e.total||0).toFixed(2)]})]},`${e.label}-${t}`))]}),(0,s.jsxs)("div",{className:"space-y-2 pt-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-slate-400",children:"Subtotal"}),(0,s.jsxs)("span",{className:"text-sm text-slate-100 font-mono",children:["$",Number(l||0).toFixed(2)]})]}),(0,s.jsxs)("div",{className:"border-t border-slate-800 pt-3 flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-slate-300",children:"Total paid"}),(0,s.jsxs)("span",{className:"text-lg font-semibold text-white font-mono",children:["$",(e?.amount||0).toFixed(2)]})]}),(0,s.jsxs)("p",{className:"text-xs italic text-slate-400 pt-1",children:["Amount in words: ",h(e?.amount||0)]})]})]})}function k({metadata:e}){let[t,a]=(0,r.useState)(!1);return(0,s.jsxs)("div",{className:"border border-slate-800 rounded-xl bg-slate-900/70",children:[(0,s.jsxs)("button",{type:"button",onClick:()=>a(e=>!e),className:"w-full flex items-center justify-between px-4 py-3 text-sm text-slate-200",children:[s.jsx("span",{children:"Technical metadata"}),s.jsx("span",{className:"text-slate-400 text-xs",children:t?"Hide":"Show"})]}),t&&s.jsx("div",{className:"px-4 pb-4",children:s.jsx("div",{className:"bg-slate-900 border border-slate-800 rounded-lg p-3 overflow-auto text-xs text-slate-100",children:s.jsx("pre",{children:JSON.stringify(e,null,2)})})})]})}},69339:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var s=a(10326),r=a(90434),l=a(35047),n=a(17577),i=a(60982),o=a(99731),d=a(8566),c=a(60531),u=a(69712),m=a(73891),p=a(93445),h=a(34899),x=a(14526),g=a(49634),b=a(55469);function f({children:e}){let t=(0,l.usePathname)();(0,l.useRouter)();let{user:a,loading:f,logout:v}=(0,b.a)(),[y,j]=(0,n.useState)({retreatBookings:0,healthPackages:0,healthPrograms:0,courses:0}),w=[{href:"/admin",label:"Dashboard",icon:i.Z},{href:"/admin/departments",label:"Departments",icon:o.Z},{href:"/admin/doctors",label:"Doctors",icon:d.Z},{label:"Appointments",icon:c.Z,children:[{href:"/admin/appointments",label:"General"},{href:"/admin/appointments/calendar",label:"Calendar"}]},{href:"/admin/blogs",label:"Blog Articles",icon:u.Z},{href:"/admin/reviews",label:"Patient Reviews",icon:u.Z},{href:"/admin/gallery",label:"Gallery",icon:m.Z},{href:"/admin/hero-images",label:"Hero Banner Images",icon:m.Z},{label:"Health Packages",icon:p.Z,countKey:"healthPackages",children:[{href:"/admin/packages",label:"Manage Packages"},{href:"/admin/package-bookings",label:"Package Bookings",countKey:"healthPackages"},{href:"/admin/package-bookings/calendar",label:"Calendar"},{href:"/admin/treatment-types",label:"Treatment Types"}]},{label:"Retreat Program",icon:h.Z,countKey:"retreatBookings",children:[{href:"/admin/retreat-programs",label:"Manage Programs"},{href:"/admin/retreat-destinations",label:"Retreat Destinations"},{href:"/admin/retreat-partner-hotels",label:"Partner Hotels"},{href:"/admin/retreat-bookings",label:"Retreat Bookings",countKey:"retreatBookings"}]},{label:"Health Programs",icon:p.Z,countKey:"healthPrograms",children:[{href:"/admin/health-programs",label:"Manage Programs"},{href:"/admin/health-program-bookings",label:"Health Program Bookings",countKey:"healthPrograms"}]},{label:"Courses",icon:o.Z,countKey:"courses",children:[{href:"/admin/courses",label:"Manage Courses"},{href:"/admin/course-categories",label:"Course Categories"},{href:"/admin/course-bookings",label:"Course Bookings",countKey:"courses"}]},{href:"/admin/billing",label:"Billing",icon:x.Z}],N="/admin/login"===t,[k,P]=(0,n.useState)(()=>{let e={};return w.forEach(a=>{a.children&&(e[a.label]=a.children.some(e=>t.startsWith(e.href)))}),e});if(!N&&(f||!a&&!f))return s.jsx("div",{className:"p-6",children:"Loading admin..."});if(N)return e;let $=e=>t===e?"bg-teal-600 text-white":"text-slate-300 hover:bg-slate-800",D=e=>e?s.jsx("span",{className:"absolute -top-2 -right-2 min-w-[20px] px-1.5 h-5 rounded-full bg-rose-600 text-white text-[10px] font-semibold flex items-center justify-center shadow-lg transition-opacity",children:e>99?"99+":e}):null;return(0,s.jsxs)("div",{className:"min-h-screen bg-slate-950 text-slate-100 flex",children:[(0,s.jsxs)("aside",{className:"hidden md:flex md:flex-col w-64 bg-slate-900 border-r border-slate-800",children:[s.jsx("div",{className:"h-16 flex items-center px-6 border-b border-slate-800",children:(0,s.jsxs)(r.default,{href:"/admin",className:"flex items-center gap-2",children:[s.jsx("img",{src:"/images/logo.png",alt:"Logo",className:"h-9 w-9 rounded-md object-cover"}),(0,s.jsxs)("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-sm font-semibold tracking-tight",children:"Admin Panel"}),s.jsx("span",{className:"text-xs text-slate-400",children:"Annapurna Nature Cure"})]})]})}),s.jsx("nav",{className:"flex-1 px-3 py-4 space-y-1 overflow-y-auto",children:w.map(e=>{let t=e.icon;if(e.children){let a=k[e.label];return(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("button",{type:"button",onClick:()=>{var t;return t=e.label,void P(e=>({...e,[t]:!e[t]}))},className:`relative w-full flex items-center justify-between gap-3 px-3 py-2 rounded-lg text-sm transition ${a?"bg-slate-800 text-white":"text-slate-300 hover:bg-slate-800"}`,children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[s.jsx(t,{className:"h-5 w-5"}),(0,s.jsxs)("span",{className:"relative inline-block",children:[e.label,D(e.countKey?y[e.countKey]:0)]})]}),s.jsx("span",{className:"text-xs text-slate-400",children:a?"−":"+"})]}),a&&s.jsx("div",{className:"pl-9 space-y-1",children:e.children.map(e=>s.jsx(r.default,{href:e.href,className:`relative flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition ${$(e.href)}`,children:(0,s.jsxs)("span",{className:"relative inline-block",children:[e.label,D(e.countKey?y[e.countKey]:0)]})},e.href))})]},e.label)}return(0,s.jsxs)(r.default,{href:e.href,className:`relative flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition ${$(e.href)}`,children:[s.jsx(t,{className:"h-5 w-5"}),(0,s.jsxs)("span",{className:"relative inline-block",children:[e.label,D(e.countKey?y[e.countKey]:0)]})]},e.href)})}),s.jsx("div",{className:"border-t border-slate-800 p-4",children:(0,s.jsxs)("button",{type:"button",onClick:v,className:"w-full inline-flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm bg-slate-800 hover:bg-slate-700 text-slate-200",children:[s.jsx(g.Z,{className:"h-5 w-5"}),s.jsx("span",{children:"Logout"})]})})]}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,s.jsxs)("header",{className:"h-16 flex items-center justify-between px-4 md:px-6 border-b border-slate-800 bg-slate-900/80 backdrop-blur",children:[(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Admin dashboard"}),s.jsx("h1",{className:"text-sm md:text-base font-semibold text-slate-50",children:function(){for(let e of w){if(e.href&&t.startsWith(e.href))return e.label;if(e.children){for(let a of e.children)if(t.startsWith(a.href))return a.label}}return"Overview"}()})]}),s.jsx("div",{className:"text-xs text-slate-300",children:a?.email?`Logged in as ${a.email}`:""})]}),s.jsx("main",{className:"flex-1 overflow-y-auto bg-slate-950",children:s.jsx("div",{className:"max-w-6xl mx-auto px-4 md:px-6 py-6 md:py-8",children:e})})]})]})}a(89420)},88295:function(e){var t;t=function(){"use strict";var e="millisecond",t="second",a="minute",s="hour",r="week",l="month",n="quarter",i="year",o="date",d="Invalid Date",c=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,u=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m=function(e,t,a){var s=String(e);return!s||s.length>=t?e:""+Array(t+1-s.length).join(a)+e},p="en",h={};h[p]={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],a=e%100;return"["+e+(t[(a-20)%10]||t[a]||"th")+"]"}};var x="$isDayjsObject",g=function(e){return e instanceof y||!(!e||!e[x])},b=function e(t,a,s){var r;if(!t)return p;if("string"==typeof t){var l=t.toLowerCase();h[l]&&(r=l),a&&(h[l]=a,r=l);var n=t.split("-");if(!r&&n.length>1)return e(n[0])}else{var i=t.name;h[i]=t,r=i}return!s&&r&&(p=r),r||!s&&p},f=function(e,t){if(g(e))return e.clone();var a="object"==typeof t?t:{};return a.date=e,a.args=arguments,new y(a)},v={s:m,z:function(e){var t=-e.utcOffset(),a=Math.abs(t);return(t<=0?"+":"-")+m(Math.floor(a/60),2,"0")+":"+m(a%60,2,"0")},m:function e(t,a){if(t.date()<a.date())return-e(a,t);var s=12*(a.year()-t.year())+(a.month()-t.month()),r=t.clone().add(s,l),n=a-r<0,i=t.clone().add(s+(n?-1:1),l);return+(-(s+(a-r)/(n?r-i:i-r))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(d){return({M:l,y:i,w:r,d:"day",D:o,h:s,m:a,s:t,ms:e,Q:n})[d]||String(d||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}};v.l=b,v.i=g,v.w=function(e,t){return f(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var y=function(){function m(e){this.$L=b(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[x]=!0}var p=m.prototype;return p.parse=function(e){this.$d=function(e){var t=e.date,a=e.utc;if(null===t)return new Date(NaN);if(v.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var s=t.match(c);if(s){var r=s[2]-1||0,l=(s[7]||"0").substring(0,3);return a?new Date(Date.UTC(s[1],r,s[3]||1,s[4]||0,s[5]||0,s[6]||0,l)):new Date(s[1],r,s[3]||1,s[4]||0,s[5]||0,s[6]||0,l)}}return new Date(t)}(e),this.init()},p.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},p.$utils=function(){return v},p.isValid=function(){return this.$d.toString()!==d},p.isSame=function(e,t){var a=f(e);return this.startOf(t)<=a&&a<=this.endOf(t)},p.isAfter=function(e,t){return f(e)<this.startOf(t)},p.isBefore=function(e,t){return this.endOf(t)<f(e)},p.$g=function(e,t,a){return v.u(e)?this[t]:this.set(a,e)},p.unix=function(){return Math.floor(this.valueOf()/1e3)},p.valueOf=function(){return this.$d.getTime()},p.startOf=function(e,n){var d=this,c=!!v.u(n)||n,u=v.p(e),m=function(e,t){var a=v.w(d.$u?Date.UTC(d.$y,t,e):new Date(d.$y,t,e),d);return c?a:a.endOf("day")},p=function(e,t){return v.w(d.toDate()[e].apply(d.toDate("s"),(c?[0,0,0,0]:[23,59,59,999]).slice(t)),d)},h=this.$W,x=this.$M,g=this.$D,b="set"+(this.$u?"UTC":"");switch(u){case i:return c?m(1,0):m(31,11);case l:return c?m(1,x):m(0,x+1);case r:var f=this.$locale().weekStart||0,y=(h<f?h+7:h)-f;return m(c?g-y:g+(6-y),x);case"day":case o:return p(b+"Hours",0);case s:return p(b+"Minutes",1);case a:return p(b+"Seconds",2);case t:return p(b+"Milliseconds",3);default:return this.clone()}},p.endOf=function(e){return this.startOf(e,!1)},p.$set=function(r,n){var d,c=v.p(r),u="set"+(this.$u?"UTC":""),m=((d={}).day=u+"Date",d[o]=u+"Date",d[l]=u+"Month",d[i]=u+"FullYear",d[s]=u+"Hours",d[a]=u+"Minutes",d[t]=u+"Seconds",d[e]=u+"Milliseconds",d)[c],p="day"===c?this.$D+(n-this.$W):n;if(c===l||c===i){var h=this.clone().set(o,1);h.$d[m](p),h.init(),this.$d=h.set(o,Math.min(this.$D,h.daysInMonth())).$d}else m&&this.$d[m](p);return this.init(),this},p.set=function(e,t){return this.clone().$set(e,t)},p.get=function(e){return this[v.p(e)]()},p.add=function(e,n){var o,d=this;e=Number(e);var c=v.p(n),u=function(t){var a=f(d);return v.w(a.date(a.date()+Math.round(t*e)),d)};if(c===l)return this.set(l,this.$M+e);if(c===i)return this.set(i,this.$y+e);if("day"===c)return u(1);if(c===r)return u(7);var m=((o={})[a]=6e4,o[s]=36e5,o[t]=1e3,o)[c]||1,p=this.$d.getTime()+e*m;return v.w(p,this)},p.subtract=function(e,t){return this.add(-1*e,t)},p.format=function(e){var t=this,a=this.$locale();if(!this.isValid())return a.invalidDate||d;var s=e||"YYYY-MM-DDTHH:mm:ssZ",r=v.z(this),l=this.$H,n=this.$m,i=this.$M,o=a.weekdays,c=a.months,m=a.meridiem,p=function(e,a,r,l){return e&&(e[a]||e(t,s))||r[a].slice(0,l)},h=function(e){return v.s(l%12||12,e,"0")},x=m||function(e,t,a){var s=e<12?"AM":"PM";return a?s.toLowerCase():s};return s.replace(u,function(e,s){return s||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return v.s(t.$y,4,"0");case"M":return i+1;case"MM":return v.s(i+1,2,"0");case"MMM":return p(a.monthsShort,i,c,3);case"MMMM":return p(c,i);case"D":return t.$D;case"DD":return v.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return p(a.weekdaysMin,t.$W,o,2);case"ddd":return p(a.weekdaysShort,t.$W,o,3);case"dddd":return o[t.$W];case"H":return String(l);case"HH":return v.s(l,2,"0");case"h":return h(1);case"hh":return h(2);case"a":return x(l,n,!0);case"A":return x(l,n,!1);case"m":return String(n);case"mm":return v.s(n,2,"0");case"s":return String(t.$s);case"ss":return v.s(t.$s,2,"0");case"SSS":return v.s(t.$ms,3,"0");case"Z":return r}return null}(e)||r.replace(":","")})},p.utcOffset=function(){return-(15*Math.round(this.$d.getTimezoneOffset()/15))},p.diff=function(e,o,d){var c,u=this,m=v.p(o),p=f(e),h=(p.utcOffset()-this.utcOffset())*6e4,x=this-p,g=function(){return v.m(u,p)};switch(m){case i:c=g()/12;break;case l:c=g();break;case n:c=g()/3;break;case r:c=(x-h)/6048e5;break;case"day":c=(x-h)/864e5;break;case s:c=x/36e5;break;case a:c=x/6e4;break;case t:c=x/1e3;break;default:c=x}return d?c:v.a(c)},p.daysInMonth=function(){return this.endOf(l).$D},p.$locale=function(){return h[this.$L]},p.locale=function(e,t){if(!e)return this.$L;var a=this.clone(),s=b(e,t,!0);return s&&(a.$L=s),a},p.clone=function(){return v.w(this.$d,this)},p.toDate=function(){return new Date(this.valueOf())},p.toJSON=function(){return this.isValid()?this.toISOString():null},p.toISOString=function(){return this.$d.toISOString()},p.toString=function(){return this.$d.toUTCString()},m}(),j=y.prototype;return f.prototype=j,[["$ms",e],["$s",t],["$m",a],["$H",s],["$W","day"],["$M",l],["$y",i],["$D",o]].forEach(function(e){j[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),f.extend=function(e,t){return e.$i||(e(t,y,f),e.$i=!0),f},f.locale=b,f.isDayjs=g,f.unix=function(e){return f(1e3*e)},f.en=h[p],f.Ls=h,f.p={},f},e.exports=t()},3248:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(68570).createProxy)(String.raw`/Users/bibekaryal/Downloads/AnnapurnaHostipal-Nakhu/frontend/app/admin/billing/page.js#default`)},5986:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(68570).createProxy)(String.raw`/Users/bibekaryal/Downloads/AnnapurnaHostipal-Nakhu/frontend/app/admin/layout.js#default`)},49634:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a(17577);let r=s.forwardRef(function({title:e,titleId:t,...a},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))})},60531:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a(17577);let r=s.forwardRef(function({title:e,titleId:t,...a},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z"}))})},93445:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a(17577);let r=s.forwardRef(function({title:e,titleId:t,...a},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"}))})},14526:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a(17577);let r=s.forwardRef(function({title:e,titleId:t,...a},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))})},34899:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a(17577);let r=s.forwardRef(function({title:e,titleId:t,...a},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m6.115 5.19.319 1.913A6 6 0 0 0 8.11 10.36L9.75 12l-.387.775c-.217.433-.132.956.21 1.298l1.348 1.348c.21.21.329.497.329.795v1.089c0 .426.24.815.622 1.006l.153.076c.433.217.956.132 1.298-.21l.723-.723a8.7 8.7 0 0 0 2.288-4.042 1.087 1.087 0 0 0-.358-1.099l-1.33-1.108c-.251-.21-.582-.299-.905-.245l-1.17.195a1.125 1.125 0 0 1-.98-.314l-.295-.295a1.125 1.125 0 0 1 0-1.591l.13-.132a1.125 1.125 0 0 1 1.3-.21l.603.302a.809.809 0 0 0 1.086-1.086L14.25 7.5l1.256-.837a4.5 4.5 0 0 0 1.528-1.732l.146-.292M6.115 5.19A9 9 0 1 0 17.18 4.64M6.115 5.19A8.965 8.965 0 0 1 12 3c1.929 0 3.716.607 5.18 1.64"}))})},60982:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a(17577);let r=s.forwardRef(function({title:e,titleId:t,...a},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))})},69712:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a(17577);let r=s.forwardRef(function({title:e,titleId:t,...a},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 7.5h1.5m-1.5 3h1.5m-7.5 3h7.5m-7.5 3h7.5m3-9h3.375c.621 0 1.125.504 1.125 1.125V18a2.25 2.25 0 0 1-2.25 2.25M16.5 7.5V18a2.25 2.25 0 0 0 2.25 2.25M16.5 7.5V4.875c0-.621-.504-1.125-1.125-1.125H4.125C3.504 3.75 3 4.254 3 4.875V18a2.25 2.25 0 0 0 2.25 2.25h13.5M6 7.5h3v3H6v-3Z"}))})},73891:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a(17577);let r=s.forwardRef(function({title:e,titleId:t,...a},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))})},99731:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a(17577);let r=s.forwardRef(function({title:e,titleId:t,...a},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z"}))})},8566:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a(17577);let r=s.forwardRef(function({title:e,titleId:t,...a},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))})}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[8948,829,9143],()=>a(527));module.exports=s})();