(()=>{var e={};e.id=56,e.ids=[56],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1593:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d}),a(2757),a(5986),a(49328),a(20784),a(89204),a(35866);var l=a(23191),s=a(88716),r=a(37922),n=a.n(r),i=a(95231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);a.d(t,o);let d=["",{children:["admin",{children:["gallery",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,2757)),"/Users/bibekaryal/Downloads/AnnapurnaHostipal-Nakhu/frontend/app/admin/gallery/page.js"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,5986)),"/Users/bibekaryal/Downloads/AnnapurnaHostipal-Nakhu/frontend/app/admin/layout.js"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,49328)),"/Users/bibekaryal/Downloads/AnnapurnaHostipal-Nakhu/frontend/app/layout.js"],error:[()=>Promise.resolve().then(a.bind(a,20784)),"/Users/bibekaryal/Downloads/AnnapurnaHostipal-Nakhu/frontend/app/error.js"],loading:[()=>Promise.resolve().then(a.bind(a,89204)),"/Users/bibekaryal/Downloads/AnnapurnaHostipal-Nakhu/frontend/app/loading.js"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/bibekaryal/Downloads/AnnapurnaHostipal-Nakhu/frontend/app/admin/gallery/page.js"],u="/admin/gallery/page",p={require:a,loadChunk:()=>Promise.resolve()},m=new l.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/admin/gallery/page",pathname:"/admin/gallery",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},39172:(e,t,a)=>{Promise.resolve().then(a.bind(a,79622))},79622:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>g});var l=a(10326),s=a(17577),r=a(82362),n=a(43346),i=a(89420),o=a(68648),d=a(97857),c=a(8114),u=a(68592),p=a(27411),m=a(14991);function x({item:e,onDelete:t,onEdit:a,onToggle:s,toggleDisabled:n=!1}){let i=e.images?.length?{type:"image",src:e.images[0]}:e.videos?.length?{type:"video",src:e.videos[0]}:e.youtubeLinks?.length?{type:"youtube",src:e.youtubeLinks[0]}:null,o=e.images?.length||0,x=e.videos?.length||0,g=e.youtubeLinks?.length||0;return(0,l.jsxs)("div",{className:"relative rounded-2xl border border-white/10 bg-[#11151c] overflow-hidden hover:border-teal-600/40 transition shadow-sm flex flex-col",children:[(0,l.jsxs)("div",{className:"aspect-square bg-slate-900",children:[i?.type==="image"&&l.jsx("img",{src:i.src,alt:e.title,className:"h-full w-full object-cover",loading:"lazy"}),i?.type==="video"&&l.jsx("video",{src:i.src,className:"h-full w-full object-cover",muted:!0,loop:!0}),i?.type==="youtube"&&l.jsx("iframe",{src:i.src,className:"h-full w-full",title:e.title,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),!i&&l.jsx("div",{className:"h-full w-full bg-slate-800"})]}),(0,l.jsxs)("div",{className:"p-3 space-y-2 flex-1",children:[l.jsx("p",{className:"text-white font-semibold line-clamp-2",children:e.title}),l.jsx("p",{className:"text-xs text-slate-400 line-clamp-2",children:e.description}),(0,l.jsxs)("div",{className:"flex items-center gap-3 text-xs text-slate-400",children:[(0,l.jsxs)("span",{className:"flex items-center gap-1",children:[l.jsx(r.Z,{className:"h-4 w-4 text-teal-300"})," ",o," photos"]}),(0,l.jsxs)("span",{className:"flex items-center gap-1",children:[l.jsx(d.Z,{className:"h-4 w-4 text-teal-300"})," ",x," videos"]}),(0,l.jsxs)("span",{className:"flex items-center gap-1",children:[l.jsx(c.Z,{className:"h-4 w-4 text-teal-300"})," ",g," YouTube"]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between text-[11px] text-slate-500",children:[l.jsx("p",{children:e.createdAt?new Date(e.createdAt).toLocaleDateString():""}),s&&l.jsx(m.W,{status:e.isPublished?"published":"draft",onToggle:s,disabled:n})]})]}),(0,l.jsxs)("div",{className:"absolute inset-0 bg-black/40 opacity-0 hover:opacity-100 transition flex items-start justify-end p-2 gap-2",children:[l.jsx("button",{onClick:()=>a?.(e),className:"p-2 rounded-md bg-slate-900/80 hover:bg-teal-700 transition",title:"Edit",children:l.jsx(u.Z,{className:"h-5 w-5 text-teal-300"})}),l.jsx("button",{onClick:()=>t?.(e._id),className:"p-2 rounded-md bg-slate-900/80 hover:bg-rose-700 transition",title:"Delete",children:l.jsx(p.Z,{className:"h-5 w-5 text-rose-300"})})]})]})}function g(){let[e,t]=(0,s.useState)([]),[a,d]=(0,s.useState)(!0),[c,u]=(0,s.useState)(""),[p,m]=(0,s.useState)(!1),[g,h]=(0,s.useState)(null),[b,f]=(0,s.useState)(null);async function v(){d(!0),u("");try{let e=await (0,i.R1)("/gallery"),a=e?.data||e||[];t(a)}catch(e){u("Failed to load gallery")}d(!1)}async function y(e){f(e._id);try{let a=await (0,i.pE)(`/gallery/${e._id}`,{isPublished:!e.isPublished}),l=a?.data||a;t(t=>t.map(t=>t._id===e._id?{...t,...l}:t))}catch(e){alert(e.message||"Failed to update publish status")}finally{f(null)}}async function j(e){if(confirm("Delete this gallery item?"))try{await (0,i.QW)(`/gallery/${e}`),t(t=>t.filter(t=>t._id!==e))}catch(e){alert(e.message||"Delete failed")}}return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("h1",{className:"text-2xl text-white font-semibold flex items-center gap-2",children:[l.jsx(r.Z,{className:"h-7 w-7 text-teal-400"}),"Manage Gallery"]}),(0,l.jsxs)("button",{onClick:()=>{h(null),m(!0)},className:"flex items-center gap-2 bg-teal-600 hover:bg-teal-500 text-white px-5 py-2 rounded-lg transition",children:[l.jsx(n.Z,{className:"h-5 w-5"}),"Add Gallery Item"]})]}),c&&l.jsx("div",{className:"rounded-lg border border-rose-500/40 bg-rose-900/20 text-rose-200 px-4 py-3 text-sm",children:c}),a&&l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:Array.from({length:8}).map((e,t)=>l.jsx("div",{className:"h-40 bg-slate-800 rounded-xl animate-pulse"},t))}),!a&&0===e.length&&(0,l.jsxs)("div",{className:"text-center py-20 text-gray-400",children:[l.jsx(r.Z,{className:"h-16 w-16 text-gray-600 mx-auto mb-4"}),l.jsx("p",{children:"No images found."}),l.jsx("button",{onClick:()=>m(!0),className:"inline-block mt-4 bg-teal-600 hover:bg-teal-500 text-white px-5 py-2 rounded-lg transition",children:"Add First Image"})]}),!a&&e.length>0&&l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:e.map(e=>l.jsx(x,{item:e,onDelete:j,onEdit:e=>{h(e),m(!0)},onToggle:()=>y(e),toggleDisabled:b===e._id},e._id))}),l.jsx(o.Z,{open:p,onClose:()=>m(!1),onSaved:()=>{m(!1),v()},initialData:g})]})}},14991:(e,t,a)=>{"use strict";a.d(t,{W:()=>r,t:()=>s});var l=a(10326);function s({status:e}){let t="published"===e;return l.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-[11px] font-semibold ${t?"bg-emerald-600/20 text-emerald-200 border border-emerald-500/40":"bg-slate-700/60 text-slate-200 border border-slate-600"}`,children:t?"Published":"Draft"})}function r({status:e,onToggle:t,disabled:a}){let s="published"===e;return l.jsx("button",{type:"button",onClick:t,disabled:a,className:`relative inline-flex h-7 w-12 items-center rounded-full border ${s?"bg-emerald-600/30 border-emerald-400":"bg-slate-700 border-slate-500"} transition disabled:opacity-60`,"aria-label":"Toggle publish",children:l.jsx("span",{className:`absolute left-1 h-5 w-5 rounded-full bg-white transition-transform ${s?"translate-x-5":"translate-x-0"}`})})}},2757:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});let l=(0,a(68570).createProxy)(String.raw`/Users/bibekaryal/Downloads/AnnapurnaHostipal-Nakhu/frontend/app/admin/gallery/page.js#default`)},68592:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var l=a(17577);let s=l.forwardRef(function({title:e,titleId:t,...a},s){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},a),e?l.createElement("title",{id:t},e):null,l.createElement("path",{d:"M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-8.4 8.4a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32l8.4-8.4Z"}),l.createElement("path",{d:"M5.25 5.25a3 3 0 0 0-3 3v10.5a3 3 0 0 0 3 3h10.5a3 3 0 0 0 3-3V13.5a.75.75 0 0 0-1.5 0v5.25a1.5 1.5 0 0 1-1.5 1.5H5.25a1.5 1.5 0 0 1-1.5-1.5V8.25a1.5 1.5 0 0 1 1.5-1.5h5.25a.75.75 0 0 0 0-1.5H5.25Z"}))})},43346:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var l=a(17577);let s=l.forwardRef(function({title:e,titleId:t,...a},s){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},a),e?l.createElement("title",{id:t},e):null,l.createElement("path",{fillRule:"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"}))})},27411:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var l=a(17577);let s=l.forwardRef(function({title:e,titleId:t,...a},s){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},a),e?l.createElement("title",{id:t},e):null,l.createElement("path",{fillRule:"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z",clipRule:"evenodd"}))})}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),l=t.X(0,[8948,829,9143,4938],()=>a(1593));module.exports=l})();