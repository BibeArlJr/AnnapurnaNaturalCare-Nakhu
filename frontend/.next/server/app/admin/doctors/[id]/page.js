(()=>{var e={};e.id=7211,e.ids=[7211],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},41367:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>o}),s(35185),s(5986),s(49328),s(20784),s(89204),s(35866);var t=s(23191),l=s(88716),r=s(37922),i=s.n(r),n=s(95231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);s.d(a,d);let o=["",{children:["admin",{children:["doctors",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,35185)),"/Users/bibekaryal/Downloads/AnnapurnaHostipal-Nakhu/frontend/app/admin/doctors/[id]/page.js"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,5986)),"/Users/bibekaryal/Downloads/AnnapurnaHostipal-Nakhu/frontend/app/admin/layout.js"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,49328)),"/Users/bibekaryal/Downloads/AnnapurnaHostipal-Nakhu/frontend/app/layout.js"],error:[()=>Promise.resolve().then(s.bind(s,20784)),"/Users/bibekaryal/Downloads/AnnapurnaHostipal-Nakhu/frontend/app/error.js"],loading:[()=>Promise.resolve().then(s.bind(s,89204)),"/Users/bibekaryal/Downloads/AnnapurnaHostipal-Nakhu/frontend/app/loading.js"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/bibekaryal/Downloads/AnnapurnaHostipal-Nakhu/frontend/app/admin/doctors/[id]/page.js"],x="/admin/doctors/[id]/page",p={require:s,loadChunk:()=>Promise.resolve()},m=new t.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/admin/doctors/[id]/page",pathname:"/admin/doctors/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},39603:(e,a,s)=>{Promise.resolve().then(s.bind(s,88228))},88228:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>m});var t=s(10326),l=s(17577),r=s(35047),i=s(35271),n=s(28818),d=s(86457),o=s(33265),c=s(89420);s(24221);let x=(0,o.default)(async()=>{},{loadableGenerated:{modules:["app/admin/doctors/[id]/page.js -> react-quill"]},ssr:!1}),p="w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-teal-500";function m({params:e}){let a=(0,r.useRouter)(),s=(0,l.useRef)(null);(0,l.useRef)(null);let[o,m]=(0,l.useState)([]),[b,f]=(0,l.useState)(!0),[j,v]=(0,l.useState)(""),[N,y]=(0,l.useState)(!1),[w,k]=(0,l.useState)(""),[D,P]=(0,l.useState)(""),[U,C]=(0,l.useState)(""),[S,A]=(0,l.useState)(""),[R,_]=(0,l.useState)(""),[I,q]=(0,l.useState)(""),[G,M]=(0,l.useState)({name:"",email:"",phone:"",departmentId:"",experience:"",degree:"",description:"",photo:"",galleryImages:[],videoUrl:"",medicalQualifications:[]});function Q(e){let{name:a,value:s}=e.target;M(e=>({...e,[a]:s}))}function E(e){if(!e)return;let a=new FileReader;a.onloadend=()=>{C(a.result.toString()),k(a.result.toString()),P(e.name)},a.readAsDataURL(e)}function H(e,a,s){M(t=>{let l=[...t.medicalQualifications||[]];return l[e]={...l[e],[a]:s},{...t,medicalQualifications:l}})}async function B(s){if(s.preventDefault(),G.name&&G.departmentId){y(!0);try{let s=Array.isArray(G.galleryImages)?G.galleryImages:[],t=s.filter(e=>e&&!e.startsWith("data:")),l=s.filter(e=>e&&e.startsWith("data:")),r={...G,experience:G.experience,degree:G.degree,imageData:U||void 0,bio:G.description,galleryImages:t,galleryImageData:l,videoUrl:G.videoUrl?.trim(),videoData:R||void 0,medicalQualifications:(G.medicalQualifications||[]).filter(e=>e&&e.degree)};await (0,c.pE)(`/doctors/${e.id}`,r),a.push("/admin/doctors")}catch(e){v(e.message||"Failed to update doctor")}finally{y(!1)}}}return t.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 px-4",children:(0,t.jsxs)("div",{className:"relative w-full max-w-4xl max-h-[90vh] bg-[#0f131a] border border-white/10 rounded-2xl shadow-2xl flex flex-col overflow-hidden",children:[t.jsx("button",{onClick:()=>a.push("/admin/doctors"),className:"absolute top-4 right-4 text-gray-300 hover:text-white bg-slate-700/40 hover:bg-slate-700 rounded-full p-2 transition",children:"âœ•"}),(0,t.jsxs)("div",{className:"px-6 pt-6 pb-3 border-b border-slate-800",children:[t.jsx("h2",{className:"text-xl font-semibold text-white",children:"Edit Doctor"}),t.jsx("p",{className:"text-sm text-slate-400",children:"Update doctor profile, department, and photo."})]}),(0,t.jsxs)("form",{onSubmit:B,className:"flex-1 overflow-y-auto px-6 pb-6 pt-4 space-y-6",children:[j&&t.jsx("div",{className:"rounded-lg border border-rose-500/40 bg-rose-900/20 text-rose-200 px-4 py-3 text-sm",children:j}),b?(0,t.jsxs)("div",{className:"animate-pulse space-y-4",children:[t.jsx("div",{className:"h-10 bg-slate-800 rounded-lg"}),t.jsx("div",{className:"h-24 bg-slate-800 rounded-lg"}),t.jsx("div",{className:"h-32 bg-slate-800 rounded-lg"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Info"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[t.jsx("label",{className:"text-sm text-slate-300",children:"Name"}),t.jsx("input",{name:"name",required:!0,value:G.name,onChange:Q,className:p,placeholder:"Dr. Jane Doe"})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[t.jsx("label",{className:"text-sm text-slate-300",children:"Department"}),t.jsx(i.Ri,{value:G.departmentId,onChange:e=>M(a=>({...a,departmentId:e})),children:(0,t.jsxs)("div",{className:"relative mt-1",children:[(0,t.jsxs)(i.Ri.Button,{className:"relative w-full cursor-pointer rounded-xl bg-slate-800 border border-slate-700 px-4 py-3 pr-10 text-left text-white focus:outline-none focus:ring-2 focus:ring-teal-500",children:[t.jsx("span",{children:o.find(e=>e._id===G.departmentId)?.name||"Select department"}),t.jsx("span",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:t.jsx(n.Z,{className:"h-5 w-5 text-gray-400"})})]}),(0,t.jsxs)(i.Ri.Options,{className:"absolute mt-2 max-h-60 w-full overflow-auto rounded-xl bg-slate-900 shadow-xl border border-slate-700 text-white focus:outline-none z-30",children:[o.map(e=>t.jsx(i.Ri.Option,{value:e._id,className:({active:e})=>`cursor-pointer select-none px-4 py-2 ${e?"bg-teal-700/70 text-white":"text-gray-200"}`,children:({selected:a})=>(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:a?"font-semibold":"",children:e.name}),a&&t.jsx(d.Z,{className:"h-5 w-5 text-teal-300"})]})},e._id)),0===o.length&&t.jsx("div",{className:"px-4 py-2 text-sm text-slate-400",children:"No departments"})]})]})})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[t.jsx("label",{className:"text-sm text-slate-300",children:"Email"}),t.jsx("input",{name:"email",type:"email",value:G.email,onChange:Q,className:p,placeholder:"doctor@example.com"})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[t.jsx("label",{className:"text-sm text-slate-300",children:"Phone"}),t.jsx("input",{name:"phone",value:G.phone,onChange:Q,className:p,placeholder:"+977-98xxxxxxx"})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[t.jsx("label",{className:"text-sm text-slate-300",children:"Experience (years)"}),t.jsx("input",{name:"experience",value:G.experience,onChange:Q,className:p,placeholder:"10"})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[t.jsx("label",{className:"text-sm text-slate-300",children:"Degree"}),t.jsx("input",{name:"degree",value:G.degree,onChange:Q,className:p,placeholder:"e.g., MD, MBBS"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm text-slate-300",children:"About / Description"}),t.jsx(x,{theme:"snow",value:G.description,onChange:e=>M(a=>({...a,description:e})),placeholder:"Add rich details about the doctor",modules:{toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["link"],["clean"]]}})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[t.jsx("p",{className:"text-sm text-slate-300",children:"Medical Qualifications"}),t.jsx("button",{type:"button",onClick:function(){M(e=>({...e,medicalQualifications:[...e.medicalQualifications||[],{degree:"",institution:"",year:""}]}))},className:"px-3 py-1 text-xs rounded bg-slate-800 border border-slate-700 text-white hover:bg-slate-700 transition",children:"Add"})]}),t.jsx("div",{className:"space-y-3",children:(G.medicalQualifications||[]).map((e,a)=>(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 items-start",children:[(0,t.jsxs)("div",{className:"flex flex-col",children:[t.jsx("label",{className:"text-xs text-slate-400",children:"Degree (required)"}),t.jsx("input",{className:p,value:e.degree,onChange:e=>H(a,"degree",e.target.value),placeholder:"e.g., MD, MBBS",required:!0})]}),(0,t.jsxs)("div",{className:"flex flex-col",children:[t.jsx("label",{className:"text-xs text-slate-400",children:"Institution"}),t.jsx("input",{className:p,value:e.institution||"",onChange:e=>H(a,"institution",e.target.value),placeholder:"e.g., Johns Hopkins"})]}),(0,t.jsxs)("div",{className:"flex flex-col",children:[t.jsx("label",{className:"text-xs text-slate-400",children:"Year"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[t.jsx("input",{className:p,value:e.year||"",onChange:e=>H(a,"year",e.target.value),placeholder:"e.g., 2015"}),t.jsx("button",{type:"button",onClick:()=>{M(e=>({...e,medicalQualifications:(e.medicalQualifications||[]).filter((e,s)=>s!==a)}))},className:"px-3 py-2 text-xs rounded bg-rose-500/20 text-rose-200 hover:bg-rose-500/30 border border-rose-500/30 transition",children:"Remove"})]})]})]},a))})]}),(0,t.jsxs)("div",{className:"space-y-3 rounded-2xl border border-slate-800 bg-slate-900/60 p-4",children:[t.jsx("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm font-semibold text-white",children:"Media"}),t.jsx("p",{className:"text-xs text-slate-400",children:"Styled to match the patient review uploader."})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)(u,{title:"Profile photo",helper:"Drop or click to upload the main headshot.",children:[(0,t.jsxs)("div",{className:"border-2 border-dashed border-slate-700 bg-slate-900/60 rounded-xl p-4 flex flex-col gap-3 items-center justify-center text-slate-300 cursor-pointer hover:border-teal-500 transition",onDragOver:e=>e.preventDefault(),onDrop:function(e){e.preventDefault();let a=e.dataTransfer.files?.[0];a&&E(a)},onClick:()=>s.current?.click(),children:[t.jsx("input",{type:"file",accept:"image/*",ref:s,className:"hidden",onChange:function(e){let a=e.target.files?.[0];a&&E(a)}}),(0,t.jsxs)("div",{className:"text-center space-y-1",children:[t.jsx("p",{className:"font-medium",children:"Drop an image here or click to upload"}),t.jsx("p",{className:"text-xs text-slate-500",children:"Recommended: square, under 5MB. JPG or PNG."})]}),D&&(0,t.jsxs)("p",{className:"text-xs text-teal-300",children:["Selected: ",D]})]}),w&&(0,t.jsxs)("div",{className:"w-full grid grid-cols-1 md:grid-cols-[140px_1fr] gap-3 items-center",children:[t.jsx("img",{src:w,alt:"Preview",className:"w-full max-w-[140px] h-28 object-cover rounded-lg border border-slate-700"}),t.jsx("p",{className:"text-xs text-slate-400",children:"This preview will be uploaded to Cloudinary and saved."})]})]}),(0,t.jsxs)(u,{title:"Gallery images",helper:"Upload additional photos.",children:[t.jsx(h,{accept:"image/png,image/jpeg,image/webp",multiple:!0,onChange:function(e){Array.from(e.target.files||[]).forEach(e=>{let a=new FileReader;a.onloadend=()=>{M(e=>({...e,galleryImages:[...e.galleryImages||[],a.result.toString()]}))},a.readAsDataURL(e)})},label:"Upload images"}),(G.galleryImages||[]).length>0&&t.jsx("div",{className:"flex flex-wrap gap-2",children:G.galleryImages.map((e,a)=>t.jsx(g,{src:e,onRemove:()=>{M(e=>({...e,galleryImages:(e.galleryImages||[]).filter((e,s)=>s!==a)}))}},e+a))}),t.jsx("p",{className:"text-[11px] text-slate-500",children:"Accepted: JPG/PNG/WEBP. Max 10 images."})]}),(0,t.jsxs)(u,{title:"Profile video",helper:"Upload a video or paste a link.",children:[t.jsx(h,{accept:"video/mp4,video/quicktime,video/webm",onChange:function(e){let a=e.target.files?.[0];if(!a)return;let s=new FileReader;s.onloadend=()=>{_(s.result.toString()),q(URL.createObjectURL(a)),M(e=>({...e,videoUrl:""}))},s.readAsDataURL(a)},label:"Upload video file"}),t.jsx("input",{name:"videoUrl",value:G.videoUrl,onChange:Q,className:p,placeholder:"https://youtube.com/embed/..."}),I||G.videoUrl?t.jsx("div",{className:"overflow-hidden rounded-lg border border-slate-700 bg-black",children:t.jsx("iframe",{src:I||G.videoUrl,className:"w-full aspect-video",title:"Doctor video preview",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0})}):null]})]})]})]})]}),(0,t.jsxs)("div",{className:"mt-auto border-t border-slate-800 bg-[#0b1017] px-6 py-4 flex justify-end gap-3",children:[t.jsx("button",{type:"button",onClick:()=>a.push("/admin/doctors"),className:"px-4 py-2 rounded-lg bg-slate-800 text-white hover:bg-slate-700 transition",children:"Cancel"}),t.jsx("button",{type:"submit",onClick:B,disabled:N||b,className:"px-4 py-2 rounded-lg bg-teal-600 text-white hover:bg-teal-500 transition disabled:opacity-70",children:N?"Updating...":"Update"})]})]})})}function u({title:e,helper:a,children:s}){return(0,t.jsxs)("div",{className:"space-y-3 rounded-xl border border-slate-800 bg-slate-900/70 p-4",children:[(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm font-semibold text-white",children:e}),a?t.jsx("p",{className:"text-xs text-slate-400",children:a}):null]}),t.jsx("div",{className:"space-y-2",children:s})]})}function h({accept:e,multiple:a,onChange:s,label:l}){return(0,t.jsxs)("label",{className:"flex flex-col items-center justify-center gap-2 rounded-xl border border-dashed border-slate-700 bg-slate-900/60 p-4 text-slate-300 cursor-pointer hover:border-teal-500 hover:bg-slate-900",children:[t.jsx("input",{type:"file",accept:e,multiple:a,className:"hidden",onChange:e=>{s&&s(e)}}),t.jsx("span",{className:"text-xs text-slate-400",children:l}),t.jsx("span",{className:"text-[11px] text-slate-500",children:e||""})]})}function g({src:e,onRemove:a}){return(0,t.jsxs)("div",{className:"relative h-20 w-20 rounded-lg overflow-hidden border border-slate-700 bg-slate-800",children:[t.jsx("img",{src:e,className:"h-full w-full object-cover",alt:"Gallery"}),t.jsx("button",{type:"button",onClick:a,className:"absolute top-1 right-1 bg-black/70 text-white rounded-full text-xs px-1",children:"\xd7"})]})}},35185:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>t});let t=(0,s(68570).createProxy)(String.raw`/Users/bibekaryal/Downloads/AnnapurnaHostipal-Nakhu/frontend/app/admin/doctors/[id]/page.js#default`)}};var a=require("../../../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),t=a.X(0,[8948,829,5388,9143,5092],()=>s(41367));module.exports=t})();