(()=>{var e={};e.id=2861,e.ids=[2861],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},40212:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>o.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>c,routeModule:()=>m,tree:()=>d}),a(21500),a(5986),a(49328),a(20784),a(89204),a(35866);var n=a(23191),s=a(88716),r=a(37922),o=a.n(r),l=a(95231),i={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);a.d(t,i);let d=["",{children:["admin",{children:["appointments",{children:["calendar",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,21500)),"/Users/bibekaryal/Downloads/AnnapurnaHostipal-Nakhu/frontend/app/admin/appointments/calendar/page.js"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,5986)),"/Users/bibekaryal/Downloads/AnnapurnaHostipal-Nakhu/frontend/app/admin/layout.js"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,49328)),"/Users/bibekaryal/Downloads/AnnapurnaHostipal-Nakhu/frontend/app/layout.js"],error:[()=>Promise.resolve().then(a.bind(a,20784)),"/Users/bibekaryal/Downloads/AnnapurnaHostipal-Nakhu/frontend/app/error.js"],loading:[()=>Promise.resolve().then(a.bind(a,89204)),"/Users/bibekaryal/Downloads/AnnapurnaHostipal-Nakhu/frontend/app/loading.js"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/bibekaryal/Downloads/AnnapurnaHostipal-Nakhu/frontend/app/admin/appointments/calendar/page.js"],p="/admin/appointments/calendar/page",u={require:a,loadChunk:()=>Promise.resolve()},m=new n.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/admin/appointments/calendar/page",pathname:"/admin/appointments/calendar",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},55099:(e,t,a)=>{Promise.resolve().then(a.bind(a,16191))},16191:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var n=a(10326),s=a(17577),r=a(88295),o=a.n(r),l=a(53360),i=a(20802),d=a(89420);function c(){let[e,t]=(0,s.useState)([]),[a,r]=(0,s.useState)(o()().format("YYYY-MM-DD")),[c,p]=(0,s.useState)([]),[u,m]=(0,s.useState)(!0),[x,h]=(0,s.useState)(!1),[b,g]=(0,s.useState)(!1),[f,y]=(0,s.useState)(null),[v,j]=(0,s.useState)({message:"",notifyPatient:!0});async function N(){try{let e=await (0,d.R1)("/appointments"),a=(e?.data||e||[]).map(e=>({id:e._id,title:e.patientName||"Appointment",start:o()(e.date).format("YYYY-MM-DD"),extendedProps:{...e,date:o()(e.date).format("YYYY-MM-DD"),doctorName:e.doctor?.name||e.doctor,departmentName:e.service?.name||e.service}}));t(a)}catch(e){console.error("Calendar load error:",e)}}async function P(e){m(!0);try{let t=await (0,d.R1)(`/appointments?date=${e}`),a=t?.data||t||[];p(a)}catch(e){console.error("Daily load error:",e)}m(!1)}async function w(e){try{await (0,d.QW)(`/appointments/${e._id}`),N(),P(a),g(!1),y(null)}catch(e){alert(e?.message||"Failed to delete")}}return(0,n.jsxs)("div",{className:"space-y-8",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsxs)("div",{children:[n.jsx("h1",{className:"text-2xl font-semibold text-white",children:"Appointments Calendar"}),n.jsx("p",{className:"text-gray-400",children:"View bookings on the calendar"})]}),n.jsx("button",{onClick:()=>h(!0),className:"px-4 py-2 rounded-lg bg-teal-600 text-white hover:bg-teal-500",children:"+ Add Appointment"})]}),n.jsx(l.Z,{events:e,onDateSelect:e=>r(e),onEventClick:e=>{y(e.event.extendedProps),j({message:"",notifyPatient:!0}),g(!0)}}),n.jsx(i.Z,{open:x,onClose:()=>h(!1),onSaved:()=>{N(),P(a)}}),b&&f&&n.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 px-4",children:(0,n.jsxs)("div",{className:"relative w-full max-w-md bg-[#0f131a] border border-white/10 rounded-2xl p-5 space-y-3 text-white",children:[n.jsx("button",{onClick:()=>g(!1),className:"absolute top-3 right-3 text-gray-300 hover:text-white",children:"âœ•"}),n.jsx("h3",{className:"text-lg font-semibold",children:"Cancel Appointment"}),n.jsx("p",{className:"text-sm text-slate-300",children:"Please provide a reason. You can choose whether to email the patient."}),(0,n.jsxs)("form",{className:"space-y-3",onSubmit:async e=>{if(e.preventDefault(),!v.message.trim()){alert("Please enter a cancellation reason.");return}try{await (0,d.pE)(`/appointments/${f._id}/status`,{status:"cancelled",adminMessage:v.message.trim(),notifyPatient:v.notifyPatient}),N(),P(a),g(!1),y(null),j({message:"",notifyPatient:!0}),setShowDetailsModal(!1)}catch(e){alert(e?.message||"Failed to cancel")}},children:[(0,n.jsxs)("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-sm text-slate-300",children:"Message to patient"}),n.jsx("textarea",{rows:4,value:v.message,onChange:e=>j(t=>({...t,message:e.target.value})),className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-teal-500 resize-none",placeholder:"Provide cancellation reason and next steps"})]}),(0,n.jsxs)("label",{className:"flex items-center gap-2 text-sm text-slate-300",children:[n.jsx("input",{type:"checkbox",checked:v.notifyPatient,onChange:e=>j(t=>({...t,notifyPatient:e.target.checked})),className:"rounded border-slate-600 bg-slate-800"}),"Notify patient via email"]}),(0,n.jsxs)("div",{className:"flex justify-end gap-2 pt-2",children:[n.jsx("button",{type:"button",onClick:()=>g(!1),className:"px-4 py-2 rounded-lg bg-slate-800 hover:bg-slate-700",children:"Close"}),n.jsx("button",{type:"button",onClick:()=>w(f),className:"px-4 py-2 rounded-lg bg-slate-700 hover:bg-slate-600",children:"Delete"}),n.jsx("button",{type:"submit",className:"px-4 py-2 rounded-lg bg-rose-600 hover:bg-rose-500",children:"Cancel Appointment"})]})]})]})})]})}},53360:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var n=a(10326),s=a(17577);function r({events:e,onDateSelect:t,onEventClick:a}){return(0,s.useRef)(null),n.jsx("div",{className:"border border-white/5 bg-[#0e1217] rounded-xl p-4",children:!1})}a(55375)},21500:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let n=(0,a(68570).createProxy)(String.raw`/Users/bibekaryal/Downloads/AnnapurnaHostipal-Nakhu/frontend/app/admin/appointments/calendar/page.js#default`)},55375:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),n=t.X(0,[8948,829,5388,9727,9143,969],()=>a(40212));module.exports=n})();