"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7129],{97129:function(e,t,l){l.d(t,{Z:function(){return u}});var a=l(57437),r=l(2265),n=l(55375),s=l(50102),i=l(32578),o=l(22631),c=l(32617),d=l(66610);function u(e){let{open:t,onClose:l,onSaved:u,initialData:h=null}=e,p=(0,r.useRef)(null),f=(0,r.useRef)(null),[m,g]=(0,r.useState)(""),[x,v]=(0,r.useState)(""),[b,y]=(0,r.useState)([]),[w,j]=(0,r.useState)([]),[N,k]=(0,r.useState)([""]),[C,E]=(0,r.useState)(!1),[Z,R]=(0,r.useState)("");if((0,r.useEffect)(()=>{var e;t&&(g((null==h?void 0:h.title)||""),v((null==h?void 0:h.description)||""),y((null==h?void 0:h.images)||[]),j((null==h?void 0:h.videos)||[]),k((null==h?void 0:null===(e=h.youtubeLinks)||void 0===e?void 0:e.length)?h.youtubeLinks:[""]),E(!1),R(""))},[t,h]),(0,r.useEffect)(()=>{if(!Z)return;let e=setTimeout(()=>R(""),2200);return()=>clearTimeout(e)},[Z]),!t)return null;async function S(e,t){if(!(null==e?void 0:e.length))return[];E(!0);try{return(await Promise.all(e.map(async e=>{let l=new FormData;l.append("image",e),l.append("folder",t);let a=await fetch((0,c.f8)("/upload"),{method:"POST",body:l,credentials:"include"});if(!a.ok)throw Error("Upload failed");let r=await a.json();return r.secure_url||r.url}))).filter(Boolean)}finally{E(!1)}}async function A(e){let t=Array.from(e.target.files||[]);if(!t.length)return;let l=await S(t,"gallery-images");y(e=>[...e,...l]),R("Images uploaded")}async function T(e){let t=Array.from(e.target.files||[]);if(!t.length)return;let l=await S(t,"gallery-videos");j(e=>[...e,...l]),R("Videos uploaded")}async function L(e){e.preventDefault();let t=N.map(e=>e.trim()).filter(Boolean);if(!m.trim()){alert("Title is required");return}if(!b.length&&!w.length&&!t.length){alert("Add at least one image, video, or YouTube link.");return}let a={title:m.trim(),description:x,images:b,videos:w,youtubeLinks:t};try{(null==h?void 0:h._id)?await (0,c.pE)("/gallery/".concat(h._id),a):await (0,c.sg)("/gallery",a),R("Saved"),null==u||u(),setTimeout(()=>null==l?void 0:l(),250)}catch(e){alert((0,d.i)(e,"Failed to save gallery"))}}return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"relative bg-[#0f131a] border border-white/10 rounded-2xl w-full max-w-5xl shadow-2xl flex flex-col max-h-[90vh]",children:[Z&&(0,a.jsx)("div",{className:"absolute left-4 top-4 bg-teal-700/20 border border-teal-500/50 text-teal-200 px-3 py-2 rounded-lg text-sm shadow",children:Z}),(0,a.jsx)("button",{onClick:l,className:"absolute right-4 top-4 text-gray-400 hover:text-white bg-slate-700/50 rounded-full p-2",children:(0,a.jsx)(n.Z,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{className:"px-6 pt-6 pb-3 border-b border-slate-800",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-white",children:h?"Edit Gallery Item":"Add Gallery Item"}),(0,a.jsx)("p",{className:"text-sm text-slate-400",children:"Upload photos, videos, or add YouTube links."})]}),(0,a.jsxs)("form",{onSubmit:L,className:"flex-1 overflow-y-auto px-6 pb-6 pt-4 space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-sm text-slate-300",children:"Title"}),(0,a.jsx)("input",{value:m,onChange:e=>g(e.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-teal-500",placeholder:"e.g. Wellness Retreat Highlights",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-sm text-slate-300",children:"Description"}),(0,a.jsx)("input",{value:x,onChange:e=>v(e.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-teal-500",placeholder:"Short summary"})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("p",{className:"text-sm text-slate-300 flex items-center gap-2",children:[(0,a.jsx)(s.Z,{className:"h-5 w-5 text-teal-400"})," Images"]}),(0,a.jsx)("button",{type:"button",onClick:()=>{var e;return null===(e=p.current)||void 0===e?void 0:e.click()},className:"text-xs bg-slate-800 text-white px-3 py-1.5 rounded-lg hover:bg-slate-700 transition",children:"Upload Images"})]}),(0,a.jsx)("input",{type:"file",accept:"image/*",multiple:!0,ref:p,className:"hidden",onChange:A}),b.length>0&&(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:b.map(e=>(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("img",{src:e,alt:"Gallery",className:"w-full h-28 object-cover rounded-lg border border-slate-700"}),(0,a.jsx)("button",{type:"button",className:"absolute top-2 right-2 bg-black/70 text-white text-xs rounded px-2 py-1 opacity-0 group-hover:opacity-100 transition",onClick:()=>y(t=>t.filter(t=>t!==e)),children:"Remove"})]},e))})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("p",{className:"text-sm text-slate-300 flex items-center gap-2",children:[(0,a.jsx)(i.Z,{className:"h-5 w-5 text-teal-400"})," Videos"]}),(0,a.jsx)("button",{type:"button",onClick:()=>{var e;return null===(e=f.current)||void 0===e?void 0:e.click()},className:"text-xs bg-slate-800 text-white px-3 py-1.5 rounded-lg hover:bg-slate-700 transition",children:"Upload Videos"})]}),(0,a.jsx)("input",{type:"file",accept:"video/*",multiple:!0,ref:f,className:"hidden",onChange:T}),w.length>0&&(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:w.map(e=>(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("video",{src:e,className:"w-full rounded-lg border border-slate-700",controls:!0}),(0,a.jsx)("button",{type:"button",className:"absolute top-2 right-2 bg-black/70 text-white text-xs rounded px-2 py-1 opacity-0 group-hover:opacity-100 transition",onClick:()=>j(t=>t.filter(t=>t!==e)),children:"Remove"})]},e))})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-slate-300",children:[(0,a.jsx)(o.Z,{className:"h-5 w-5 text-teal-400"})," YouTube Links"]}),(0,a.jsx)("div",{className:"space-y-2",children:N.map((e,t)=>(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)("input",{value:e,onChange:e=>{var l;return l=e.target.value,void k(e=>{let a=[...e];return a[t]=l,a})},className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-teal-500",placeholder:"https://youtube.com/watch?v=..."}),(0,a.jsx)("button",{type:"button",onClick:()=>{k(e=>e.filter((e,l)=>l!==t))},className:"text-sm text-rose-300 px-3 py-2 rounded-lg border border-rose-500/30 hover:bg-rose-500/10",children:"Remove"})]},t))}),(0,a.jsx)("button",{type:"button",onClick:function(){k(e=>[...e,""])},className:"text-sm text-teal-300 px-3 py-2 rounded-lg border border-teal-500/30 hover:bg-teal-500/10",children:"Add another link"})]})]}),(0,a.jsxs)("div",{className:"mt-auto border-t border-slate-800 bg-[#0b1017] px-6 py-4 flex justify-end gap-3",children:[(0,a.jsx)("button",{type:"button",onClick:l,className:"px-4 py-2 rounded-lg bg-slate-800 text-white hover:bg-slate-700 transition",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",onClick:L,disabled:C,className:"px-4 py-2 rounded-lg bg-teal-600 text-white hover:bg-teal-500 transition disabled:opacity-70",children:C?"Uploading...":h?"Save Changes":"Save"})]})]})})}},32617:function(e,t,l){l.d(t,{QW:function(){return d},R1:function(){return i},f8:function(){return n},nc:function(){return u},pE:function(){return c},sg:function(){return o}});let a="http://localhost:5000/api".replace(/\/$/,""),r=a.endsWith("/api")?a:"".concat(a,"/api");function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.startsWith("/")?e:"/".concat(e),l="".concat(r).concat(t);return console.log("[api] request url:",l),l}async function s(e){let t=await e.json().catch(()=>({}));if(!e.ok){let l=Error((null==t?void 0:t.message)||"Request failed");throw l.status=e.status,l}return t}async function i(e){return s(await fetch(n(e),{method:"GET",credentials:"include"}))}async function o(e,t){let l="undefined"!=typeof FormData&&t instanceof FormData;return s(await fetch(n(e),{method:"POST",credentials:"include",headers:l?void 0:{"Content-Type":"application/json"},body:l?t:JSON.stringify(t||{})}))}async function c(e,t){let l="undefined"!=typeof FormData&&t instanceof FormData;return s(await fetch(n(e),{method:"PUT",credentials:"include",headers:l?void 0:{"Content-Type":"application/json"},body:l?t:JSON.stringify(t||{})}))}async function d(e){return s(await fetch(n(e),{method:"DELETE",credentials:"include"}))}async function u(e,t){return s(await fetch(n(e),{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t||{})}))}},66610:function(e,t,l){l.d(t,{i:function(){return a}});function a(e){var t;let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Something went wrong";if(!e)return l;let a=(null===(t=e.response)||void 0===t?void 0:t.data)||e.data;if((null==a?void 0:a.errors)&&"object"==typeof a.errors){let e=Object.values(a.errors).flatMap(e=>Array.isArray(null==e?void 0:e._errors)?e._errors:[]).filter(Boolean);if(e.length)return e.join(", ")}return(null==a?void 0:a.message)?a.message:"string"==typeof e?e:e.message?e.message:l}},32578:function(e,t,l){var a=l(2265);let r=a.forwardRef(function(e,t){let{title:l,titleId:r,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},n),l?a.createElement("title",{id:r},l):null,a.createElement("path",{fillRule:"evenodd",d:"M1.5 5.625c0-1.036.84-1.875 1.875-1.875h17.25c1.035 0 1.875.84 1.875 1.875v12.75c0 1.035-.84 1.875-1.875 1.875H3.375A1.875 1.875 0 0 1 1.5 18.375V5.625Zm1.5 0v1.5c0 .207.168.375.375.375h1.5a.375.375 0 0 0 .375-.375v-1.5a.375.375 0 0 0-.375-.375h-1.5A.375.375 0 0 0 3 5.625Zm16.125-.375a.375.375 0 0 0-.375.375v1.5c0 .207.168.375.375.375h1.5A.375.375 0 0 0 21 7.125v-1.5a.375.375 0 0 0-.375-.375h-1.5ZM21 9.375A.375.375 0 0 0 20.625 9h-1.5a.375.375 0 0 0-.375.375v1.5c0 .207.168.375.375.375h1.5a.375.375 0 0 0 .375-.375v-1.5Zm0 3.75a.375.375 0 0 0-.375-.375h-1.5a.375.375 0 0 0-.375.375v1.5c0 .207.168.375.375.375h1.5a.375.375 0 0 0 .375-.375v-1.5Zm0 3.75a.375.375 0 0 0-.375-.375h-1.5a.375.375 0 0 0-.375.375v1.5c0 .207.168.375.375.375h1.5a.375.375 0 0 0 .375-.375v-1.5ZM4.875 18.75a.375.375 0 0 0 .375-.375v-1.5a.375.375 0 0 0-.375-.375h-1.5a.375.375 0 0 0-.375.375v1.5c0 .207.168.375.375.375h1.5ZM3.375 15h1.5a.375.375 0 0 0 .375-.375v-1.5a.375.375 0 0 0-.375-.375h-1.5a.375.375 0 0 0-.375.375v1.5c0 .207.168.375.375.375Zm0-3.75h1.5a.375.375 0 0 0 .375-.375v-1.5A.375.375 0 0 0 4.875 9h-1.5A.375.375 0 0 0 3 9.375v1.5c0 .207.168.375.375.375Zm4.125 0a.75.75 0 0 0 0 1.5h9a.75.75 0 0 0 0-1.5h-9Z",clipRule:"evenodd"}))});t.Z=r},22631:function(e,t,l){var a=l(2265);let r=a.forwardRef(function(e,t){let{title:l,titleId:r,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},n),l?a.createElement("title",{id:r},l):null,a.createElement("path",{fillRule:"evenodd",d:"M19.902 4.098a3.75 3.75 0 0 0-5.304 0l-4.5 4.5a3.75 3.75 0 0 0 1.035 6.037.75.75 0 0 1-.646 1.353 5.25 5.25 0 0 1-1.449-8.45l4.5-4.5a5.25 5.25 0 1 1 7.424 7.424l-1.757 1.757a.75.75 0 1 1-1.06-1.06l1.757-1.757a3.75 3.75 0 0 0 0-5.304Zm-7.389 4.267a.75.75 0 0 1 1-.353 5.25 5.25 0 0 1 1.449 8.45l-4.5 4.5a5.25 5.25 0 1 1-7.424-7.424l1.757-1.757a.75.75 0 1 1 1.06 1.06l-1.757 1.757a3.75 3.75 0 1 0 5.304 5.304l4.5-4.5a3.75 3.75 0 0 0-1.035-6.037.75.75 0 0 1-.354-1Z",clipRule:"evenodd"}))});t.Z=r},50102:function(e,t,l){var a=l(2265);let r=a.forwardRef(function(e,t){let{title:l,titleId:r,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},n),l?a.createElement("title",{id:r},l):null,a.createElement("path",{fillRule:"evenodd",d:"M1.5 6a2.25 2.25 0 0 1 2.25-2.25h16.5A2.25 2.25 0 0 1 22.5 6v12a2.25 2.25 0 0 1-2.25 2.25H3.75A2.25 2.25 0 0 1 1.5 18V6ZM3 16.06V18c0 .414.336.75.75.75h16.5A.75.75 0 0 0 21 18v-1.94l-2.69-2.689a1.5 1.5 0 0 0-2.12 0l-.88.879.97.97a.75.75 0 1 1-1.06 1.06l-5.16-5.159a1.5 1.5 0 0 0-2.12 0L3 16.061Zm10.125-7.81a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Z",clipRule:"evenodd"}))});t.Z=r},55375:function(e,t,l){var a=l(2265);let r=a.forwardRef(function(e,t){let{title:l,titleId:r,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},n),l?a.createElement("title",{id:r},l):null,a.createElement("path",{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))});t.Z=r}}]);