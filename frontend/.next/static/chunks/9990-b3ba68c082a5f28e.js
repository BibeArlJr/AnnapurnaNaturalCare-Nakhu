(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9990],{49990:function(e,t,a){"use strict";a.d(t,{Z:function(){return x}});var s=a(57437),n=a(2265),l=a(74942),r=a(87091),i=a(31260),o=a(12108),c=a(32617),d=a(89520);function m(e){let{selected:t,onChange:a,className:n="",calendarClassName:l="",popperClassName:r="",...i}=e;return(0,s.jsx)(d.ZP,{selected:t,onChange:a,dateFormat:"dd/MM/yyyy",className:n,popperPlacement:"top",popperClassName:"date-popper z-50 ".concat(r),calendarClassName:"custom-datepicker rounded-xl shadow-xl border border-neutral-300 p-3 text-black bg-white ".concat(l),...i})}a(21005),a(18927);var u=a(66610);function p(e){let{label:t,value:a,onChange:n,options:o=[],placeholder:c}=e;return(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("label",{className:"text-sm text-slate-300",children:t}),(0,s.jsx)(l.Ri,{value:a,onChange:n,children:(0,s.jsxs)("div",{className:"relative mt-1",children:[(0,s.jsxs)(l.Ri.Button,{className:"relative w-full cursor-pointer rounded-xl bg-slate-800 border border-slate-700 px-4 py-3 pr-10 text-left text-white focus:outline-none focus:ring-2 focus:ring-teal-500",children:[(0,s.jsx)("span",{children:a||c||"Select ".concat(t)}),(0,s.jsx)("span",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:(0,s.jsx)(r.Z,{className:"h-5 w-5 text-gray-400"})})]}),(0,s.jsxs)(l.Ri.Options,{className:"absolute mt-2 max-h-60 w-full overflow-auto rounded-xl bg-slate-900 shadow-xl border border-slate-700 text-white focus:outline-none z-30",children:[o.map((e,t)=>(0,s.jsx)(l.Ri.Option,{value:e,className:e=>{let{active:t}=e;return"cursor-pointer select-none px-4 py-2 ".concat(t?"bg-teal-700/70 text-white":"text-gray-200")},children:t=>{let{selected:a}=t;return(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:a?"font-semibold":"",children:e}),a&&(0,s.jsx)(i.Z,{className:"h-5 w-5 text-teal-300"})]})}},t)),0===o.length&&(0,s.jsx)("div",{className:"px-4 py-2 text-sm text-slate-400",children:"No options"})]})]})})]})}function x(e){let{open:t,onClose:a,onSaved:l,initialData:r}=e,[i,d]=(0,n.useState)([]),[x,h]=(0,n.useState)([]),[f,v]=(0,n.useState)({patientName:"",patientEmail:"",patientPhone:"",service:"",doctor:"",time:"",ampm:"AM",message:""}),[g,b]=(0,n.useState)(null),[N,y]=(0,n.useState)(""),j="w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-teal-500";async function w(){try{let e=await (0,c.R1)("/doctors"),t=(null==e?void 0:e.data)||e||[];d(t)}catch(e){console.error("Doctor fetch error:",e)}}async function C(){try{let e=await (0,c.R1)("/departments"),t=(null==e?void 0:e.data)||e||[];h(t)}catch(e){console.error("Department fetch error:",e)}}if((0,n.useEffect)(()=>{if(t){var e,a;w(),C(),y(""),v({patientName:(null==r?void 0:r.patientName)||"",patientEmail:(null==r?void 0:r.patientEmail)||"",patientPhone:(null==r?void 0:r.patientPhone)||"",service:(null==r?void 0:r.service)||"",doctor:(null==r?void 0:r.doctor)||"",time:(null==r?void 0:r.time)||"",ampm:(null==r?void 0:null===(a=r.time)||void 0===a?void 0:null===(e=a.toUpperCase())||void 0===e?void 0:e.includes("PM"))?"PM":"AM",message:(null==r?void 0:r.message)||""}),b((null==r?void 0:r.date)?new Date(r.date):null)}},[t,r]),(0,n.useEffect)(()=>{if(!N)return;let e=setTimeout(()=>y(""),2800);return()=>clearTimeout(e)},[N]),!t)return null;function P(e){v({...f,[e.target.name]:e.target.value})}async function E(e){e.preventDefault();let t=g?(0,o.WU)(g,"yyyy-MM-dd"):"";if(!t){alert("Please select a date.");return}let s=f.time?"".concat(f.time," ").concat(f.ampm):"";try{await (0,c.sg)("/appointments",{patientName:f.patientName,patientEmail:f.patientEmail,patientPhone:f.patientPhone,service:f.service,doctor:f.doctor,date:t,time:s,message:f.message}),y("Appointment saved"),l(),setTimeout(()=>a(),500)}catch(e){console.error(e),alert((0,u.i)(e,"Error saving appointment"))}}return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 px-4",children:(0,s.jsxs)("div",{className:"relative w-full max-w-2xl max-h-[90vh] bg-[#0d1218] border border-slate-800 rounded-2xl shadow-2xl flex flex-col",children:[N&&(0,s.jsx)("div",{className:"absolute left-5 top-4 bg-teal-600/15 border border-teal-500/50 text-teal-200 px-3 py-2 rounded-lg text-sm shadow",children:N}),(0,s.jsx)("button",{onClick:a,className:"absolute top-4 right-4 text-gray-300 hover:text-white bg-slate-700/40 hover:bg-slate-700 rounded-full p-2 transition",children:"âœ•"}),(0,s.jsxs)("div",{className:"px-6 pt-6 pb-3 border-b border-slate-800",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Add Appointment"}),(0,s.jsx)("p",{className:"text-sm text-slate-400 mt-1",children:"Create a new booking with patient and schedule details."})]}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto px-6 pb-6 pt-4 space-y-5",children:(0,s.jsxs)("form",{id:"add-appointment-form",onSubmit:E,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Patient"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("label",{className:"text-sm text-slate-300",children:"Patient Name"}),(0,s.jsx)("input",{name:"patientName",required:!0,onChange:P,className:j})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("label",{className:"text-sm text-slate-300",children:"Email"}),(0,s.jsx)("input",{type:"email",name:"patientEmail",onChange:P,className:j})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("label",{className:"text-sm text-slate-300",children:"Phone"}),(0,s.jsx)("input",{name:"patientPhone",required:!0,onChange:P,className:j})]}),(0,s.jsx)("div",{className:"space-y-1",children:(0,s.jsx)(p,{label:"Department",value:f.service,onChange:e=>v({...f,service:e}),options:x.map(e=>e.name),placeholder:"Choose department"})})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Appointment"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(p,{label:"Doctor",value:f.doctor,onChange:e=>v({...f,doctor:e}),options:i.map(e=>e.name),placeholder:"Select doctor"}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("label",{className:"text-sm text-slate-300",children:"Preferred Date"}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)(m,{selected:g,onChange:e=>b(e),className:j,calendarClassName:"custom-datepicker",popperClassName:"date-popper",shouldCloseOnSelect:!0,required:!0})})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("label",{className:"text-sm text-slate-300",children:"Preferred Time"}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("input",{type:"time",name:"time",required:!0,onChange:P,className:"".concat(j," flex-1")}),(0,s.jsx)("div",{className:"flex rounded-xl border border-slate-700 overflow-hidden",children:["AM","PM"].map(e=>(0,s.jsx)("button",{type:"button",onClick:()=>v({...f,ampm:e}),className:"px-4 py-3 text-sm font-medium transition ".concat(f.ampm===e?"bg-teal-600 text-white":"bg-slate-800 text-slate-200 hover:bg-slate-700"),children:e},e))})]})]})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("label",{className:"text-sm text-slate-300",children:"Message / Notes"}),(0,s.jsx)("textarea",{name:"message",rows:3,onChange:P,className:"".concat(j," resize-none"),placeholder:"Additional details, symptoms, or notes"})]})]})]})}),(0,s.jsxs)("div",{className:"mt-auto border-t border-slate-800 bg-[#0b1017] px-6 py-4 flex justify-end gap-3",children:[(0,s.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 rounded-lg bg-slate-800 text-white hover:bg-slate-700 transition",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",form:"add-appointment-form",className:"px-4 py-2 rounded-lg bg-teal-600 text-white hover:bg-teal-500 transition",children:"Save Appointment"})]})]})})}},32617:function(e,t,a){"use strict";a.d(t,{QW:function(){return d},R1:function(){return i},f8:function(){return l},nc:function(){return m},pE:function(){return c},sg:function(){return o}});let s="http://localhost:5000/api".replace(/\/$/,""),n=s.endsWith("/api")?s:"".concat(s,"/api");function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.startsWith("/")?e:"/".concat(e),a="".concat(n).concat(t);return console.log("[api] request url:",a),a}async function r(e){let t=await e.json().catch(()=>({}));if(!e.ok){let a=Error((null==t?void 0:t.message)||"Request failed");throw a.status=e.status,a}return t}async function i(e){return r(await fetch(l(e),{method:"GET",credentials:"include"}))}async function o(e,t){let a="undefined"!=typeof FormData&&t instanceof FormData;return r(await fetch(l(e),{method:"POST",credentials:"include",headers:a?void 0:{"Content-Type":"application/json"},body:a?t:JSON.stringify(t||{})}))}async function c(e,t){let a="undefined"!=typeof FormData&&t instanceof FormData;return r(await fetch(l(e),{method:"PUT",credentials:"include",headers:a?void 0:{"Content-Type":"application/json"},body:a?t:JSON.stringify(t||{})}))}async function d(e){return r(await fetch(l(e),{method:"DELETE",credentials:"include"}))}async function m(e,t){return r(await fetch(l(e),{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t||{})}))}},66610:function(e,t,a){"use strict";function s(e){var t;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Something went wrong";if(!e)return a;let s=(null===(t=e.response)||void 0===t?void 0:t.data)||e.data;if((null==s?void 0:s.errors)&&"object"==typeof s.errors){let e=Object.values(s.errors).flatMap(e=>Array.isArray(null==e?void 0:e._errors)?e._errors:[]).filter(Boolean);if(e.length)return e.join(", ")}return(null==s?void 0:s.message)?s.message:"string"==typeof e?e:e.message?e.message:a}a.d(t,{i:function(){return s}})},18927:function(){}}]);