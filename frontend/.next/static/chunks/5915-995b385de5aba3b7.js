(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5915],{65223:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var l=n(57437),a=n(2265),r=n(46243);function s(e){let{title:t="Media",images:n=[],setImages:s,videos:i=[],setVideos:o,maxImages:d=10,maxVideos:u=3}=e,[c,f]=(0,a.useState)(!1),[p,m]=(0,a.useState)(!1),[h,x]=(0,a.useState)("");return(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("p",{className:"text-sm text-slate-300 font-semibold",children:t}),h&&(0,l.jsx)("span",{className:"text-xs text-red-400",children:h})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("p",{className:"text-xs text-slate-400",children:["Gallery images (max ",d,")"]}),(0,l.jsx)(r.Z,{accept:"image/*",maxItems:d,value:n,onChange:e=>{x(""),s(e)},onUploadStart:()=>f(!0),onUploadEnd:()=>f(!1),onError:e=>x(e||"Upload failed"),disabled:c})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("p",{className:"text-xs text-slate-400",children:["Promo videos (max ",u,")"]}),(0,l.jsx)(r.Z,{accept:"video/*",maxItems:u,value:i,onChange:e=>{x(""),o(e)},onUploadStart:()=>m(!0),onUploadEnd:()=>m(!1),onError:e=>x(e||"Upload failed"),disabled:p})]})]})}},46243:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var l=n(57437),a=n(2265),r=n(32617);function s(e){let{value:t=[],onChange:n,maxItems:s=10,accept:i="*/*",allowUrls:o=!1,disabled:d=!1,onUploadStart:u,onUploadEnd:c,onError:f}=e,[p,m]=(0,a.useState)(!1),[h,x]=(0,a.useState)(""),b=(0,a.useRef)(null),g=Math.max(0,s-t.length),y=async e=>{if(!(null==e?void 0:e.length)||0===g)return;let l=Array.from(e).slice(0,g);try{null==u||u(),m(!0);let e=[];for(let t of l){let n=new FormData;n.append("image",t),n.append("folder","admin-media");let l=await fetch((0,r.f8)("/upload"),{method:"POST",body:n,credentials:"include"});if(!l.ok)throw Error("Upload failed");let a=await l.json(),s=(null==a?void 0:a.secure_url)||(null==a?void 0:a.url);s&&e.push(s)}e.length&&(null==n||n([...t,...e].slice(0,s)))}catch(e){null==f||f((null==e?void 0:e.message)||"Upload failed")}finally{m(!1),null==c||c()}},j=e=>{let l=t.filter((t,n)=>n!==e);null==n||n(l)};return(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"border border-dashed border-slate-700 rounded-lg p-4 text-center text-slate-300 cursor-pointer bg-slate-900/50 ".concat(d||p?"opacity-60 cursor-not-allowed":"hover:border-teal-500"),onClick:()=>{var e;return!d&&!p&&(null===(e=b.current)||void 0===e?void 0:e.click())},onDragOver:e=>{e.preventDefault()},onDrop:e=>{e.preventDefault(),d||p||y(e.dataTransfer.files)},children:[(0,l.jsx)("input",{ref:b,type:"file",accept:i,multiple:!0,className:"hidden",disabled:d||p,onChange:e=>y(e.target.files)}),(0,l.jsx)("p",{className:"text-sm font-medium",children:"Click to upload or drop files"}),(0,l.jsxs)("p",{className:"text-xs text-slate-500",children:["Max ",s," items"]}),p&&(0,l.jsx)("p",{className:"text-xs text-teal-300 mt-2",children:"Uploading..."})]}),o&&(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("input",{value:h,onChange:e=>x(e.target.value),placeholder:"Paste media URL",className:"flex-1 bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-white",disabled:d||p||t.length>=s}),(0,l.jsx)("button",{type:"button",onClick:()=>{let e=(h||"").trim();e&&!(t.length>=s)&&(null==n||n([...t,e].slice(0,s)),x(""))},disabled:d||p||!h||t.length>=s,className:"px-3 py-2 rounded-lg bg-teal-600 text-white text-sm disabled:opacity-50",children:"Add"})]}),(null==t?void 0:t.length)?(0,l.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:t.map((e,t)=>{let n="string"==typeof e?e:(null==e?void 0:e.url)||"",a=i.startsWith("image")||n&&n.match(/\.(png|jpe?g|webp)$/i);return(0,l.jsxs)("div",{className:"relative rounded-lg overflow-hidden border border-slate-700 bg-slate-900/40",children:[a?(0,l.jsx)("img",{src:n,alt:"media-".concat(t),className:"w-full h-24 object-cover"}):(0,l.jsx)("div",{className:"h-24 flex items-center justify-center text-xs text-slate-200 px-2 break-all",children:n}),(0,l.jsx)("button",{type:"button",onClick:()=>j(t),className:"absolute top-1 right-1 bg-black/70 text-white rounded-full text-xs px-2 py-0.5",children:"\xd7"})]},"".concat(n||t,"-").concat(t))})}):null]})}},14663:function(e,t,n){"use strict";n.d(t,{W:function(){return r},t:function(){return a}});var l=n(57437);function a(e){let{status:t}=e,n="published"===t;return(0,l.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-[11px] font-semibold ".concat(n?"bg-emerald-600/20 text-emerald-200 border border-emerald-500/40":"bg-slate-700/60 text-slate-200 border border-slate-600"),children:n?"Published":"Draft"})}function r(e){let{status:t,onToggle:n,disabled:a}=e,r="published"===t;return(0,l.jsx)("button",{type:"button",onClick:n,disabled:a,className:"relative inline-flex h-7 w-12 items-center rounded-full border ".concat(r?"bg-emerald-600/30 border-emerald-400":"bg-slate-700 border-slate-500"," transition disabled:opacity-60"),"aria-label":"Toggle publish",children:(0,l.jsx)("span",{className:"absolute left-1 h-5 w-5 rounded-full bg-white transition-transform ".concat(r?"translate-x-5":"translate-x-0")})})}},32617:function(e,t,n){"use strict";n.d(t,{QW:function(){return u},R1:function(){return i},f8:function(){return r},nc:function(){return c},pE:function(){return d},sg:function(){return o}});let l="http://localhost:5000/api".replace(/\/$/,""),a=l.endsWith("/api")?l:"".concat(l,"/api");function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.startsWith("/")?e:"/".concat(e),n="".concat(a).concat(t);return console.log("[api] request url:",n),n}async function s(e){let t=await e.json().catch(()=>({}));if(!e.ok){let n=Error((null==t?void 0:t.message)||"Request failed");throw n.status=e.status,n}return t}async function i(e){return s(await fetch(r(e),{method:"GET",credentials:"include"}))}async function o(e,t){let n="undefined"!=typeof FormData&&t instanceof FormData;return s(await fetch(r(e),{method:"POST",credentials:"include",headers:n?void 0:{"Content-Type":"application/json"},body:n?t:JSON.stringify(t||{})}))}async function d(e,t){let n="undefined"!=typeof FormData&&t instanceof FormData;return s(await fetch(r(e),{method:"PUT",credentials:"include",headers:n?void 0:{"Content-Type":"application/json"},body:n?t:JSON.stringify(t||{})}))}async function u(e){return s(await fetch(r(e),{method:"DELETE",credentials:"include"}))}async function c(e,t){return s(await fetch(r(e),{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t||{})}))}},66610:function(e,t,n){"use strict";function l(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Something went wrong";if(!e)return n;let l=(null===(t=e.response)||void 0===t?void 0:t.data)||e.data;if((null==l?void 0:l.errors)&&"object"==typeof l.errors){let e=Object.values(l.errors).flatMap(e=>Array.isArray(null==e?void 0:e._errors)?e._errors:[]).filter(Boolean);if(e.length)return e.join(", ")}return(null==l?void 0:l.message)?l.message:"string"==typeof e?e:e.message?e.message:n}n.d(t,{i:function(){return l}})},30166:function(e,t,n){"use strict";n.d(t,{default:function(){return a.a}});var l=n(55775),a=n.n(l)},55775:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r}});let l=n(60917);n(57437),n(2265);let a=l._(n(15602));function r(e,t){var n;let l={loading:e=>{let{error:t,isLoading:n,pastDelay:l}=e;return null}};"function"==typeof e&&(l.loader=e);let r={...l,...t};return(0,a.default)({...r,modules:null==(n=r.loadableGenerated)?void 0:n.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},81523:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return a}});let l=n(18993);function a(e){let{reason:t,children:n}=e;if("undefined"==typeof window)throw new l.BailoutToCSRError(t);return n}},15602:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return d}});let l=n(57437),a=n(2265),r=n(81523),s=n(70049);function i(e){return{default:e&&"default"in e?e.default:e}}let o={loader:()=>Promise.resolve(i(()=>null)),loading:null,ssr:!0},d=function(e){let t={...o,...e},n=(0,a.lazy)(()=>t.loader().then(i)),d=t.loading;function u(e){let i=d?(0,l.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,o=t.ssr?(0,l.jsxs)(l.Fragment,{children:["undefined"==typeof window?(0,l.jsx)(s.PreloadCss,{moduleIds:t.modules}):null,(0,l.jsx)(n,{...e})]}):(0,l.jsx)(r.BailoutToCSR,{reason:"next/dynamic",children:(0,l.jsx)(n,{...e})});return(0,l.jsx)(a.Suspense,{fallback:i,children:o})}return u.displayName="LoadableComponent",u}},70049:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return r}});let l=n(57437),a=n(20544);function r(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let n=(0,a.getExpectedRequestStore)("next/dynamic css"),r=[];if(n.reactLoadableManifest&&t){let e=n.reactLoadableManifest;for(let n of t){if(!e[n])continue;let t=e[n].files.filter(e=>e.endsWith(".css"));r.push(...t)}}return 0===r.length?null:(0,l.jsx)(l.Fragment,{children:r.map(e=>(0,l.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:n.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},98527:function(){}}]);