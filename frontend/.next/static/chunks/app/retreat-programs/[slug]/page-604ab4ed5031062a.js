(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2770],{46679:function(e,s,t){Promise.resolve().then(t.bind(t,99080))},99080:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return c}});var l=t(57437),a=t(2265),r=t(63502),i=t(27648),n=t(9063),o=t(32617);function c(e){var s,t,c;let{params:d}=e,{slug:m}=d||{},[x,h]=(0,a.useState)(null),[p,u]=(0,a.useState)(!0),[f,g]=(0,a.useState)([]),[b,j]=(0,a.useState)(0),[v,N]=(0,a.useState)(!1),[y,w]=(0,a.useState)(!1),D=(0,a.useRef)(null),[P,k]=(0,a.useState)(!1);(0,a.useEffect)(()=>{!async function(){if(m){u(!0);try{let[e,s]=await Promise.all([(0,o.R1)("/retreat-programs/".concat(m)),(0,o.R1)("/retreat-programs")]),t=(null==e?void 0:e.data)||e,l=(null==s?void 0:s.data)||s||[],a=t&&t._id?l.filter(e=>e._id!==t._id&&e.slug!==t.slug):l;g(a.slice(0,6)),t&&t.slug?h(t):h(null)}catch(e){console.error("Retreat program load error:",e),h(null)}finally{u(!1)}}}()},[m]);let S=(null==x?void 0:x.durationDays)?"".concat(x.durationDays," days"):null,_=(null==x?void 0:x.pricePerPersonUSD)?"$".concat(x.pricePerPersonUSD," per person"):"Contact for pricing",F=(null==x?void 0:x.programType)==="inside_valley"?"Inside Valley":(null==x?void 0:x.programType)==="outside_valley"?"Outside Valley":null,C=(0,a.useMemo)(()=>((null==x?void 0:x.destinations)||[]).map(e=>"string"==typeof e?e:null==e?void 0:e.name).filter(Boolean),[null==x?void 0:x.destinations]),R=(0,a.useMemo)(()=>{if(!x)return[];let e=[];return x.coverImage&&e.push({src:x.coverImage,alt:x.title}),(x.galleryImages||[]).forEach((s,t)=>{s&&e.push({src:s,alt:"".concat(x.title," ").concat(t+1)})}),e},[x]);return((0,a.useEffect)(()=>{j(0)},[null==x?void 0:x._id,R.length]),(0,a.useEffect)(()=>{let e=D.current;if(!e||!(null==x?void 0:x.descriptionShort)){w(!1),N(!1);return}e.classList.add("line-clamp-3"),w(e.scrollHeight>e.clientHeight+1),v&&e.classList.remove("line-clamp-3")},[null==x?void 0:x.descriptionShort,v]),p)?(0,l.jsx)("div",{className:"bg-[#f5f8f4] min-h-screen",children:(0,l.jsx)(r.Z,{className:"py-16",children:(0,l.jsx)("p",{className:"text-sm text-[#4c5f68]",children:"Loading program..."})})}):x?(0,l.jsxs)("div",{className:"bg-[#f5f8f4] min-h-screen",children:[(0,l.jsx)(r.Z,{className:"py-14 md:py-18",children:(0,l.jsxs)("div",{className:"grid lg:grid-cols-[minmax(0,1fr)_320px] gap-6 items-start",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,l.jsx)("section",{className:"bg-white border border-[#dfe8e2] rounded-2xl p-6 md:p-8 shadow-sm",children:(0,l.jsxs)("div",{className:"grid md:grid-cols-2 gap-6 items-stretch",children:[(0,l.jsx)("div",{className:"w-full rounded-2xl overflow-hidden bg-[#e6f2ea] relative aspect-[4/3] min-h-[260px]",children:R.length?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("img",{src:null===(s=R[b])||void 0===s?void 0:s.src,alt:(null===(t=R[b])||void 0===t?void 0:t.alt)||x.title,className:"absolute inset-0 w-full h-full object-cover"}),R.length>1&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("button",{type:"button",onClick:()=>j(e=>(e-1+R.length)%R.length),className:"absolute left-3 top-1/2 -translate-y-1/2 bg-white/90 border border-[#dfe8e2] shadow-sm rounded-full p-2 text-[#10231a] hover:bg-white","aria-label":"Previous image",children:"←"}),(0,l.jsx)("button",{type:"button",onClick:()=>j(e=>(e+1)%R.length),className:"absolute right-3 top-1/2 -translate-y-1/2 bg-white/90 border border-[#dfe8e2] shadow-sm rounded-full p-2 text-[#10231a] hover:bg-white","aria-label":"Next image",children:"→"}),(0,l.jsx)("div",{className:"absolute bottom-3 left-1/2 -translate-x-1/2 flex gap-2 bg-white/90 px-3 py-1 rounded-full shadow-sm",children:R.map((e,s)=>(0,l.jsx)("button",{type:"button",onClick:()=>j(s),className:"h-2 w-2 rounded-full transition ".concat(b===s?"bg-[#2F8D59]":"bg-[#2F8D59]/40"),"aria-label":"Go to image ".concat(s+1),title:e.alt||"Image ".concat(s+1)},e.src+s))})]})]}):(0,l.jsx)("div",{className:"w-full h-full flex items-center justify-center text-[#4c5f68]",children:"No image available"})}),(0,l.jsxs)("div",{className:"flex flex-col h-full min-h-0 justify-center gap-4",children:[(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsx)("p",{className:"text-xs uppercase tracking-[0.2em] text-[#2F8D59] font-semibold",children:"Retreat Program"}),(0,l.jsx)("h1",{className:"text-3xl md:text-4xl font-semibold text-[#10231a]",children:x.title}),F&&(0,l.jsxs)("p",{className:"text-sm text-[#10231a]",children:[(0,l.jsx)("span",{className:"font-semibold",children:"Program type:"})," ",F]}),S&&(0,l.jsxs)("p",{className:"text-sm text-[#10231a]",children:[(0,l.jsx)("span",{className:"font-semibold",children:"Program duration:"})," ",S]}),x.descriptionShort?(0,l.jsxs)("div",{className:"relative space-y-2 ".concat(v?"":"pb-4"),children:[(0,l.jsxs)("p",{ref:D,className:"text-base text-[#4c5f68] leading-relaxed ".concat(v?"":"line-clamp-3 pr-16"),children:[x.descriptionShort,!v&&y&&(0,l.jsx)("span",{onClick:()=>N(!0),className:"ml-1 cursor-pointer text-sm text-[#2F8D59] font-medium align-baseline",children:"… See more"})]}),!v&&y&&(0,l.jsx)("div",{className:"pointer-events-none absolute inset-x-0 bottom-0 h-10 bg-gradient-to-t from-white via-white/80 to-transparent rounded-b-md"}),v&&y&&(0,l.jsx)("button",{type:"button",onClick:()=>N(!1),"aria-expanded":v,className:"text-sm text-[#2F8D59] hover:underline",children:"See less"})]}):null,(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("p",{className:"text-sm text-[#4c5f68]",children:"Starting at"}),(0,l.jsx)("p",{className:"text-3xl font-semibold text-[#10231a]",children:_})]}),(null===(c=x.accommodationPricing)||void 0===c?void 0:c.length)?(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("p",{className:"text-sm text-[#4c5f68] font-semibold",children:"Accommodation pricing (per person)"}),(0,l.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:x.accommodationPricing.map(e=>(0,l.jsxs)("div",{className:"rounded-lg border border-[#e6f0eb] bg-[#f5f8f4] px-3 py-2 text-sm text-[#10231a]",children:[(0,l.jsx)("p",{className:"font-semibold",children:e.label||e.key}),(0,l.jsx)("p",{className:"text-[#2F8D59]",children:e.pricePerPersonUSD?"$".concat(e.pricePerPersonUSD," / person"):"$0 / person"})]},e.key))})]}):null]}),(0,l.jsx)("button",{onClick:()=>k(!0),className:"inline-flex items-center justify-center px-5 py-3 rounded-full bg-[#2F8D59] text-white text-sm font-semibold hover:bg-[#27784c] transition w-full sm:w-auto",children:"Book Retreat"})]})]})}),(0,l.jsxs)("section",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"bg-white border border-[#dfe8e2] rounded-2xl p-6 space-y-3",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-[#10231a]",children:"Our Retreat Places"}),(0,l.jsx)("div",{className:"space-y-2",children:C.length?C.map(e=>(0,l.jsxs)("div",{className:"flex items-start gap-2 text-sm text-[#10231a]",children:[(0,l.jsx)("span",{className:"text-[#2F8D59] mt-0.5",children:"•"}),(0,l.jsx)("span",{children:e})]},e)):(0,l.jsx)("p",{className:"text-sm text-[#4c5f68]",children:"Destinations to be announced."})})]}),(0,l.jsxs)("div",{className:"bg-white border border-[#dfe8e2] rounded-2xl p-5 space-y-3",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-[#10231a]",children:"What's included"}),(0,l.jsxs)("div",{className:"space-y-1.5",children:[[...x.alwaysIncludesAirportPickup?["Airport pickup"]:[],...x.included||[]].filter(e=>e&&e.toString().trim()).map((e,s)=>(0,l.jsxs)("div",{className:"flex items-start gap-2 text-sm text-[#2F8D59]",children:[(0,l.jsx)("span",{className:"mt-0.5",children:"✓"}),(0,l.jsx)("span",{className:"text-[#10231a]",children:e})]},"".concat(e,"-").concat(s))),x.included&&0!==x.included.length||x.alwaysIncludesAirportPickup?null:(0,l.jsx)("p",{className:"text-sm text-[#4c5f68]",children:"Details coming soon."})]})]})]}),x.descriptionLong?(0,l.jsxs)("section",{className:"bg-white border border-[#dfe8e2] rounded-2xl p-6 md:p-8 shadow-sm",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold text-[#10231a] mb-3",children:"Program overview"}),(0,l.jsx)("div",{className:"prose prose-green max-w-none text-[#10231a]",dangerouslySetInnerHTML:{__html:x.descriptionLong}})]}):null,x.promoVideo?(0,l.jsxs)("section",{className:"bg-white border border-[#dfe8e2] rounded-2xl p-6 shadow-sm space-y-3",children:[(0,l.jsx)("h3",{className:"text-xl font-semibold text-[#10231a]",children:"Program video"}),(0,l.jsx)("div",{className:"w-full rounded-xl overflow-hidden border border-[#e6f0eb] bg-black",children:(0,l.jsx)("video",{src:x.promoVideo,controls:!0,className:"w-full h-full"})})]}):null,(0,l.jsxs)("section",{className:"bg-white border border-[#dfe8e2] rounded-2xl p-6 md:p-8 flex flex-col md:flex-row items-start md:items-center justify-between gap-4 shadow-sm",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-lg font-semibold text-[#10231a]",children:"Ready to start?"}),(0,l.jsx)("p",{className:"text-sm text-[#4c5f68]",children:"Book an appointment or contact us for a tailored plan."})]}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)(i.default,{href:"/appointments",className:"inline-flex items-center justify-center px-4 py-2 rounded-full bg-[#2F8D59] text-white text-sm font-semibold hover:bg-[#27784c] transition",children:"Book Appointment"}),(0,l.jsx)(i.default,{href:"/contact",className:"inline-flex items-center justify-center px-4 py-2 rounded-full border border-[#2F8D59] text-[#2F8D59] text-sm font-semibold hover:bg-[#e6f2ea] transition",children:"Contact Us"})]})]})]}),(0,l.jsx)("aside",{className:"lg:sticky lg:top-4",children:(0,l.jsxs)("div",{className:"bg-white border border-[#dfe8e2] rounded-2xl p-5 shadow-sm space-y-4",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-[#10231a]",children:"Other Retreat Programs"}),0===f.length?(0,l.jsx)("p",{className:"text-sm text-[#4c5f68]",children:"More retreats coming soon."}):(0,l.jsx)("div",{className:"space-y-4",children:f.slice(0,6).map(e=>{let s="inside_valley"===e.programType?"Inside Valley":"outside_valley"===e.programType?"Outside Valley":"Retreat",t=e.durationDays?"".concat(e.durationDays," days"):null,a=e.pricePerPersonUSD?"$".concat(e.pricePerPersonUSD):"Contact";return(0,l.jsxs)(i.default,{href:"/retreat-programs/".concat(e.slug||e._id),className:"block rounded-2xl border border-[#e6f0eb] overflow-hidden shadow-sm hover:shadow-md hover:shadow-[#2F8D59]/10 transition",children:[(0,l.jsxs)("div",{className:"relative aspect-[4/3] bg-[#e6f2ea]",children:[e.coverImage?(0,l.jsx)("img",{src:e.coverImage,alt:e.title,className:"absolute inset-0 w-full h-full object-cover"}):null,(0,l.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/25 to-transparent"}),t?(0,l.jsx)("span",{className:"absolute top-2 right-2 inline-flex px-2 py-1 rounded-full bg-white/90 text-[#10231a] text-xs font-semibold",children:t}):null]}),(0,l.jsxs)("div",{className:"p-4 space-y-2 bg-white",children:[(0,l.jsx)("p",{className:"text-base font-semibold text-[#10231a] line-clamp-2",children:e.title}),(0,l.jsx)("div",{className:"text-xs text-[#2F8D59] font-semibold",children:s}),(0,l.jsxs)("div",{className:"text-sm text-[#4c5f68]",children:["Price: ",a]}),(0,l.jsx)("span",{className:"inline-flex justify-center items-center w-full px-3 py-2 rounded-full bg-[#2F8D59] text-white text-xs font-semibold hover:bg-[#27784c] transition",children:"View program"})]})]},e._id)})})]})})]})}),(0,l.jsx)(n.Z,{program:x,open:P,onClose:()=>k(!1)})]}):(0,l.jsx)("div",{className:"bg-[#f5f8f4] min-h-screen",children:(0,l.jsxs)(r.Z,{className:"py-16 space-y-4",children:[(0,l.jsx)("h1",{className:"text-3xl font-semibold text-[#10231a]",children:"Retreat not found"}),(0,l.jsx)(i.default,{href:"/retreat-programs",className:"text-[#2F8D59] font-semibold hover:underline",children:"Back to Retreat Programs"})]})})}}},function(e){e.O(0,[2972,1999,2971,2117,1744],function(){return e(e.s=46679)}),_N_E=e.O()}]);