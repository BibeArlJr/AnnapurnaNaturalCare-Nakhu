(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9064],{29437:function(e,t,a){Promise.resolve().then(a.bind(a,93491))},63502:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var n=a(57437);function s(e){let{className:t="",children:a}=e;return(0,n.jsx)("div",{className:"mx-auto w-full max-w-screen-xl px-4 md:px-6 lg:px-8 ".concat(t),children:a})}},93491:function(e,t,a){"use strict";a.d(t,{default:function(){return l}});var n=a(57437),s=a(63810),d=a(2265),r=a(32617),o=a(63502);let i={hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{duration:.45,ease:"easeOut"}}};function l(){let[e,t]=(0,d.useState)({name:"",phone:"",email:"",departmentId:"",doctorId:"",date:"",message:""}),[a,l]=(0,d.useState)([]),[c,m]=(0,d.useState)([]),[u,p]=(0,d.useState)(!0),[x,f]=(0,d.useState)(!1),[h,g]=(0,d.useState)(""),[b,y]=(0,d.useState)(""),[v,N]=(0,d.useState)(!1),[j,w]=(0,d.useState)("");(0,d.useEffect)(()=>{(async function(){try{let e=await (0,r.R1)("/departments");l((null==e?void 0:e.data)||e||[])}catch(e){l([]),g("Failed to load departments")}finally{p(!1)}})()},[]),(0,d.useEffect)(()=>{(async function(){if(!e.departmentId){m([]);return}f(!0);try{let t=await (0,r.R1)("/doctors"),a=((null==t?void 0:t.data)||t||[]).filter(t=>{var a;return((null===(a=t.departmentId)||void 0===a?void 0:a._id)||t.departmentId)===e.departmentId});m(a)}catch(e){m([])}finally{f(!1)}})()},[e.departmentId]);let I=!e.departmentId||x||0===c.length;function F(e){let{name:a,value:n}=e.target;t(e=>({...e,[a]:n}))}async function D(n){if(n.preventDefault(),y(""),w(""),!e.name||!e.phone||!e.departmentId||!e.date){y("Please complete required fields.");return}let s=a.find(t=>t._id===e.departmentId),d=c.find(t=>t._id===e.doctorId),o={patientName:e.name,patientEmail:e.email,patientPhone:e.phone,departmentId:e.departmentId,departmentName:null==s?void 0:s.name,service:null==s?void 0:s.name,doctorId:e.doctorId||void 0,doctor:(null==d?void 0:d.name)||void 0,doctorName:(null==d?void 0:d.name)||void 0,date:e.date,time:e.time,message:e.message};N(!0);try{await (0,r.sg)("/appointments",o),w("Your appointment request has been sent. We will contact you shortly."),t({name:"",phone:"",email:"",departmentId:"",doctorId:"",date:"",time:"",message:""}),m([])}catch(e){var i,l;y((null==e?void 0:null===(l=e.response)||void 0===l?void 0:null===(i=l.data)||void 0===i?void 0:i.message)||"Could not submit request. Please try again.")}finally{N(!1)}}return(0,n.jsx)(o.Z,{className:"pb-12 md:pb-16",children:(0,n.jsx)(s.E.div,{variants:i,initial:"hidden",whileInView:"show",viewport:{once:!0,amount:.2},className:"max-w-2xl mx-auto",children:(0,n.jsxs)("form",{onSubmit:D,className:"bg-white border border-[#cfe8d6] shadow-sm rounded-2xl p-6 md:p-8 space-y-5",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("label",{className:"text-sm font-medium text-[#10231a]",htmlFor:"name",children:["Full Name ",(0,n.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,n.jsx)("input",{id:"name",name:"name",required:!0,value:e.name,onChange:F,className:"w-full rounded-xl border border-[#d7e7dc] bg-white px-4 py-3 text-sm text-[#10231a] focus:border-[#2F8D59] focus:ring-2 focus:ring-[#cfe8d6] outline-none",placeholder:"Enter your full name"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("label",{className:"text-sm font-medium text-[#10231a]",htmlFor:"phone",children:["Phone Number ",(0,n.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,n.jsx)("input",{id:"phone",name:"phone",required:!0,value:e.phone,onChange:F,className:"w-full rounded-xl border border-[#d7e7dc] bg-white px-4 py-3 text-sm text-[#10231a] focus:border-[#2F8D59] focus:ring-2 focus:ring-[#cfe8d6] outline-none",placeholder:"Enter your phone number"})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("label",{className:"text-sm font-medium text-[#10231a]",htmlFor:"email",children:"Email (optional)"}),(0,n.jsx)("input",{id:"email",name:"email",type:"email",value:e.email,onChange:F,className:"w-full rounded-xl border border-[#d7e7dc] bg-white px-4 py-3 text-sm text-[#10231a] focus:border-[#2F8D59] focus:ring-2 focus:ring-[#cfe8d6] outline-none",placeholder:"you@example.com"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("label",{className:"text-sm font-medium text-[#10231a]",htmlFor:"departmentId",children:["Department ",(0,n.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,n.jsxs)("select",{id:"departmentId",name:"departmentId",value:e.departmentId,onChange:F,className:"w-full rounded-xl border border-[#d7e7dc] bg-white px-4 py-3 text-sm text-[#10231a] focus:border-[#2F8D59] focus:ring-2 focus:ring-[#cfe8d6] outline-none",required:!0,disabled:u,children:[(0,n.jsx)("option",{value:"",children:u?"Loading departments...":"Select department"}),(a||[]).map(e=>(0,n.jsx)("option",{value:e._id,children:e.name},e._id))]}),h&&(0,n.jsx)("p",{className:"text-xs text-red-600",children:h})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("label",{className:"text-sm font-medium text-[#10231a]",htmlFor:"doctorId",children:"Doctor (optional)"}),(0,n.jsxs)("select",{id:"doctorId",name:"doctorId",value:e.doctorId,onChange:F,className:"w-full rounded-xl border border-[#d7e7dc] bg-white px-4 py-3 text-sm text-[#10231a] focus:border-[#2F8D59] focus:ring-2 focus:ring-[#cfe8d6] outline-none disabled:bg-slate-100",disabled:I,children:[(0,n.jsx)("option",{value:"",children:"Any available doctor"}),(c||[]).map(e=>(0,n.jsx)("option",{value:e._id,children:e.name},e._id))]}),I&&e.departmentId&&0===c.length&&!x?(0,n.jsx)("p",{className:"text-xs text-[#5a695e]",children:"No doctors available for this department"}):null]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("label",{className:"text-sm font-medium text-[#10231a]",htmlFor:"date",children:["Preferred Date ",(0,n.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,n.jsx)("input",{id:"date",name:"date",type:"date",required:!0,value:e.date,onChange:F,className:"w-full rounded-xl border border-[#d7e7dc] bg-white px-4 py-3 text-sm text-[#10231a] focus:border-[#2F8D59] focus:ring-2 focus:ring-[#cfe8d6] outline-none"})]})]}),(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("label",{className:"text-sm font-medium text-[#10231a]",htmlFor:"time",children:"Preferred Time"}),(0,n.jsx)("input",{id:"time",name:"time",type:"time",value:e.time,onChange:F,className:"w-full rounded-xl border border-[#d7e7dc] bg-white px-4 py-3 text-sm text-[#10231a] focus:border-[#2F8D59] focus:ring-2 focus:ring-[#cfe8d6] outline-none"})]})}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("label",{className:"text-sm font-medium text-[#10231a]",htmlFor:"message",children:"Message / Health concern"}),(0,n.jsx)("textarea",{id:"message",name:"message",rows:4,value:e.message,onChange:F,className:"w-full rounded-xl border border-[#d7e7dc] bg-white px-4 py-3 text-sm text-[#10231a] focus:border-[#2F8D59] focus:ring-2 focus:ring-[#cfe8d6] outline-none resize-none",placeholder:"Briefly describe your concern"})]}),b&&(0,n.jsx)("p",{className:"text-sm text-red-600",children:b}),j&&(0,n.jsx)("p",{className:"text-sm text-[#2F8D59] font-medium",children:j}),(0,n.jsx)(s.E.button,{whileHover:{scale:v?1:1.02,transition:{duration:.2,ease:"easeOut"}},type:"submit",disabled:v,className:"w-full md:w-auto inline-flex justify-center rounded-full bg-[#2F8D59] px-6 py-3 text-sm font-semibold text-white shadow-sm transition-colors duration-200 hover:bg-[#27784c] disabled:opacity-60",children:v?"Sending...":"Request Appointment"})]})})})}},32617:function(e,t,a){"use strict";a.d(t,{QW:function(){return l},R1:function(){return r},nc:function(){return c},pE:function(){return i},sg:function(){return o}});let n="http://localhost:5000/api".replace(/\/$/,""),s="".concat(n,"/api");async function d(e){let t=await e.json().catch(()=>({}));if(!e.ok){let a=Error((null==t?void 0:t.message)||"Request failed");throw a.status=e.status,a}return t}async function r(e){return d(await fetch("".concat(s).concat(e),{method:"GET",credentials:"include"}))}async function o(e,t){let a="undefined"!=typeof FormData&&t instanceof FormData;return d(await fetch("".concat(s).concat(e),{method:"POST",credentials:"include",headers:a?void 0:{"Content-Type":"application/json"},body:a?t:JSON.stringify(t||{})}))}async function i(e,t){let a="undefined"!=typeof FormData&&t instanceof FormData;return d(await fetch("".concat(s).concat(e),{method:"PUT",credentials:"include",headers:a?void 0:{"Content-Type":"application/json"},body:a?t:JSON.stringify(t||{})}))}async function l(e){return d(await fetch("".concat(s).concat(e),{method:"DELETE",credentials:"include"}))}async function c(e,t){return d(await fetch("".concat(s).concat(e),{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t||{})}))}}},function(e){e.O(0,[3810,2971,2117,1744],function(){return e(e.s=29437)}),_N_E=e.O()}]);