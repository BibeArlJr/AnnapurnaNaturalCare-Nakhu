(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9064],{29437:function(e,t,n){Promise.resolve().then(n.bind(n,93491))},63502:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var a=n(57437);function s(e){let{className:t="",children:n}=e;return(0,a.jsx)("div",{className:"mx-auto w-full max-w-screen-xl px-4 md:px-6 lg:px-8 ".concat(t),children:n})}},93491:function(e,t,n){"use strict";n.d(t,{default:function(){return l}});var a=n(57437),s=n(63810),d=n(2265),r=n(32617),i=n(63502);let o={hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{duration:.45,ease:"easeOut"}}};function l(){let[e,t]=(0,d.useState)({name:"",phone:"",email:"",departmentId:"",doctorId:"",date:"",message:""}),[n,l]=(0,d.useState)([]),[c,m]=(0,d.useState)([]),[u,p]=(0,d.useState)(!0),[f,x]=(0,d.useState)(!1),[h,g]=(0,d.useState)(""),[b,y]=(0,d.useState)(""),[v,N]=(0,d.useState)(!1),[j,w]=(0,d.useState)("");(0,d.useEffect)(()=>{(async function(){try{let e=await (0,r.R1)("/departments");l((null==e?void 0:e.data)||e||[])}catch(e){l([]),g("Failed to load departments")}finally{p(!1)}})()},[]),(0,d.useEffect)(()=>{(async function(){if(!e.departmentId){m([]);return}x(!0);try{let t=await (0,r.R1)("/doctors"),n=((null==t?void 0:t.data)||t||[]).filter(t=>{var n;return((null===(n=t.departmentId)||void 0===n?void 0:n._id)||t.departmentId)===e.departmentId});m(n)}catch(e){m([])}finally{x(!1)}})()},[e.departmentId]);let I=!e.departmentId||f||0===c.length;function F(e){let{name:n,value:a}=e.target;t(e=>({...e,[n]:a}))}async function D(a){if(a.preventDefault(),y(""),w(""),!e.name||!e.phone||!e.departmentId||!e.date){y("Please complete required fields.");return}let s=n.find(t=>t._id===e.departmentId),d=c.find(t=>t._id===e.doctorId),i={patientName:e.name,patientEmail:e.email,patientPhone:e.phone,departmentId:e.departmentId,departmentName:null==s?void 0:s.name,service:null==s?void 0:s.name,doctorId:e.doctorId||void 0,doctor:(null==d?void 0:d.name)||void 0,doctorName:(null==d?void 0:d.name)||void 0,date:e.date,time:e.time,message:e.message};N(!0);try{await (0,r.sg)("/appointments",i),w("Your appointment request has been sent. We will contact you shortly."),t({name:"",phone:"",email:"",departmentId:"",doctorId:"",date:"",time:"",message:""}),m([])}catch(e){var o,l;y((null==e?void 0:null===(l=e.response)||void 0===l?void 0:null===(o=l.data)||void 0===o?void 0:o.message)||"Could not submit request. Please try again.")}finally{N(!1)}}return(0,a.jsx)(i.Z,{className:"pb-12 md:pb-16",children:(0,a.jsx)(s.E.div,{variants:o,initial:"hidden",whileInView:"show",viewport:{once:!0,amount:.2},className:"max-w-2xl mx-auto",children:(0,a.jsxs)("form",{onSubmit:D,className:"bg-white border border-[#cfe8d6] shadow-sm rounded-2xl p-6 md:p-8 space-y-5",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-sm font-medium text-[#10231a]",htmlFor:"name",children:["Full Name ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{id:"name",name:"name",required:!0,value:e.name,onChange:F,className:"w-full rounded-xl border border-[#d7e7dc] bg-white px-4 py-3 text-sm text-[#10231a] focus:border-[#2F8D59] focus:ring-2 focus:ring-[#cfe8d6] outline-none",placeholder:"Enter your full name"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-sm font-medium text-[#10231a]",htmlFor:"phone",children:["Phone Number ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{id:"phone",name:"phone",required:!0,value:e.phone,onChange:F,className:"w-full rounded-xl border border-[#d7e7dc] bg-white px-4 py-3 text-sm text-[#10231a] focus:border-[#2F8D59] focus:ring-2 focus:ring-[#cfe8d6] outline-none",placeholder:"Enter your phone number"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-[#10231a]",htmlFor:"email",children:"Email (optional)"}),(0,a.jsx)("input",{id:"email",name:"email",type:"email",value:e.email,onChange:F,className:"w-full rounded-xl border border-[#d7e7dc] bg-white px-4 py-3 text-sm text-[#10231a] focus:border-[#2F8D59] focus:ring-2 focus:ring-[#cfe8d6] outline-none",placeholder:"you@example.com"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-sm font-medium text-[#10231a]",htmlFor:"departmentId",children:["Department ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("select",{id:"departmentId",name:"departmentId",value:e.departmentId,onChange:F,className:"w-full rounded-xl border border-[#d7e7dc] bg-white px-4 py-3 text-sm text-[#10231a] focus:border-[#2F8D59] focus:ring-2 focus:ring-[#cfe8d6] outline-none",required:!0,disabled:u,children:[(0,a.jsx)("option",{value:"",children:u?"Loading departments...":"Select department"}),(n||[]).map(e=>(0,a.jsx)("option",{value:e._id,children:e.name},e._id))]}),h&&(0,a.jsx)("p",{className:"text-xs text-red-600",children:h})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-[#10231a]",htmlFor:"doctorId",children:"Doctor (optional)"}),(0,a.jsxs)("select",{id:"doctorId",name:"doctorId",value:e.doctorId,onChange:F,className:"w-full rounded-xl border border-[#d7e7dc] bg-white px-4 py-3 text-sm text-[#10231a] focus:border-[#2F8D59] focus:ring-2 focus:ring-[#cfe8d6] outline-none disabled:bg-slate-100",disabled:I,children:[(0,a.jsx)("option",{value:"",children:"Any available doctor"}),(c||[]).map(e=>(0,a.jsx)("option",{value:e._id,children:e.name},e._id))]}),I&&e.departmentId&&0===c.length&&!f?(0,a.jsx)("p",{className:"text-xs text-[#5a695e]",children:"No doctors available for this department"}):null]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-sm font-medium text-[#10231a]",htmlFor:"date",children:["Preferred Date ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{id:"date",name:"date",type:"date",required:!0,value:e.date,onChange:F,className:"w-full rounded-xl border border-[#d7e7dc] bg-white px-4 py-3 text-sm text-[#10231a] focus:border-[#2F8D59] focus:ring-2 focus:ring-[#cfe8d6] outline-none"})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-[#10231a]",htmlFor:"time",children:"Preferred Time"}),(0,a.jsx)("input",{id:"time",name:"time",type:"time",value:e.time,onChange:F,className:"w-full rounded-xl border border-[#d7e7dc] bg-white px-4 py-3 text-sm text-[#10231a] focus:border-[#2F8D59] focus:ring-2 focus:ring-[#cfe8d6] outline-none"})]})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-[#10231a]",htmlFor:"message",children:"Message / Health concern"}),(0,a.jsx)("textarea",{id:"message",name:"message",rows:4,value:e.message,onChange:F,className:"w-full rounded-xl border border-[#d7e7dc] bg-white px-4 py-3 text-sm text-[#10231a] focus:border-[#2F8D59] focus:ring-2 focus:ring-[#cfe8d6] outline-none resize-none",placeholder:"Briefly describe your concern"})]}),b&&(0,a.jsx)("p",{className:"text-sm text-red-600",children:b}),j&&(0,a.jsx)("p",{className:"text-sm text-[#2F8D59] font-medium",children:j}),(0,a.jsx)(s.E.button,{whileHover:{scale:v?1:1.02,transition:{duration:.2,ease:"easeOut"}},type:"submit",disabled:v,className:"w-full md:w-auto inline-flex justify-center rounded-full bg-[#2F8D59] px-6 py-3 text-sm font-semibold text-white shadow-sm transition-colors duration-200 hover:bg-[#27784c] disabled:opacity-60",children:v?"Sending...":"Request Appointment"})]})})})}},32617:function(e,t,n){"use strict";n.d(t,{QW:function(){return c},R1:function(){return i},f8:function(){return d},nc:function(){return m},pE:function(){return l},sg:function(){return o}});let a="http://localhost:5000/api".replace(/\/$/,""),s=a.endsWith("/api")?a:"".concat(a,"/api");function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.startsWith("/")?e:"/".concat(e),n="".concat(s).concat(t);return console.log("[api] request url:",n),n}async function r(e){let t=await e.json().catch(()=>({}));if(!e.ok){let n=Error((null==t?void 0:t.message)||"Request failed");throw n.status=e.status,n}return t}async function i(e){return r(await fetch(d(e),{method:"GET",credentials:"include"}))}async function o(e,t){let n="undefined"!=typeof FormData&&t instanceof FormData;return r(await fetch(d(e),{method:"POST",credentials:"include",headers:n?void 0:{"Content-Type":"application/json"},body:n?t:JSON.stringify(t||{})}))}async function l(e,t){let n="undefined"!=typeof FormData&&t instanceof FormData;return r(await fetch(d(e),{method:"PUT",credentials:"include",headers:n?void 0:{"Content-Type":"application/json"},body:n?t:JSON.stringify(t||{})}))}async function c(e){return r(await fetch(d(e),{method:"DELETE",credentials:"include"}))}async function m(e,t){return r(await fetch(d(e),{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t||{})}))}}},function(e){e.O(0,[3810,2971,2117,1744],function(){return e(e.s=29437)}),_N_E=e.O()}]);