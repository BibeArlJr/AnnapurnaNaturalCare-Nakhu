(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6259],{26801:function(e,t,n){Promise.resolve().then(n.bind(n,70476))},70476:function(e,t,n){"use strict";n.d(t,{default:function(){return d}});var a=n(57437),l=n(2265),s=n(30166),r=n(99376),o=n(32617);n(98527);let i=(0,s.default)(()=>Promise.all([n.e(3070),n.e(1804)]).then(n.t.bind(n,5600,23)),{loadableGenerated:{webpack:()=>[5600]},ssr:!1}),u=["Wellness","Therapy","Rehab","Lifestyle","Ayurveda","Yoga"];function c(e){return e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function d(e){var t;let{mode:n,initialData:s}=e,d=(0,r.useRouter)(),p=(0,l.useRef)(null),f=(0,l.useRef)(null),[m,h]=(0,l.useState)(!1),x=(null==s?void 0:s.category)||(null==s?void 0:null===(t=s.categoryId)||void 0===t?void 0:t.name)||(null==s?void 0:s.categoryId)||"",[g,b]=(0,l.useState)({title:(null==s?void 0:s.title)||"",slug:(null==s?void 0:s.slug)||"",category:x,shortDescription:(null==s?void 0:s.shortDescription)||"",content:(null==s?void 0:s.content)||(null==s?void 0:s.body)||""}),[v,y]=(0,l.useState)((null==s?void 0:s.images)||[]),[j,w]=(0,l.useState)((null==s?void 0:s.videos)||[]),[N,S]=(0,l.useState)((null==s?void 0:s.youtubeLinks)||[]),[k,C]=(0,l.useState)([]),[P,E]=(0,l.useState)([]),[R,_]=(0,l.useState)([]),[O,L]=(0,l.useState)([]),[T,D]=(0,l.useState)([]),[M,F]=(0,l.useState)(""),A=(0,l.useMemo)(()=>new Set((null==s?void 0:s.youtubeLinks)||[]),[s]),U=(0,l.useMemo)(()=>new Set((null==s?void 0:s.images)||[]),[s]),I=(0,l.useMemo)(()=>new Set((null==s?void 0:s.videos)||[]),[s]);function B(e,t){b({...g,[e]:t})}async function q(e){if(e.preventDefault(),!g.title){alert("Title is required");return}h(!0);let t=new FormData;t.append("title",g.title),g.slug&&t.append("slug",g.slug),g.category&&t.append("category",g.category),t.append("shortDescription",g.shortDescription),t.append("content",g.content),v.forEach(e=>t.append("images",e)),j.forEach(e=>t.append("videos",e)),N.forEach(e=>t.append("youtubeLinks",e)),k.forEach(e=>t.append("removeExistingImages",e)),P.forEach(e=>t.append("removeExistingVideos",e)),R.forEach(e=>t.append("removeExistingYoutubeLinks",e)),O.forEach(e=>{let{file:n}=e;return t.append("imageFiles",n)}),T.forEach(e=>{let{file:n}=e;return t.append("videoFiles",n)});try{"create"===n?await (0,o.sg)("/blogs",t):await (0,o.pE)("/blogs/".concat(s._id),t),d.push("/admin/blogs")}catch(e){alert(e.message||"Failed")}finally{h(!1)}}return(0,a.jsxs)("form",{onSubmit:q,className:"space-y-6 max-w-4xl",children:[(0,a.jsx)("input",{className:"border p-2 rounded w-full",placeholder:"Title",value:g.title,onChange:e=>{var t;return t=e.target.value,void b(e=>({...e,title:t,slug:e.slug||c(t)}))},required:!0}),(0,a.jsx)("input",{className:"border p-2 rounded w-full",placeholder:"Slug (optional)",value:g.slug,onChange:e=>B("slug",c(e.target.value))}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"block font-medium",children:"Short Description"}),(0,a.jsx)("input",{className:"border p-2 rounded w-full",placeholder:"Short teaser for cards",value:g.shortDescription,onChange:e=>B("shortDescription",e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"block font-medium",children:"Category"}),(0,a.jsxs)("select",{className:"border p-2 rounded w-full",value:g.category,onChange:e=>B("category",e.target.value),children:[(0,a.jsx)("option",{value:"",children:"Select category"}),u.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("button",{type:"button",className:"bg-slate-800 text-white px-3 py-2 rounded",onClick:()=>{var e;return null===(e=p.current)||void 0===e?void 0:e.click()},children:"Add Images"}),O.length>0&&(0,a.jsxs)("span",{className:"text-sm text-slate-600",children:[O.length," new image(s)"]})]}),(0,a.jsx)("input",{ref:p,type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:function(e){let t=Array.from(e.target.files||[]).map(e=>({file:e,preview:URL.createObjectURL(e)}));L(e=>[...e,...t])}}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3",children:[v.map(e=>(0,a.jsxs)("div",{className:"relative w-32 h-24",children:[(0,a.jsx)("img",{src:e,alt:"Existing",className:"w-full h-full object-cover rounded border"}),(0,a.jsx)("button",{type:"button",className:"absolute top-1 right-1 bg-black/70 text-white text-xs rounded px-2 py-1",onClick:()=>{y(t=>t.filter(t=>t!==e)),U.has(e)&&C(t=>[...t,e])},children:"Remove"})]},e)),O.map((e,t)=>{let{preview:n}=e;return(0,a.jsxs)("div",{className:"relative w-32 h-24",children:[(0,a.jsx)("img",{src:n,alt:"Upload",className:"w-full h-full object-cover rounded border"}),(0,a.jsx)("button",{type:"button",className:"absolute top-1 right-1 bg-black/70 text-white text-xs rounded px-2 py-1",onClick:()=>L(e=>e.filter((e,n)=>n!==t)),children:"Remove"})]},n)})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("button",{type:"button",className:"bg-slate-800 text-white px-3 py-2 rounded",onClick:()=>{var e;return null===(e=f.current)||void 0===e?void 0:e.click()},children:"Add Videos"}),T.length>0&&(0,a.jsxs)("span",{className:"text-sm text-slate-600",children:[T.length," new video(s)"]})]}),(0,a.jsx)("input",{ref:f,type:"file",accept:"video/*",multiple:!0,className:"hidden",onChange:function(e){let t=Array.from(e.target.files||[]).map(e=>({file:e,preview:URL.createObjectURL(e)}));D(e=>[...e,...t])}}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3",children:[j.map(e=>(0,a.jsxs)("div",{className:"relative w-40",children:[(0,a.jsx)("video",{src:e,className:"w-full rounded border",controls:!0}),(0,a.jsx)("button",{type:"button",className:"absolute top-1 right-1 bg-black/70 text-white text-xs rounded px-2 py-1",onClick:()=>{w(t=>t.filter(t=>t!==e)),I.has(e)&&E(t=>[...t,e])},children:"Remove"})]},e)),T.map((e,t)=>{let{preview:n}=e;return(0,a.jsxs)("div",{className:"relative w-40",children:[(0,a.jsx)("video",{src:n,className:"w-full rounded border",controls:!0}),(0,a.jsx)("button",{type:"button",className:"absolute top-1 right-1 bg-black/70 text-white text-xs rounded px-2 py-1",onClick:()=>D(e=>e.filter((e,n)=>n!==t)),children:"Remove"})]},n)})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"block font-medium",children:"YouTube Links"}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("input",{className:"border p-2 rounded w-full",placeholder:"Paste YouTube link",value:M,onChange:e=>F(e.target.value)}),(0,a.jsx)("button",{type:"button",className:"bg-blue-600 text-white px-3 py-2 rounded",onClick:function(){let e=M.trim();e&&(S(t=>Array.from(new Set([...t,e]))),F(""))},children:"Add"})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:N.map(e=>(0,a.jsxs)("span",{className:"inline-flex items-center gap-2 bg-slate-100 text-slate-800 px-3 py-1 rounded-full text-sm",children:[e,(0,a.jsx)("button",{type:"button",onClick:()=>{S(t=>t.filter(t=>t!==e)),A.has(e)&&_(t=>[...t,e])},children:"âœ•"})]},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block font-medium mb-2",children:"Content"}),(0,a.jsx)(i,{theme:"snow",value:g.content,onChange:e=>B("content",e)})]}),(0,a.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-60",disabled:m,children:m?"Saving...":"create"===n?"Create Blog":"Update Blog"})]})}},32617:function(e,t,n){"use strict";n.d(t,{QW:function(){return u},R1:function(){return r},nc:function(){return c},pE:function(){return i},sg:function(){return o}});let a="http://localhost:5000/api".replace(/\/$/,""),l="".concat(a,"/api");async function s(e){let t=await e.json().catch(()=>({}));if(!e.ok){let n=Error((null==t?void 0:t.message)||"Request failed");throw n.status=e.status,n}return t}async function r(e){return s(await fetch("".concat(l).concat(e),{method:"GET",credentials:"include"}))}async function o(e,t){let n="undefined"!=typeof FormData&&t instanceof FormData;return s(await fetch("".concat(l).concat(e),{method:"POST",credentials:"include",headers:n?void 0:{"Content-Type":"application/json"},body:n?t:JSON.stringify(t||{})}))}async function i(e,t){let n="undefined"!=typeof FormData&&t instanceof FormData;return s(await fetch("".concat(l).concat(e),{method:"PUT",credentials:"include",headers:n?void 0:{"Content-Type":"application/json"},body:n?t:JSON.stringify(t||{})}))}async function u(e){return s(await fetch("".concat(l).concat(e),{method:"DELETE",credentials:"include"}))}async function c(e,t){return s(await fetch("".concat(l).concat(e),{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t||{})}))}},30166:function(e,t,n){"use strict";n.d(t,{default:function(){return l.a}});var a=n(55775),l=n.n(a)},99376:function(e,t,n){"use strict";var a=n(35475);n.o(a,"useParams")&&n.d(t,{useParams:function(){return a.useParams}}),n.o(a,"usePathname")&&n.d(t,{usePathname:function(){return a.usePathname}}),n.o(a,"useRouter")&&n.d(t,{useRouter:function(){return a.useRouter}}),n.o(a,"useSearchParams")&&n.d(t,{useSearchParams:function(){return a.useSearchParams}})},55775:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s}});let a=n(60917);n(57437),n(2265);let l=a._(n(15602));function s(e,t){var n;let a={loading:e=>{let{error:t,isLoading:n,pastDelay:a}=e;return null}};"function"==typeof e&&(a.loader=e);let s={...a,...t};return(0,l.default)({...s,modules:null==(n=s.loadableGenerated)?void 0:n.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},81523:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return l}});let a=n(18993);function l(e){let{reason:t,children:n}=e;if("undefined"==typeof window)throw new a.BailoutToCSRError(t);return n}},15602:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return u}});let a=n(57437),l=n(2265),s=n(81523),r=n(70049);function o(e){return{default:e&&"default"in e?e.default:e}}let i={loader:()=>Promise.resolve(o(()=>null)),loading:null,ssr:!0},u=function(e){let t={...i,...e},n=(0,l.lazy)(()=>t.loader().then(o)),u=t.loading;function c(e){let o=u?(0,a.jsx)(u,{isLoading:!0,pastDelay:!0,error:null}):null,i=t.ssr?(0,a.jsxs)(a.Fragment,{children:["undefined"==typeof window?(0,a.jsx)(r.PreloadCss,{moduleIds:t.modules}):null,(0,a.jsx)(n,{...e})]}):(0,a.jsx)(s.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(n,{...e})});return(0,a.jsx)(l.Suspense,{fallback:o,children:i})}return c.displayName="LoadableComponent",c}},70049:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return s}});let a=n(57437),l=n(20544);function s(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let n=(0,l.getExpectedRequestStore)("next/dynamic css"),s=[];if(n.reactLoadableManifest&&t){let e=n.reactLoadableManifest;for(let n of t){if(!e[n])continue;let t=e[n].files.filter(e=>e.endsWith(".css"));s.push(...t)}}return 0===s.length?null:(0,a.jsx)(a.Fragment,{children:s.map(e=>(0,a.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:n.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},98527:function(){}},function(e){e.O(0,[6458,2971,2117,1744],function(){return e(e.s=26801)}),_N_E=e.O()}]);