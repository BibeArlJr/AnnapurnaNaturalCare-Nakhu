(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5543],{69447:function(e,t,s){Promise.resolve().then(s.bind(s,35302))},35302:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return k}});var a=s(57437),l=s(2265),r=s(14428),n=s(49513),i=s(30083),o=s(34379),c=s(5137),d=s(9878),u=s(32617),x=s(27648),h=s(14663);function m(e){let{post:t,onDelete:s,onToggleStatus:l,updatingStatus:r}=e,{_id:n,title:i,categoryId:o,createdAt:u,images:m=[],videos:p=[],youtubeLinks:g=[],mediaUrl:b}=t;return(0,a.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-[#11151c] p-3 space-y-3 hover:border-teal-600/40 transition",children:[(0,a.jsx)(x.default,{href:"/admin/blogs/".concat(n),children:(0,a.jsx)("div",{className:"cursor-pointer",children:function(){let e=m[0],t=p[0],s=g[0];if(e||b)return(0,a.jsx)("img",{src:e||b,className:"h-36 w-full object-cover rounded-xl border border-slate-800",alt:"preview"});if(t)return(0,a.jsx)("video",{src:t,className:"h-36 w-full object-cover rounded-xl border border-slate-800"});if(s){let e=function(e){try{let t=new URL(e);if(t.searchParams.get("v"))return t.searchParams.get("v");let s=t.pathname.split("/");return s[s.length-1]}catch(e){return""}}(s),t=e?"https://www.youtube.com/embed/".concat(e):s;return(0,a.jsx)("div",{className:"relative h-36 w-full rounded-xl overflow-hidden border border-slate-800",children:(0,a.jsx)("iframe",{className:"absolute inset-0 w-full h-full",src:t,allowFullScreen:!0})})}return(0,a.jsx)("div",{className:"h-36 bg-slate-800 rounded-xl"})}()})}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(x.default,{href:"/admin/blogs/".concat(n),children:(0,a.jsx)("p",{className:"text-white font-semibold hover:text-teal-400 transition line-clamp-2",children:i})}),(0,a.jsx)("p",{className:"text-xs text-slate-400",children:(null==o?void 0:o.name)||"Uncategorized"}),(0,a.jsx)("p",{className:"text-[11px] text-slate-500",children:u?new Date(u).toLocaleDateString():""})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(h.t,{status:t.status}),(0,a.jsx)(h.W,{status:t.status,onToggle:()=>null==l?void 0:l(t),disabled:r})]}),(0,a.jsx)(x.default,{href:"/admin/blogs/".concat(n),className:"p-2 rounded-md bg-slate-800 hover:bg-slate-700 transition",children:(0,a.jsx)(c.Z,{className:"h-4 w-4 text-teal-300"})}),(0,a.jsx)("button",{onClick:()=>s(n),className:"p-2 rounded-md bg-slate-800 hover:bg-rose-700 transition",children:(0,a.jsx)(d.Z,{className:"h-4 w-4 text-rose-300"})})]})]})}var p=s(74942),g=s(302),b=s(87091),f=s(31260),v=s(55375),j=s(66610);function y(e){let{open:t,onClose:s,onCategoryCreated:r}=e,[n,i]=(0,l.useState)(""),[o,c]=(0,l.useState)(!1);if(!t)return null;async function d(e){e.preventDefault(),c(!0);try{await (0,u.sg)("/blog/categories",{name:n}),null==r||r(),i("")}catch(e){alert((0,j.i)(e,"Failed to create category"))}c(!1)}return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-slate-900 border border-white/10 rounded-xl w-full max-w-md p-6 space-y-5 relative",children:[(0,a.jsx)("button",{onClick:s,className:"absolute right-3 top-3 text-gray-400 hover:text-white",children:(0,a.jsx)(v.Z,{className:"h-6 w-6"})}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Add Blog Category"}),(0,a.jsxs)("form",{onSubmit:d,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-sm text-gray-300",children:"Category Name"}),(0,a.jsx)("input",{value:n,onChange:e=>i(e.target.value),required:!0,placeholder:"e.g. Yoga, Naturopathy, Treatment",className:"w-full px-4 py-2 rounded-lg bg-[#11151c] border border-white/10 text-white outline-none focus:border-teal-500"})]}),(0,a.jsx)("button",{type:"submit",disabled:o,className:"w-full bg-teal-600 hover:bg-teal-500 text-white py-2 rounded-lg transition disabled:opacity-50",children:o?"Saving...":"Add Category"})]})]})})}var N=s(30166);s(98527);let w=(0,N.default)(()=>Promise.all([s.e(3070),s.e(1804)]).then(s.t.bind(s,5600,23)),{loadableGenerated:{webpack:()=>[5600]},ssr:!1});function C(e){var t;let{open:s,onClose:r,onSaved:n}=e,i=(0,l.useRef)(null),o=(0,l.useRef)(null),[d,x]=(0,l.useState)([]),[h,m]=(0,l.useState)(""),[v,N]=(0,l.useState)(!1),[C,S]=(0,l.useState)(!1),[k,D]=(0,l.useState)([]),[T,_]=(0,l.useState)([]),[A,R]=(0,l.useState)([]),[P,E]=(0,l.useState)([]),[L,F]=(0,l.useState)(""),[O,Z]=(0,l.useState)([]),[U,I]=(0,l.useState)({title:"",slug:"",categoryId:"",content:"",shortDescription:""}),B="w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-teal-500";async function M(){try{let e=await (0,u.R1)("/blog/categories"),t=(null==e?void 0:e.data)||e||[];x(t)}catch(e){console.error("Category fetch error:",e)}}async function W(e){if(e.preventDefault(),!U.title||!U.categoryId){alert("Title and category are required.");return}N(!0);try{let e=new FormData;e.append("title",U.title),e.append("slug",U.slug),e.append("categoryId",U.categoryId),e.append("content",U.content),e.append("shortDescription",U.shortDescription),A.forEach(t=>e.append("imageFiles",t)),P.forEach(t=>e.append("videoFiles",t)),O.forEach(t=>e.append("youtubeLinks",t)),await (0,u.sg)("/blogs",e),m("Post created"),null==n||n(),setTimeout(()=>null==r?void 0:r(),400)}catch(e){alert((0,j.i)(e,"Failed to save blog"))}finally{N(!1)}}return(0,l.useEffect)(()=>{s&&(I({title:"",slug:"",categoryId:"",content:"",shortDescription:""}),D([]),_([]),R([]),E([]),Z([]),F(""),N(!1),m(""),M())},[s]),(0,l.useEffect)(()=>{if(!h)return;let e=setTimeout(()=>m(""),2200);return()=>clearTimeout(e)},[h]),s?(0,a.jsxs)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 px-4",children:[(0,a.jsxs)("div",{className:"relative w-full max-w-4xl max-h-[90vh] bg-[#0d1218] border border-slate-800 rounded-2xl shadow-2xl flex flex-col",children:[h&&(0,a.jsx)("div",{className:"absolute left-5 top-4 bg-teal-600/15 border border-teal-500/50 text-teal-200 px-3 py-2 rounded-lg text-sm shadow",children:h}),(0,a.jsx)("button",{onClick:r,className:"absolute top-4 right-4 text-gray-300 hover:text-white bg-slate-700/40 hover:bg-slate-700 rounded-full p-2 transition",children:"✕"}),(0,a.jsxs)("div",{className:"px-6 pt-6 pb-3 border-b border-slate-800",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Add Blog Post"}),(0,a.jsx)("p",{className:"text-sm text-slate-400 mt-1",children:"Create a new article with media and publishing status."})]}),(0,a.jsxs)("form",{onSubmit:W,className:"flex-1 overflow-y-auto px-6 pb-6 pt-4 space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Details"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-sm text-slate-300",children:"Title"}),(0,a.jsx)("input",{name:"title",required:!0,value:U.title,onChange:function(e){let t=e.target.value,s=t.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"");I(e=>({...e,title:t,slug:s}))},className:B,placeholder:"e.g. 5 Tips for Better Sleep"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-sm text-slate-300",children:"Slug"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{name:"slug",required:!0,value:U.slug,onChange:e=>I(t=>({...t,slug:e.target.value})),className:B,placeholder:"5-tips-for-better-sleep"}),(0,a.jsx)(c.Z,{className:"h-5 w-5 text-slate-500 absolute right-3 top-3.5"})]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-sm text-slate-300",children:"Category"}),(0,a.jsx)("div",{className:"relative mt-1",children:(0,a.jsx)(p.Ri,{value:U.categoryId,onChange:e=>I(t=>({...t,categoryId:e})),children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)(p.Ri.Button,{className:"relative w-full cursor-pointer rounded-xl bg-slate-800 border border-slate-700 px-4 py-3 pr-10 text-left text-white focus:outline-none focus:ring-2 focus:ring-teal-500",children:[(0,a.jsx)("span",{children:(null===(t=d.find(e=>e._id===U.categoryId))||void 0===t?void 0:t.name)||"Select category"}),(0,a.jsx)("span",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:(0,a.jsx)(b.Z,{className:"h-5 w-5 text-gray-400"})})]}),(0,a.jsx)(g.u,{enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,a.jsxs)(p.Ri.Options,{className:"absolute mt-2 max-h-60 w-full overflow-auto rounded-xl bg-slate-900 shadow-xl border border-slate-700 text-white focus:outline-none z-30",children:[d.map(e=>(0,a.jsx)(p.Ri.Option,{value:e._id,className:e=>{let{active:t}=e;return"cursor-pointer select-none px-4 py-2 ".concat(t?"bg-teal-700/70 text-white":"text-gray-200")},children:t=>{let{selected:s}=t;return(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:s?"font-semibold":"",children:e.name}),s&&(0,a.jsx)(f.Z,{className:"h-5 w-5 text-teal-300"})]})}},e._id)),0===d.length&&(0,a.jsx)("div",{className:"px-4 py-2 text-sm text-slate-400",children:"No categories"})]})})]})})})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-sm text-slate-300",children:"Short Description"}),(0,a.jsx)("input",{name:"shortDescription",value:U.shortDescription,onChange:function(e){let{name:t,value:s}=e.target;I(e=>({...e,[t]:s}))},className:B,placeholder:"Brief summary for cards and previews."})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm text-slate-300",children:"Content"}),(0,a.jsx)(w,{theme:"snow",value:U.content,onChange:e=>I(t=>({...t,content:e})),placeholder:"Write your post content...",modules:{toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["link"],["clean"]]}})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Media"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-sm text-slate-300",children:"Image Upload"}),k.length>0&&(0,a.jsx)("button",{type:"button",className:"text-xs text-rose-300 hover:text-rose-200",onClick:()=>{R([]),D([])},children:"Clear All"})]}),(0,a.jsxs)("div",{className:"border-2 border-dashed border-slate-700 bg-slate-900/40 rounded-xl p-4 flex flex-col gap-3 items-center justify-center text-slate-300 cursor-pointer hover:border-teal-500 transition",onDragOver:e=>e.preventDefault(),onDrop:e=>{e.preventDefault();let t=Array.from(e.dataTransfer.files||[]).filter(e=>e.type.startsWith("image/"));t.length&&(R(e=>[...e,...t]),D(e=>[...e,...t.map(e=>URL.createObjectURL(e))]))},onClick:()=>{var e;return null===(e=i.current)||void 0===e?void 0:e.click()},children:[(0,a.jsx)("input",{type:"file",accept:"image/*",multiple:!0,ref:i,className:"hidden",onChange:function(e){let t=Array.from(e.target.files||[]);t.length&&(R(e=>[...e,...t]),D(e=>[...e,...t.map(e=>URL.createObjectURL(e))]))}}),(0,a.jsxs)("div",{className:"text-center space-y-1",children:[(0,a.jsx)("p",{className:"font-medium",children:"Drop an image here or click to upload"}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"JPG or PNG under 5MB. Multiple allowed."})]}),A.length>0&&(0,a.jsxs)("p",{className:"text-xs text-teal-300",children:[A.length," image",A.length>1?"s":""," selected"]}),k.length>0&&(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 w-full",children:k.map((e,t)=>(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("img",{src:e,alt:"Preview",className:"w-full h-24 object-cover rounded-lg border border-slate-700"}),(0,a.jsx)("button",{type:"button",className:"absolute top-1 right-1 bg-black/70 text-white text-xs rounded px-2 py-1 opacity-0 group-hover:opacity-100 transition",onClick:e=>{e.stopPropagation(),R(e=>e.filter((e,s)=>s!==t)),D(e=>e.filter((e,s)=>s!==t))},children:"Remove"})]},e))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-sm text-slate-300",children:"Video Upload"}),T.length>0&&(0,a.jsx)("button",{type:"button",className:"text-xs text-rose-300 hover:text-rose-200",onClick:()=>{E([]),_([])},children:"Clear All"})]}),(0,a.jsxs)("div",{className:"border-2 border-dashed border-slate-700 bg-slate-900/40 rounded-xl p-4 flex flex-col gap-3 items-center justify-center text-slate-300 cursor-pointer hover:border-teal-500 transition",onDragOver:e=>e.preventDefault(),onDrop:e=>{e.preventDefault();let t=Array.from(e.dataTransfer.files||[]).filter(e=>e.type.startsWith("video/"));t.length&&(E(e=>[...e,...t]),_(e=>[...e,...t.map(e=>URL.createObjectURL(e))]))},onClick:()=>{var e;return null===(e=o.current)||void 0===e?void 0:e.click()},children:[(0,a.jsx)("input",{type:"file",accept:"video/*",multiple:!0,ref:o,className:"hidden",onChange:function(e){let t=Array.from(e.target.files||[]);t.length&&(E(e=>[...e,...t]),_(e=>[...e,...t.map(e=>URL.createObjectURL(e))]))}}),(0,a.jsxs)("div",{className:"text-center space-y-1",children:[(0,a.jsx)("p",{className:"font-medium",children:"Drop a video here or click to upload"}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"MP4, under 100MB. Multiple allowed."})]}),P.length>0&&(0,a.jsxs)("p",{className:"text-xs text-teal-300",children:[P.length," video",P.length>1?"s":""," selected"]}),T.length>0&&(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 w-full",children:T.map((e,t)=>(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("video",{className:"w-full rounded-lg border border-slate-700",controls:!0,src:e}),(0,a.jsx)("button",{type:"button",className:"absolute top-2 right-2 bg-black/70 text-white text-xs rounded px-2 py-1 opacity-0 group-hover:opacity-100 transition",onClick:e=>{e.stopPropagation(),E(e=>e.filter((e,s)=>s!==t)),_(e=>e.filter((e,s)=>s!==t))},children:"Remove"})]},e))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-sm text-slate-300",children:"YouTube Link"}),O.length>0&&(0,a.jsx)("button",{type:"button",className:"text-xs text-rose-300 hover:text-rose-200",onClick:()=>Z([]),children:"Clear All"})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("input",{name:"youtubeInput",value:L,onChange:e=>F(e.target.value),className:B,placeholder:"Paste YouTube link"}),(0,a.jsx)("button",{type:"button",onClick:function(){let e=L.trim();e&&(Z(t=>Array.from(new Set([...t,e]))),F(""))},className:"px-4 py-2 rounded-lg bg-teal-600 text-white hover:bg-teal-500 transition",children:"Add"})]}),O.length>0&&(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:O.map(e=>(0,a.jsxs)("div",{className:"relative group w-full aspect-video bg-black/40 rounded-lg border border-slate-700 overflow-hidden",children:[(0,a.jsx)("iframe",{src:e,className:"w-full h-full rounded-lg",title:"YouTube preview",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),(0,a.jsx)("button",{type:"button",className:"absolute top-2 right-2 bg-black/70 text-white text-xs rounded px-2 py-1 opacity-0 group-hover:opacity-100 transition",onClick:()=>Z(t=>t.filter(t=>t!==e)),children:"Remove"})]},e))})]})]})]}),(0,a.jsxs)("div",{className:"mt-auto border-t border-slate-800 bg-[#0b1017] px-6 py-4 flex justify-end gap-3",children:[(0,a.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 rounded-lg bg-slate-800 text-white hover:bg-slate-700 transition",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",onClick:W,disabled:v,className:"px-4 py-2 rounded-lg bg-teal-600 text-white hover:bg-teal-500 transition disabled:opacity-70",children:v?"Saving...":"Save Post"})]})]}),(0,a.jsx)(y,{open:C,onClose:()=>S(!1),onCategoryCreated:()=>{S(!1),M()}})]}):null}function S(e){let{open:t,onClose:s,category:r,onCategoryUpdated:n}=e,[i,o]=(0,l.useState)({name:"",slug:""}),[c,d]=(0,l.useState)(!1);if((0,l.useEffect)(()=>{t&&r&&(o({name:r.name||"",slug:r.slug||""}),d(!1))},[t,r]),!t)return null;let x="w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-teal-500";async function h(e){if(e.preventDefault(),null==r?void 0:r._id){d(!0);try{let e=await (0,u.pE)("/blog/categories/".concat(r._id),i);null==n||n((null==e?void 0:e.data)||e),null==s||s()}catch(e){alert((0,j.i)(e,"Failed to update category"))}finally{d(!1)}}}return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 px-4",children:(0,a.jsxs)("div",{className:"relative w-full max-w-md bg-[#0d1218] border border-slate-800 rounded-2xl shadow-2xl p-6",children:[(0,a.jsx)("button",{onClick:s,className:"absolute top-4 right-4 text-gray-300 hover:text-white bg-slate-700/40 hover:bg-slate-700 rounded-full p-2 transition",children:"✕"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-3",children:"Edit Category"}),(0,a.jsxs)("form",{className:"space-y-4",onSubmit:h,children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-sm text-slate-300",children:"Name"}),(0,a.jsx)("input",{value:i.name,onChange:function(e){let t=e.target.value,s=t.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"");o({name:t,slug:s})},className:x,placeholder:"Wellness",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-sm text-slate-300",children:"Slug"}),(0,a.jsx)("input",{value:i.slug,onChange:function(e){o(t=>({...t,slug:e.target.value}))},className:x,placeholder:"wellness",required:!0})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 pt-2",children:[(0,a.jsx)("button",{type:"button",onClick:s,className:"px-4 py-2 rounded-lg bg-slate-800 text-white hover:bg-slate-700 transition",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:c,className:"px-4 py-2 rounded-lg bg-teal-600 text-white hover:bg-teal-500 transition disabled:opacity-70",children:c?"Saving...":"Save"})]})]})]})})}function k(){let[e,t]=(0,l.useState)([]),[s,x]=(0,l.useState)([]),[h,p]=(0,l.useState)(""),[g,b]=(0,l.useState)(!0),[f,v]=(0,l.useState)(""),[j,N]=(0,l.useState)(!1),[w,k]=(0,l.useState)([]),[D,T]=(0,l.useState)(!0),[_,A]=(0,l.useState)(!1),[R,P]=(0,l.useState)(!1),[E,L]=(0,l.useState)(!1),[F,O]=(0,l.useState)(null),[Z,U]=(0,l.useState)(""),[I,B]=(0,l.useState)(null);async function M(){b(!0),v("");try{let e=await (0,u.R1)("/blogs?includeDrafts=true"),s=(null==e?void 0:e.data)||e||[];t(s),x(s)}catch(e){console.error("Blog fetch error:",e),v("Failed to load blogs")}b(!1)}async function W(){T(!0);try{let e=await (0,u.R1)("/blog/categories"),t=(null==e?void 0:e.data)||e||[];k(t)}catch(e){console.error("Category fetch error:",e)}T(!1)}async function z(e){if(confirm("Delete this post?"))try{await (0,u.QW)("/blogs/".concat(e)),M()}catch(e){alert(e.message||"Failed to delete post")}}async function q(e){if(confirm("Are you sure you want to delete this category?"))try{await (0,u.QW)("/blog/categories/".concat(e)),k(t=>t.filter(t=>t._id!==e)),U("Category deleted")}catch(e){U(e.message||"Cannot delete category until blogs are reassigned.")}}function G(e,s){t(t=>t.map(t=>t._id===e?{...t,status:s}:t)),x(t=>t.map(t=>t._id===e?{...t,status:s}:t))}async function J(e){let t="published"===e.status?"draft":"published";G(e._id,t),B(e._id);try{await (0,u.nc)("/blogs/".concat(e._id,"/status"),{status:t})}catch(t){G(e._id,e.status),alert(t.message||"Failed to update status")}finally{B(null)}}return(0,l.useEffect)(()=>{M(),W()},[]),(0,l.useEffect)(()=>{if(!Z)return;let e=setTimeout(()=>U(""),2200);return()=>clearTimeout(e)},[Z]),(0,a.jsxs)("div",{className:"space-y-6",children:[Z&&(0,a.jsx)("div",{className:"fixed top-4 right-4 z-50 bg-slate-900 border border-white/10 text-white px-4 py-2 rounded-lg shadow-lg",children:Z}),(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row gap-6",children:[(0,a.jsxs)("div",{className:"flex-1 space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("h1",{className:"text-2xl text-white font-semibold flex items-center gap-2",children:[(0,a.jsx)(r.Z,{className:"h-7 w-7 text-teal-400"}),"Manage Blog Posts"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("button",{onClick:()=>P(!0),className:"flex items-center gap-2 bg-slate-800 border border-slate-700 hover:bg-slate-700 text-white px-4 py-2 rounded-lg transition text-sm",children:[(0,a.jsx)(n.Z,{className:"h-5 w-5 text-teal-300"}),"Manage Categories"]}),(0,a.jsxs)("button",{onClick:()=>N(!0),className:"flex items-center gap-2 bg-teal-600 hover:bg-teal-500 text-white px-5 py-2 rounded-lg transition",children:[(0,a.jsx)(i.Z,{className:"h-5 w-5"}),"Add New Post"]})]})]}),(0,a.jsxs)("div",{className:"relative w-full sm:w-80",children:[(0,a.jsx)(o.Z,{className:"absolute left-3 top-3.5 h-5 w-5 text-gray-400"}),(0,a.jsx)("input",{value:h,onChange:t=>(function(t){p(t);let s=t.toLowerCase();x(e.filter(e=>{var t;let a=(null==e?void 0:null===(t=e.categoryId)||void 0===t?void 0:t.name)||(null==e?void 0:e.category)||"";return(e.title||"").toLowerCase().includes(s)||(e.shortDescription||"").toLowerCase().includes(s)||a.toLowerCase().includes(s)}))})(t.target.value),placeholder:"Search posts...",className:"bg-[#11151c] border border-white/10 text-white rounded-lg py-3 pl-10 pr-3 w-full outline-none focus:border-teal-500"})]}),f&&(0,a.jsx)("div",{className:"rounded-xl border border-rose-500/40 bg-rose-900/20 text-rose-200 px-4 py-3 text-sm",children:f}),g&&(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-6 animate-pulse",children:Array.from({length:6}).map((e,t)=>(0,a.jsx)("div",{className:"h-40 bg-slate-800 rounded-xl"},t))}),!g&&0===s.length&&(0,a.jsxs)("div",{className:"text-center py-20 text-gray-400",children:[(0,a.jsx)(r.Z,{className:"h-16 w-16 text-gray-600 mx-auto mb-4"}),(0,a.jsx)("p",{children:"No blog posts found."}),(0,a.jsx)("button",{onClick:()=>N(!0),className:"inline-block mt-4 bg-teal-600 hover:bg-teal-500 text-white px-5 py-2 rounded-lg transition",children:"Add First Post"})]}),!g&&s.length>0&&(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-6",children:s.map(e=>(0,a.jsx)(m,{post:e,onDelete:z,onToggleStatus:J,updatingStatus:I===e._id},e._id))})]}),(0,a.jsx)("aside",{className:"w-full lg:w-80 shrink-0 space-y-4",children:(0,a.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-[#0f131a] p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(n.Z,{className:"h-5 w-5 text-teal-400"}),(0,a.jsx)("h2",{className:"text-sm font-semibold text-white",children:"Categories"})]}),(0,a.jsxs)("button",{onClick:()=>A(!0),className:"inline-flex items-center gap-1 text-xs bg-slate-800 border border-slate-700 px-2 py-1 rounded-lg text-white hover:bg-slate-700 transition",children:[(0,a.jsx)(i.Z,{className:"h-4 w-4"}),"Add"]})]}),D?(0,a.jsx)("div",{className:"space-y-2",children:Array.from({length:4}).map((e,t)=>(0,a.jsx)("div",{className:"h-12 bg-slate-800 rounded-lg animate-pulse"},t))}):0===w.length?(0,a.jsx)("div",{className:"text-sm text-slate-400 text-center py-6",children:"No categories yet."}):(0,a.jsx)("div",{className:"space-y-3",children:w.map(e=>(0,a.jsx)("div",{className:"rounded-xl border border-white/10 bg-[#11151c] p-3 hover:border-teal-600/40 transition",children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-white font-semibold text-sm",children:e.name}),(0,a.jsxs)("p",{className:"text-xs text-slate-400",children:["/",e.slug]}),e.createdAt&&(0,a.jsx)("p",{className:"text-[11px] text-slate-500 mt-1",children:new Date(e.createdAt).toLocaleDateString()})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>{O(e),L(!0)},className:"p-2 rounded-md bg-slate-800 hover:bg-slate-700 transition",title:"Edit",children:(0,a.jsx)(c.Z,{className:"h-4 w-4 text-teal-300"})}),(0,a.jsx)("button",{onClick:()=>q(e._id),className:"p-2 rounded-md bg-slate-800 hover:bg-rose-700 transition",title:"Delete",children:(0,a.jsx)(d.Z,{className:"h-4 w-4 text-rose-300"})})]})]})},e._id))}),(0,a.jsx)("p",{className:"text-[11px] text-slate-500 mt-3",children:"Categories linked to posts cannot be deleted until reassigned."})]})})]}),(0,a.jsx)(C,{open:j,onClose:()=>N(!1),onSaved:()=>{N(!1),M(),W()},categories:w}),(0,a.jsx)(y,{open:R||_,onClose:()=>{A(!1),P(!1)},onCategoryCreated:()=>{A(!1),P(!1),W(),U("Category added")}}),(0,a.jsx)(S,{open:E,category:F,onClose:()=>{L(!1),O(null)},onCategoryUpdated:()=>{L(!1),O(null),W(),U("Category updated")}})]})}},14663:function(e,t,s){"use strict";s.d(t,{W:function(){return r},t:function(){return l}});var a=s(57437);function l(e){let{status:t}=e,s="published"===t;return(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-[11px] font-semibold ".concat(s?"bg-emerald-600/20 text-emerald-200 border border-emerald-500/40":"bg-slate-700/60 text-slate-200 border border-slate-600"),children:s?"Published":"Draft"})}function r(e){let{status:t,onToggle:s,disabled:l}=e,r="published"===t;return(0,a.jsx)("button",{type:"button",onClick:s,disabled:l,className:"relative inline-flex h-7 w-12 items-center rounded-full border ".concat(r?"bg-emerald-600/30 border-emerald-400":"bg-slate-700 border-slate-500"," transition disabled:opacity-60"),"aria-label":"Toggle publish",children:(0,a.jsx)("span",{className:"absolute left-1 h-5 w-5 rounded-full bg-white transition-transform ".concat(r?"translate-x-5":"translate-x-0")})})}},32617:function(e,t,s){"use strict";s.d(t,{QW:function(){return c},R1:function(){return n},nc:function(){return d},pE:function(){return o},sg:function(){return i}});let a="http://localhost:5000/api".replace(/\/$/,""),l="".concat(a,"/api");async function r(e){let t=await e.json().catch(()=>({}));if(!e.ok){let s=Error((null==t?void 0:t.message)||"Request failed");throw s.status=e.status,s}return t}async function n(e){return r(await fetch("".concat(l).concat(e),{method:"GET",credentials:"include"}))}async function i(e,t){let s="undefined"!=typeof FormData&&t instanceof FormData;return r(await fetch("".concat(l).concat(e),{method:"POST",credentials:"include",headers:s?void 0:{"Content-Type":"application/json"},body:s?t:JSON.stringify(t||{})}))}async function o(e,t){let s="undefined"!=typeof FormData&&t instanceof FormData;return r(await fetch("".concat(l).concat(e),{method:"PUT",credentials:"include",headers:s?void 0:{"Content-Type":"application/json"},body:s?t:JSON.stringify(t||{})}))}async function c(e){return r(await fetch("".concat(l).concat(e),{method:"DELETE",credentials:"include"}))}async function d(e,t){return r(await fetch("".concat(l).concat(e),{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t||{})}))}},66610:function(e,t,s){"use strict";function a(e){var t;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Something went wrong";if(!e)return s;let a=(null===(t=e.response)||void 0===t?void 0:t.data)||e.data;if((null==a?void 0:a.errors)&&"object"==typeof a.errors){let e=Object.values(a.errors).flatMap(e=>Array.isArray(null==e?void 0:e._errors)?e._errors:[]).filter(Boolean);if(e.length)return e.join(", ")}return(null==a?void 0:a.message)?a.message:"string"==typeof e?e:e.message?e.message:s}s.d(t,{i:function(){return a}})}},function(e){e.O(0,[6458,7142,2972,7837,1618,2971,2117,1744],function(){return e(e.s=69447)}),_N_E=e.O()}]);