(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{609:function(e,t,n){Promise.resolve().then(n.bind(n,41181))},41181:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var a=n(57437),s=n(2265),r=n(27648),i=n(32617);let l=s.forwardRef(function(e,t){let{title:n,titleId:a,...r}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},r),n?s.createElement("title",{id:a},n):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"}))}),o=s.forwardRef(function(e,t){let{title:n,titleId:a,...r}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},r),n?s.createElement("title",{id:a},n):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))});var c=n(76098);let d=s.forwardRef(function(e,t){let{title:n,titleId:a,...r}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},r),n?s.createElement("title",{id:a},n):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});function m(){let[e,t]=(0,s.useState)({departmentsCount:0,doctorsCount:0,upcomingAppointmentsCount:0}),[n,r]=(0,s.useState)([]),[d,m]=(0,s.useState)([]),[f,v]=(0,s.useState)(!0),[g,w]=(0,s.useState)(null),j=new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"short",day:"numeric"});return((0,s.useEffect)(()=>{(async function(){v(!0),w(null);try{let[e,n,a]=await Promise.all([(0,i.R1)("/departments"),(0,i.R1)("/doctors"),(0,i.R1)("/appointments")]),s=(null==e?void 0:e.data)||[],l=(null==n?void 0:n.data)||[],o=(null==a?void 0:a.data)||[],c=new Date,d=o.filter(e=>!!e.date&&new Date(e.date)>=c),u=new Date;u.setDate(u.getDate()+1);let h=u.toISOString().split("T")[0],p=o.filter(e=>!!e.date&&(e.date.split("T")[0]||e.date)===h).slice(0,4),x=[...o].filter(e=>e.date).sort((e,t)=>new Date(t.date)-new Date(e.date)).slice(0,5);t({departmentsCount:s.length,doctorsCount:l.length,upcomingAppointmentsCount:d.length}),r(x),m(p)}catch(e){console.error("Failed to load dashboard data",e),w("Failed to load dashboard data.")}finally{v(!1)}})()},[]),f)?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"h-24 bg-slate-900/60 rounded-xl animate-pulse"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4",children:Array.from({length:4}).map((e,t)=>(0,a.jsx)("div",{className:"h-28 bg-slate-900/60 rounded-xl animate-pulse"},t))})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(u,{today:j}),g&&(0,a.jsx)("div",{className:"rounded-xl border border-rose-500/40 bg-rose-900/20 text-rose-200 px-4 py-3 text-sm",children:g}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4",children:[(0,a.jsx)(h,{icon:l,label:"Departments",value:e.departmentsCount,hint:"Active specialties"}),(0,a.jsx)(h,{icon:o,label:"Doctors",value:e.doctorsCount,hint:"Registered consultants"}),(0,a.jsx)(h,{icon:c.Z,label:"Upcoming appointments",value:e.upcomingAppointmentsCount,hint:"From today onwards"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[(0,a.jsx)(p,{tomorrowAppointments:d}),(0,a.jsx)(x,{recentAppointments:n})]})]})}function u(e){let{today:t}=e;return(0,a.jsxs)("div",{className:"mb-2 flex flex-col md:flex-row md:items-end md:justify-between gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-wide text-teal-400",children:"Admin Dashboard"}),(0,a.jsx)("h1",{className:"text-2xl font-semibold text-slate-50 mt-1",children:"Welcome back"}),(0,a.jsxs)("p",{className:"text-sm text-slate-400 mt-1",children:["Overview of today's activity \xb7 ",t]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(r.default,{href:"/admin/appointments",className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-teal-600 text-white text-sm font-medium hover:bg-teal-500 transition",children:[(0,a.jsx)(c.Z,{className:"h-4 w-4"}),"View appointments"]}),(0,a.jsxs)(r.default,{href:"/admin/doctors/new",className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-slate-800 text-slate-100 text-sm font-medium hover:bg-slate-700 transition",children:[(0,a.jsx)(d,{className:"h-4 w-4"}),"Add doctor"]})]})]})}function h(e){let{icon:t,label:n,value:s,hint:r}=e;return(0,a.jsxs)("div",{className:"rounded-xl border border-slate-800 bg-slate-900/60 px-4 py-4 flex items-center justify-between gap-3 shadow-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:n}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-slate-50 mt-1",children:s}),r&&(0,a.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:r})]}),(0,a.jsx)("div",{className:"h-10 w-10 rounded-full bg-teal-600/20 flex items-center justify-center",children:(0,a.jsx)(t,{className:"h-5 w-5 text-teal-400"})})]})}function p(e){let{tomorrowAppointments:t}=e;return(0,a.jsxs)("section",{className:"border border-white/5 bg-[#0e1217] rounded-xl p-6 space-y-3",children:[(0,a.jsx)("h3",{className:"font-semibold text-white",children:"Tomorrow's Appointments"}),0===t.length?(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"No appointments scheduled for tomorrow."}):(0,a.jsx)("ul",{className:"space-y-2 text-gray-300 text-sm",children:t.map(e=>{var t;return(0,a.jsxs)("li",{children:[function(e){if(!e)return"";try{let[t,n]=e.split(":"),a=parseInt(t,10),s="AM";return 0===a?(a=12,s="AM"):12===a?s="PM":a>12&&(a-=12,s="PM"),"".concat(a,":").concat(n," ").concat(s)}catch(t){return e}}(e.date,e.time)," — ",e.patientName||"Patient"," (",e.doctorName||(null===(t=e.doctor)||void 0===t?void 0:t.name)||"Doctor",")"]},e._id)})}),(0,a.jsx)(r.default,{href:"/admin/appointments",className:"text-teal-400 text-sm hover:underline",children:"View full calendar →"})]})}function x(e){let{recentAppointments:t}=e;return(0,a.jsxs)("section",{className:"border border-white/5 bg-[#0e1217] rounded-xl p-6 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"font-semibold text-white",children:"Recent Appointments"}),(0,a.jsx)(r.default,{href:"/admin/appointments",className:"text-teal-400 text-sm hover:underline",children:"View all"})]}),0===t.length?(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"No recent appointments."}):(0,a.jsx)("ul",{className:"space-y-2 text-gray-300 text-sm",children:t.map(e=>{var t;return(0,a.jsxs)("li",{className:"flex justify-between",children:[(0,a.jsxs)("span",{children:[e.patientName||"Patient"," \xb7 ",e.doctorName||(null===(t=e.doctor)||void 0===t?void 0:t.name)||"Doctor"]}),(0,a.jsx)("span",{className:"text-gray-500 text-xs",children:e.date?new Date(e.date).toLocaleDateString():""})]},e._id)})})]})}},32617:function(e,t,n){"use strict";n.d(t,{QW:function(){return d},R1:function(){return l},f8:function(){return r},nc:function(){return m},pE:function(){return c},sg:function(){return o}});let a="http://localhost:5000/api".replace(/\/$/,""),s=a.endsWith("/api")?a:"".concat(a,"/api");function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.startsWith("/")?e:"/".concat(e),n="".concat(s).concat(t);return console.log("[api] request url:",n),n}async function i(e){let t=await e.json().catch(()=>({}));if(!e.ok){let n=Error((null==t?void 0:t.message)||"Request failed");throw n.status=e.status,n}return t}async function l(e){return i(await fetch(r(e),{method:"GET",credentials:"include"}))}async function o(e,t){let n="undefined"!=typeof FormData&&t instanceof FormData;return i(await fetch(r(e),{method:"POST",credentials:"include",headers:n?void 0:{"Content-Type":"application/json"},body:n?t:JSON.stringify(t||{})}))}async function c(e,t){let n="undefined"!=typeof FormData&&t instanceof FormData;return i(await fetch(r(e),{method:"PUT",credentials:"include",headers:n?void 0:{"Content-Type":"application/json"},body:n?t:JSON.stringify(t||{})}))}async function d(e){return i(await fetch(r(e),{method:"DELETE",credentials:"include"}))}async function m(e,t){return i(await fetch(r(e),{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t||{})}))}},27648:function(e,t,n){"use strict";n.d(t,{default:function(){return s.a}});var a=n(72972),s=n.n(a)},76098:function(e,t,n){"use strict";var a=n(2265);let s=a.forwardRef(function(e,t){let{title:n,titleId:s,...r}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),n?a.createElement("title",{id:s},n):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z"}))});t.Z=s}},function(e){e.O(0,[2972,2971,2117,1744],function(){return e(e.s=609)}),_N_E=e.O()}]);