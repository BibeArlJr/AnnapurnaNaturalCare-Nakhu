(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6008],{23945:function(e,t,a){Promise.resolve().then(a.bind(a,65082))},65082:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return o}});var n=a(57437),s=a(2265),i=a(32617),l=a(66610);let r=[{key:"inside_valley",label:"Inside Valley"},{key:"outside_valley",label:"Outside Valley"}];function o(){let[e,t]=(0,s.useState)([]),[a,o]=(0,s.useState)(!0),[c,d]=(0,s.useState)(r[0].key),[u,x]=(0,s.useState)(""),[p,h]=(0,s.useState)(null),[f,m]=(0,s.useState)(""),[g,y]=(0,s.useState)(!1),b=async()=>{o(!0);try{let e=await (0,i.R1)("/retreat-destinations?type=".concat(c));t((null==e?void 0:e.data)||e||[])}catch(e){console.error("Retreat destinations load error:",e)}finally{o(!1)}};(0,s.useEffect)(()=>{b()},[c]);let v=async()=>{if(u.trim()){y(!0);try{await (0,i.sg)("/retreat-destinations",{name:u.trim(),type:c}),x(""),b()}catch(e){alert((0,l.i)(e,"Failed to add destination"))}finally{y(!1)}}},j=e=>{h(e._id),m(e.name)},N=async()=>{if(!p||!f.trim()){h(null),m("");return}y(!0);try{await (0,i.pE)("/retreat-destinations/".concat(p),{name:f.trim(),type:c}),h(null),m(""),b()}catch(e){alert((0,l.i)(e,"Failed to update destination"))}finally{y(!1)}},w=async e=>{try{await (0,i.nc)("/retreat-destinations/".concat(e,"/toggle")),t(t=>t.map(t=>t._id===e?{...t,isActive:!t.isActive}:t))}catch(e){alert((0,l.i)(e,"Failed to toggle destination"))}},k=async e=>{if(confirm("Delete this destination?"))try{await (0,i.QW)("/retreat-destinations/".concat(e)),t(t=>t.filter(t=>t._id!==e))}catch(e){alert((0,l.i)(e,"Failed to delete destination"))}},_=(0,s.useMemo)(()=>e||[],[e]);return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)("div",{className:"flex items-center justify-between",children:(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-semibold text-white",children:"Retreat Destinations"}),(0,n.jsx)("p",{className:"text-sm text-slate-400",children:"Manage destinations by category for retreat programs."})]})}),(0,n.jsx)("div",{className:"flex flex-wrap gap-2",children:r.map(e=>{let t=e.key===c;return(0,n.jsx)("button",{onClick:()=>d(e.key),className:"px-4 py-2 rounded-lg text-sm font-semibold border transition ".concat(t?"bg-teal-600 text-white border-teal-500":"bg-slate-900 border-slate-700 text-slate-200"),children:e.label},e.key)})}),(0,n.jsx)("div",{className:"bg-slate-900 border border-slate-800 rounded-xl p-4 space-y-3",children:(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,n.jsx)("input",{value:u,onChange:e=>x(e.target.value),placeholder:"Destination name",className:"flex-1 bg-slate-800 border border-slate-700 rounded-lg px-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-teal-500"}),(0,n.jsx)("button",{onClick:v,disabled:g,className:"px-4 py-3 rounded-lg bg-teal-600 text-white hover:bg-teal-500 transition disabled:opacity-70",children:"Add"})]})}),a?(0,n.jsx)("p",{className:"text-slate-400 text-sm",children:"Loading..."}):0===_.length?(0,n.jsx)("div",{className:"text-slate-400 text-sm bg-slate-900 border border-slate-800 rounded-lg p-6",children:"No destinations in this category yet."}):(0,n.jsxs)("div",{className:"border border-slate-800 rounded-xl overflow-hidden bg-slate-900",children:[(0,n.jsxs)("div",{className:"grid grid-cols-12 px-4 py-3 text-xs uppercase tracking-wide text-slate-400 border-b border-slate-800",children:[(0,n.jsx)("span",{className:"col-span-6",children:"Name"}),(0,n.jsx)("span",{className:"col-span-2",children:"Status"}),(0,n.jsx)("span",{className:"col-span-4 text-right",children:"Actions"})]}),_.map(e=>{let t=p===e._id;return(0,n.jsxs)("div",{className:"grid grid-cols-12 px-4 py-3 text-sm text-white border-b border-slate-800 last:border-b-0 items-center",children:[(0,n.jsx)("div",{className:"col-span-6",children:t?(0,n.jsx)("input",{value:f,onChange:e=>m(e.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-white",autoFocus:!0}):(0,n.jsx)("span",{className:"font-semibold",children:e.name})}),(0,n.jsx)("div",{className:"col-span-2",children:(0,n.jsx)("button",{onClick:()=>w(e._id),className:"inline-flex items-center px-3 py-1 rounded-full text-xs ".concat(e.isActive?"bg-green-900/60 text-green-300":"bg-slate-800 text-slate-300"),children:e.isActive?"Active":"Inactive"})}),(0,n.jsx)("div",{className:"col-span-4 flex justify-end gap-2",children:t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{onClick:N,disabled:g,className:"px-3 py-1 rounded-lg bg-teal-600 text-white text-sm hover:bg-teal-500 disabled:opacity-70",children:"Save"}),(0,n.jsx)("button",{onClick:()=>{h(null),m("")},className:"px-3 py-1 rounded-lg bg-slate-800 text-slate-200 text-sm",children:"Cancel"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{onClick:()=>j(e),className:"px-3 py-1 rounded-lg bg-slate-800 hover:bg-slate-700 text-slate-100 text-sm",children:"Edit"}),(0,n.jsx)("button",{onClick:()=>k(e._id),className:"px-3 py-1 rounded-lg bg-red-900/60 hover:bg-red-800 text-red-100 text-sm",children:"Delete"})]})})]},e._id)})]})]})}},32617:function(e,t,a){"use strict";a.d(t,{QW:function(){return d},R1:function(){return r},f8:function(){return i},nc:function(){return u},pE:function(){return c},sg:function(){return o}});let n="http://localhost:5000/api".replace(/\/$/,""),s=n.endsWith("/api")?n:"".concat(n,"/api");function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.startsWith("/")?e:"/".concat(e),a="".concat(s).concat(t);return console.log("[api] request url:",a),a}async function l(e){let t=await e.json().catch(()=>({}));if(!e.ok){let a=Error((null==t?void 0:t.message)||"Request failed");throw a.status=e.status,a}return t}async function r(e){return l(await fetch(i(e),{method:"GET",credentials:"include"}))}async function o(e,t){let a="undefined"!=typeof FormData&&t instanceof FormData;return l(await fetch(i(e),{method:"POST",credentials:"include",headers:a?void 0:{"Content-Type":"application/json"},body:a?t:JSON.stringify(t||{})}))}async function c(e,t){let a="undefined"!=typeof FormData&&t instanceof FormData;return l(await fetch(i(e),{method:"PUT",credentials:"include",headers:a?void 0:{"Content-Type":"application/json"},body:a?t:JSON.stringify(t||{})}))}async function d(e){return l(await fetch(i(e),{method:"DELETE",credentials:"include"}))}async function u(e,t){return l(await fetch(i(e),{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t||{})}))}},66610:function(e,t,a){"use strict";function n(e){var t;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Something went wrong";if(!e)return a;let n=(null===(t=e.response)||void 0===t?void 0:t.data)||e.data;if((null==n?void 0:n.errors)&&"object"==typeof n.errors){let e=Object.values(n.errors).flatMap(e=>Array.isArray(null==e?void 0:e._errors)?e._errors:[]).filter(Boolean);if(e.length)return e.join(", ")}return(null==n?void 0:n.message)?n.message:"string"==typeof e?e:e.message?e.message:a}a.d(t,{i:function(){return n}})}},function(e){e.O(0,[2971,2117,1744],function(){return e(e.s=23945)}),_N_E=e.O()}]);