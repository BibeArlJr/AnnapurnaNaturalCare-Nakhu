(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3461],{69870:function(e,s,l){Promise.resolve().then(l.bind(l,49626))},49626:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return b}});var t=l(57437),a=l(2265),i=l(32617),r=l(66610),n=l(43836),o=l(99588),d=l(61601),c=l(46243),m=l(65223),x=l(14663),u=l(30166);l(98527);let g=(0,u.default)(()=>Promise.all([l.e(3070),l.e(1804)]).then(l.t.bind(l,5600,23)),{loadableGenerated:{webpack:()=>[5600]},ssr:!1}),h={title:"",slug:"",shortDescription:"",longDescription:"",durationInDays:"",modesAvailable:[],pricing:{online:"",residential:"",dayVisitor:""},inclusions:[""],outcomes:[""],coverImage:"",galleryImages:[],promoVideos:[],videoUrl:"",isPublished:!1},p=[{value:"online",label:"Online"},{value:"residential",label:"Residential"},{value:"dayVisitor",label:"Day visitor"}];function b(){let[e,s]=(0,a.useState)([]),[l,u]=(0,a.useState)(!0),[b,v]=(0,a.useState)(!1),[j,f]=(0,a.useState)(h),[y,N]=(0,a.useState)(null),[w,k]=(0,a.useState)(!1),[C,I]=(0,a.useState)(!1),[D,V]=(0,a.useState)(null),P=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.toString().toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")},E=async()=>{u(!0);try{let e=await (0,i.R1)("/health-programs");s((null==e?void 0:e.data)||e||[])}catch(e){console.error("Health programs admin load error:",e)}finally{u(!1)}};(0,a.useEffect)(()=>{E()},[]);let A=async e=>{V(e._id);try{let l=await (0,i.pE)("/health-programs/".concat(e._id),{isPublished:!e.isPublished}),t=(null==l?void 0:l.data)||l;s(s=>s.map(s=>s._id===e._id?{...s,...t}:s))}catch(e){alert((0,r.i)(e,"Failed to update publish status"))}finally{V(null)}},L=e=>{var s,l,t,a,i,r,n,o,d;N(e),f({...h,...e,durationInDays:e.durationInDays||"",pricing:{online:null!==(n=null===(s=e.pricing)||void 0===s?void 0:s.online)&&void 0!==n?n:"",residential:null!==(o=null===(l=e.pricing)||void 0===l?void 0:l.residential)&&void 0!==o?o:"",dayVisitor:null!==(d=null===(t=e.pricing)||void 0===t?void 0:t.dayVisitor)&&void 0!==d?d:""},inclusions:(null===(a=e.inclusions)||void 0===a?void 0:a.length)?e.inclusions:[""],outcomes:(null===(i=e.outcomes)||void 0===i?void 0:i.length)?e.outcomes:[""],galleryImages:e.galleryImages||[],promoVideos:e.promoVideos||[],videoUrl:e.videoUrl||(e.promoVideos&&(null===(r=e.promoVideos[0])||void 0===r?void 0:r.url)?e.promoVideos[0].url:""),coverImage:e.coverImage||""}),I(!0),v(!0)},S=e=>{let{name:s,value:l,type:t,checked:a}=e.target;if(s.startsWith("pricing.")){let e=s.split(".")[1];f(s=>({...s,pricing:{...s.pricing,[e]:l}}));return}let i="checkbox"===t?a:l;if("title"===s&&!C){f(e=>({...e,title:i,slug:P(i)}));return}"slug"===s&&I(!0),f(e=>({...e,[s]:i}))},_=e=>{f(s=>{let l=s.modesAvailable.includes(e);return{...s,modesAvailable:l?s.modesAvailable.filter(s=>s!==e):[...s.modesAvailable,e]}})},U=(e,s,l)=>{f(t=>{let a=[...t[e]];return a[s]=l,{...t,[e]:a}})},O=e=>f(s=>({...s,[e]:[...s[e],""]})),Z=(e,s)=>f(l=>({...l,[e]:l[e].filter((e,l)=>l!==s)})),R=async()=>{if(!j.title.trim()){alert("Title is required");return}k(!0);try{let e={title:j.title,slug:j.slug,shortDescription:j.shortDescription,longDescription:j.longDescription,durationInDays:j.durationInDays?Number(j.durationInDays):void 0,modesAvailable:j.modesAvailable,pricing:{online:""===j.pricing.online?0:Number(j.pricing.online),residential:""===j.pricing.residential?0:Number(j.pricing.residential),dayVisitor:""===j.pricing.dayVisitor?0:Number(j.pricing.dayVisitor)},inclusions:j.inclusions.filter(e=>e&&e.trim()),outcomes:j.outcomes.filter(e=>e&&e.trim()),coverImage:j.coverImage,galleryImages:j.galleryImages,promoVideos:[...j.promoVideos,j.videoUrl].filter(Boolean).map(e=>({type:"url",url:e})),videoUrl:j.videoUrl,isPublished:j.isPublished};y?await (0,i.pE)("/health-programs/".concat(y._id),e):await (0,i.sg)("/health-programs",e),v(!1),N(null),f(h),E()}catch(e){alert((0,r.i)(e,"Failed to save program"))}finally{k(!1)}},H=async e=>{if(confirm("Delete this program?"))try{await (0,i.QW)("/health-programs/".concat(e)),E()}catch(e){alert((0,r.i)(e,"Delete failed"))}};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold text-white",children:"Health Programs"}),(0,t.jsx)("p",{className:"text-sm text-slate-400",children:"Manage online, residential, and day visitor programs."})]}),(0,t.jsxs)("button",{onClick:()=>{f(h),N(null),I(!1),v(!0)},className:"inline-flex items-center gap-2 bg-teal-600 hover:bg-teal-500 text-white px-4 py-2 rounded-lg transition",children:[(0,t.jsx)(n.Z,{className:"h-5 w-5"}),"Add Program"]})]}),l?(0,t.jsx)("p",{className:"text-slate-400 text-sm",children:"Loading..."}):0===e.length?(0,t.jsx)("div",{className:"text-slate-400 text-sm bg-slate-900 border border-slate-800 rounded-lg p-6",children:"No programs yet."}):(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-4",children:e.map(e=>(0,t.jsxs)("div",{className:"rounded-xl border border-white/10 bg-[#0f131a] p-4 space-y-3 shadow-sm",children:[(0,t.jsx)("div",{className:"rounded-lg overflow-hidden bg-slate-800 h-32 border border-slate-800",children:e.coverImage?(0,t.jsx)("img",{src:e.coverImage,alt:e.title,className:"w-full h-full object-cover"}):(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center text-slate-500 text-xs",children:"No image"})}),(0,t.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("p",{className:"text-white font-semibold line-clamp-2",children:e.title}),(0,t.jsx)("p",{className:"text-xs text-slate-400",children:e.slug})]}),(0,t.jsxs)("div",{className:"flex flex-col items-end gap-1",children:[(0,t.jsx)("span",{className:"px-3 py-1 rounded-full text-xs ".concat(e.isPublished?"bg-green-900/60 text-green-300":"bg-slate-800 text-slate-300"),children:e.isPublished?"Published":"Draft"}),(0,t.jsx)(x.W,{status:e.isPublished?"published":"draft",onToggle:()=>A(e),disabled:D===e._id})]})]}),(0,t.jsx)("p",{className:"text-sm text-slate-300 line-clamp-2",children:e.shortDescription}),(0,t.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,t.jsxs)("button",{onClick:()=>L(e),className:"inline-flex items-center gap-1 px-3 py-1.5 rounded-lg bg-slate-800 hover:bg-slate-700 text-slate-100 text-sm",children:[(0,t.jsx)(o.Z,{className:"h-4 w-4"}),"Edit"]}),(0,t.jsxs)("button",{onClick:()=>H(e._id),className:"inline-flex items-center gap-1 px-3 py-1.5 rounded-lg bg-red-900/60 hover:bg-red-800 text-red-100 text-sm",children:[(0,t.jsx)(d.Z,{className:"h-4 w-4"}),"Delete"]})]})]},e._id))}),b&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center px-4 py-8",children:(0,t.jsxs)("div",{className:"w-full max-w-5xl max-h-[90vh] bg-[#0f131a] border border-white/10 rounded-2xl shadow-2xl overflow-hidden flex flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-slate-800",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h2",{className:"text-xl font-semibold text-white",children:[y?"Edit":"Add"," Health Program"]}),(0,t.jsx)("p",{className:"text-sm text-slate-400",children:"Standalone programs separate from health packages."})]}),(0,t.jsx)("button",{onClick:()=>v(!1),className:"text-slate-400 hover:text-white text-xl leading-none",children:"\xd7"})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto px-6 py-4 space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-sm text-slate-300",children:"Title"}),(0,t.jsx)("input",{name:"title",value:j.title,onChange:S,className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white"})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-sm text-slate-300",children:"Slug"}),(0,t.jsx)("input",{name:"slug",value:j.slug,onChange:S,className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white"})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-sm text-slate-300",children:"Short description"}),(0,t.jsx)("input",{name:"shortDescription",value:j.shortDescription,onChange:S,className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white"})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-sm text-slate-300",children:"Duration (days)"}),(0,t.jsx)("input",{name:"durationInDays",type:"number",value:j.durationInDays,onChange:S,className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white"})]})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-sm text-slate-300",children:"Overview"}),(0,t.jsx)("div",{className:"bg-slate-900 border border-slate-700 rounded-lg",children:(0,t.jsx)(g,{theme:"snow",value:j.longDescription,onChange:e=>f(s=>({...s,longDescription:e}))})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm text-slate-300",children:"Available modes"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:p.map(e=>{let s=j.modesAvailable.includes(e.value);return(0,t.jsx)("button",{type:"button",onClick:()=>_(e.value),className:"px-3 py-1 rounded-full border text-xs ".concat(s?"bg-teal-900/40 border-teal-500 text-teal-200":"bg-slate-900 border-slate-700 text-slate-300"),children:e.label},e.value)})})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:["online","residential","dayVisitor"].map(e=>(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("label",{className:"text-sm text-slate-300 capitalize",children:[e," price (USD)"]}),(0,t.jsx)("input",{name:"pricing.".concat(e),type:"number",value:j.pricing[e],onChange:S,className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white"})]},e))}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("label",{className:"text-sm text-slate-300",children:"Inclusions"}),(0,t.jsx)("button",{onClick:()=>O("inclusions"),className:"text-xs text-teal-300",children:"+ Add"})]}),(0,t.jsx)("div",{className:"space-y-2",children:j.inclusions.map((e,s)=>(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{value:e,onChange:e=>U("inclusions",s,e.target.value),className:"flex-1 bg-slate-900 border border-slate-700 rounded-lg px-4 py-2 text-white",placeholder:"Inclusion"}),j.inclusions.length>1&&(0,t.jsx)("button",{onClick:()=>Z("inclusions",s),className:"px-3 py-2 rounded-lg bg-red-900/50 text-red-100",children:"Remove"})]},s))})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("label",{className:"text-sm text-slate-300",children:"Outcomes"}),(0,t.jsx)("button",{onClick:()=>O("outcomes"),className:"text-xs text-teal-300",children:"+ Add"})]}),(0,t.jsx)("div",{className:"space-y-2",children:j.outcomes.map((e,s)=>(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{value:e,onChange:e=>U("outcomes",s,e.target.value),className:"flex-1 bg-slate-900 border border-slate-700 rounded-lg px-4 py-2 text-white",placeholder:"Outcome"}),j.outcomes.length>1&&(0,t.jsx)("button",{onClick:()=>Z("outcomes",s),className:"px-3 py-2 rounded-lg bg-red-900/50 text-red-100",children:"Remove"})]},s))})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm text-slate-300",children:"Cover image"}),(0,t.jsx)(c.Z,{accept:"image/*",maxItems:1,value:j.coverImage?[j.coverImage]:[],onChange:e=>f(s=>({...s,coverImage:e[0]||""}))})]}),(0,t.jsx)(m.Z,{title:"Gallery & promo videos",images:j.galleryImages,setImages:e=>f(s=>({...s,galleryImages:e.slice(0,10)})),videos:j.promoVideos,setVideos:e=>f(s=>({...s,promoVideos:e.slice(0,3)})),maxImages:10,maxVideos:3,showVideoUpload:!1}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-sm text-slate-300",children:"YouTube link (optional)"}),(0,t.jsx)("input",{type:"text",value:j.videoUrl,onChange:e=>f(s=>({...s,videoUrl:e.target.value})),placeholder:"Paste a YouTube URL",className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white"})]})]}),(0,t.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,t.jsx)("input",{type:"checkbox",name:"isPublished",checked:j.isPublished,onChange:S}),(0,t.jsx)("label",{className:"text-sm text-slate-300",children:"Published"})]})]}),(0,t.jsxs)("div",{className:"px-6 py-4 border-t border-slate-800 flex justify-end gap-3",children:[(0,t.jsx)("button",{onClick:()=>v(!1),className:"px-4 py-2 rounded-lg bg-slate-800 text-white",children:"Cancel"}),(0,t.jsx)("button",{onClick:R,disabled:w,className:"px-4 py-2 rounded-lg bg-teal-600 text-white disabled:opacity-60",children:w?"Saving...":y?"Save changes":"Create Program"})]})]})})]})}},99588:function(e,s,l){"use strict";var t=l(2265);let a=t.forwardRef(function(e,s){let{title:l,titleId:a,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},i),l?t.createElement("title",{id:a},l):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"}))});s.Z=a},43836:function(e,s,l){"use strict";var t=l(2265);let a=t.forwardRef(function(e,s){let{title:l,titleId:a,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},i),l?t.createElement("title",{id:a},l):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))});s.Z=a},61601:function(e,s,l){"use strict";var t=l(2265);let a=t.forwardRef(function(e,s){let{title:l,titleId:a,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},i),l?t.createElement("title",{id:a},l):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))});s.Z=a}},function(e){e.O(0,[6458,5915,2971,2117,1744],function(){return e(e.s=69870)}),_N_E=e.O()}]);