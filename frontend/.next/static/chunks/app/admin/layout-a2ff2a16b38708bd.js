(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9091],{49110:function(e,t,a){Promise.resolve().then(a.bind(a,96813))},96813:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return v}});var n=a(57437),r=a(27648),l=a(99376),s=a(2265);let i=s.forwardRef(function(e,t){let{title:a,titleId:n,...r}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},r),a?s.createElement("title",{id:n},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}),o=s.forwardRef(function(e,t){let{title:a,titleId:n,...r}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},r),a?s.createElement("title",{id:n},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z"}))}),c=s.forwardRef(function(e,t){let{title:a,titleId:n,...r}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},r),a?s.createElement("title",{id:n},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))});var d=a(76098);let u=s.forwardRef(function(e,t){let{title:a,titleId:n,...r}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},r),a?s.createElement("title",{id:n},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 7.5h1.5m-1.5 3h1.5m-7.5 3h7.5m-7.5 3h7.5m3-9h3.375c.621 0 1.125.504 1.125 1.125V18a2.25 2.25 0 0 1-2.25 2.25M16.5 7.5V18a2.25 2.25 0 0 0 2.25 2.25M16.5 7.5V4.875c0-.621-.504-1.125-1.125-1.125H4.125C3.504 3.75 3 4.254 3 4.875V18a2.25 2.25 0 0 0 2.25 2.25h13.5M6 7.5h3v3H6v-3Z"}))});var h=a(19967);let m=s.forwardRef(function(e,t){let{title:a,titleId:n,...r}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},r),a?s.createElement("title",{id:n},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"}))}),f=s.forwardRef(function(e,t){let{title:a,titleId:n,...r}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},r),a?s.createElement("title",{id:n},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m6.115 5.19.319 1.913A6 6 0 0 0 8.11 10.36L9.75 12l-.387.775c-.217.433-.132.956.21 1.298l1.348 1.348c.21.21.329.497.329.795v1.089c0 .426.24.815.622 1.006l.153.076c.433.217.956.132 1.298-.21l.723-.723a8.7 8.7 0 0 0 2.288-4.042 1.087 1.087 0 0 0-.358-1.099l-1.33-1.108c-.251-.21-.582-.299-.905-.245l-1.17.195a1.125 1.125 0 0 1-.98-.314l-.295-.295a1.125 1.125 0 0 1 0-1.591l.13-.132a1.125 1.125 0 0 1 1.3-.21l.603.302a.809.809 0 0 0 1.086-1.086L14.25 7.5l1.256-.837a4.5 4.5 0 0 0 1.528-1.732l.146-.292M6.115 5.19A9 9 0 1 0 17.18 4.64M6.115 5.19A8.965 8.965 0 0 1 12 3c1.929 0 3.716.607 5.18 1.64"}))}),g=s.forwardRef(function(e,t){let{title:a,titleId:n,...r}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},r),a?s.createElement("title",{id:n},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}),p=s.forwardRef(function(e,t){let{title:a,titleId:n,...r}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},r),a?s.createElement("title",{id:n},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))});var b=a(1233),x=a(32617);function v(e){let{children:t}=e,a=(0,l.usePathname)(),v=(0,l.useRouter)(),{user:w,loading:k,logout:y}=(0,b.a)(),[j,E]=(0,s.useState)({retreatBookings:0,healthPackages:0,healthPrograms:0,courses:0}),N=[{href:"/admin",label:"Dashboard",icon:i},{href:"/admin/departments",label:"Departments",icon:o},{href:"/admin/doctors",label:"Doctors",icon:c},{label:"Appointments",icon:d.Z,children:[{href:"/admin/appointments",label:"General"},{href:"/admin/appointments/calendar",label:"Calendar"}]},{href:"/admin/blogs",label:"Blog Articles",icon:u},{href:"/admin/reviews",label:"Patient Reviews",icon:u},{href:"/admin/gallery",label:"Gallery",icon:h.Z},{href:"/admin/hero-images",label:"Hero Banner Images",icon:h.Z},{label:"Health Packages",icon:m,countKey:"healthPackages",children:[{href:"/admin/packages",label:"Manage Packages"},{href:"/admin/package-bookings",label:"Package Bookings",countKey:"healthPackages"},{href:"/admin/package-bookings/calendar",label:"Calendar"},{href:"/admin/treatment-types",label:"Treatment Types"}]},{label:"Retreat Program",icon:f,countKey:"retreatBookings",children:[{href:"/admin/retreat-programs",label:"Manage Programs"},{href:"/admin/retreat-destinations",label:"Retreat Destinations"},{href:"/admin/retreat-partner-hotels",label:"Partner Hotels"},{href:"/admin/retreat-bookings",label:"Retreat Bookings",countKey:"retreatBookings"}]},{label:"Health Programs",icon:m,countKey:"healthPrograms",children:[{href:"/admin/health-programs",label:"Manage Programs"},{href:"/admin/health-program-bookings",label:"Health Program Bookings",countKey:"healthPrograms"}]},{label:"Courses",icon:o,countKey:"courses",children:[{href:"/admin/courses",label:"Manage Courses"},{href:"/admin/course-categories",label:"Course Categories"},{href:"/admin/course-bookings",label:"Course Bookings",countKey:"courses"}]},{href:"/admin/billing",label:"Billing",icon:g}],P="/admin/login"===a,[C,L]=(0,s.useState)(()=>{let e={};return N.forEach(t=>{t.children&&(e[t.label]=t.children.some(e=>a.startsWith(e.href)))}),e});if((0,s.useEffect)(()=>{k||P||w&&"admin"===w.role||v.push("/admin/login")},[w,k,P,v]),(0,s.useEffect)(()=>{async function e(){try{let e=await (0,x.R1)("/admin/unseen-counts"),t=(null==e?void 0:e.data)||e||{};E(e=>({...e,...t}))}catch(e){}}P||e()},[P]),(0,s.useEffect)(()=>{let e=e=>E(t=>({...t,[e]:0}));a.startsWith("/admin/retreat-bookings")&&e("retreatBookings"),a.startsWith("/admin/package-bookings")&&e("healthPackages"),a.startsWith("/admin/health-program-bookings")&&e("healthPrograms"),a.startsWith("/admin/course-bookings")&&e("courses")},[a]),!P&&(k||!w&&!k))return(0,n.jsx)("div",{className:"p-6",children:"Loading admin..."});if(P)return t;let A=e=>a===e?"bg-teal-600 text-white":"text-slate-300 hover:bg-slate-800",M=e=>e?(0,n.jsx)("span",{className:"absolute -top-2 -right-2 min-w-[20px] px-1.5 h-5 rounded-full bg-rose-600 text-white text-[10px] font-semibold flex items-center justify-center shadow-lg transition-opacity",children:e>99?"99+":e}):null;return(0,n.jsxs)("div",{className:"min-h-screen bg-slate-950 text-slate-100 flex",children:[(0,n.jsxs)("aside",{className:"hidden md:flex md:flex-col w-64 bg-slate-900 border-r border-slate-800",children:[(0,n.jsx)("div",{className:"h-16 flex items-center px-6 border-b border-slate-800",children:(0,n.jsxs)(r.default,{href:"/admin",className:"flex items-center gap-2",children:[(0,n.jsx)("img",{src:"/images/logo.png",alt:"Logo",className:"h-9 w-9 rounded-md object-cover"}),(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("span",{className:"text-sm font-semibold tracking-tight",children:"Admin Panel"}),(0,n.jsx)("span",{className:"text-xs text-slate-400",children:"Annapurna Nature Cure"})]})]})}),(0,n.jsx)("nav",{className:"flex-1 px-3 py-4 space-y-1 overflow-y-auto",children:N.map(e=>{let t=e.icon;if(e.children){let a=C[e.label];return(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsxs)("button",{type:"button",onClick:()=>{var t;return t=e.label,void L(e=>({...e,[t]:!e[t]}))},className:"relative w-full flex items-center justify-between gap-3 px-3 py-2 rounded-lg text-sm transition ".concat(a?"bg-slate-800 text-white":"text-slate-300 hover:bg-slate-800"),children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)(t,{className:"h-5 w-5"}),(0,n.jsxs)("span",{className:"relative inline-block",children:[e.label,M(e.countKey?j[e.countKey]:0)]})]}),(0,n.jsx)("span",{className:"text-xs text-slate-400",children:a?"âˆ’":"+"})]}),a&&(0,n.jsx)("div",{className:"pl-9 space-y-1",children:e.children.map(e=>(0,n.jsx)(r.default,{href:e.href,className:"relative flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition ".concat(A(e.href)),children:(0,n.jsxs)("span",{className:"relative inline-block",children:[e.label,M(e.countKey?j[e.countKey]:0)]})},e.href))})]},e.label)}return(0,n.jsxs)(r.default,{href:e.href,className:"relative flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition ".concat(A(e.href)),children:[(0,n.jsx)(t,{className:"h-5 w-5"}),(0,n.jsxs)("span",{className:"relative inline-block",children:[e.label,M(e.countKey?j[e.countKey]:0)]})]},e.href)})}),(0,n.jsx)("div",{className:"border-t border-slate-800 p-4",children:(0,n.jsxs)("button",{type:"button",onClick:y,className:"w-full inline-flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm bg-slate-800 hover:bg-slate-700 text-slate-200",children:[(0,n.jsx)(p,{className:"h-5 w-5"}),(0,n.jsx)("span",{children:"Logout"})]})})]}),(0,n.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,n.jsxs)("header",{className:"h-16 flex items-center justify-between px-4 md:px-6 border-b border-slate-800 bg-slate-900/80 backdrop-blur",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Admin dashboard"}),(0,n.jsx)("h1",{className:"text-sm md:text-base font-semibold text-slate-50",children:function(){for(let e of N){if(e.href&&a.startsWith(e.href))return e.label;if(e.children){for(let t of e.children)if(a.startsWith(t.href))return t.label}}return"Overview"}()})]}),(0,n.jsx)("div",{className:"text-xs text-slate-300",children:(null==w?void 0:w.email)?"Logged in as ".concat(w.email):""})]}),(0,n.jsx)("main",{className:"flex-1 overflow-y-auto bg-slate-950",children:(0,n.jsx)("div",{className:"max-w-6xl mx-auto px-4 md:px-6 py-6 md:py-8",children:t})})]})]})}},1233:function(e,t,a){"use strict";a.d(t,{AuthProvider:function(){return o},a:function(){return c}});var n=a(57437),r=a(2265),l=a(99376),s=a(32617);let i=(0,r.createContext)(null);function o(e){let{children:t}=e,[a,o]=(0,r.useState)(null),[c,d]=(0,r.useState)(!0),[u,h]=(0,r.useState)(""),m=(0,l.useRouter)();async function f(){try{let e=await (0,s.R1)("/auth/me");o(e.data||null),h("")}catch(e){o(null),h("")}finally{d(!1)}}async function g(e,t){d(!0);try{let a=await (0,s.sg)("/auth/login",{email:e,password:t});o(a.data||null),h(""),m.push("/admin")}catch(e){throw h(e.message||"Login failed"),o(null),e}finally{d(!1)}}async function p(){try{await (0,s.sg)("/auth/logout")}catch(e){}o(null),m.push("/admin/login")}return(0,r.useEffect)(()=>{f()},[]),(0,n.jsx)(i.Provider,{value:{user:a,loading:c,error:u,login:g,logout:p,refresh:f},children:t})}function c(){return(0,r.useContext)(i)}},32617:function(e,t,a){"use strict";a.d(t,{QW:function(){return d},R1:function(){return i},f8:function(){return l},nc:function(){return u},pE:function(){return c},sg:function(){return o}});let n="http://localhost:5000/api".replace(/\/$/,""),r=n.endsWith("/api")?n:"".concat(n,"/api");function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.startsWith("/")?e:"/".concat(e),a="".concat(r).concat(t);return console.log("[api] request url:",a),a}async function s(e){let t=await e.json().catch(()=>({}));if(!e.ok){let a=Error((null==t?void 0:t.message)||"Request failed");throw a.status=e.status,a}return t}async function i(e){return s(await fetch(l(e),{method:"GET",credentials:"include"}))}async function o(e,t){let a="undefined"!=typeof FormData&&t instanceof FormData;return s(await fetch(l(e),{method:"POST",credentials:"include",headers:a?void 0:{"Content-Type":"application/json"},body:a?t:JSON.stringify(t||{})}))}async function c(e,t){let a="undefined"!=typeof FormData&&t instanceof FormData;return s(await fetch(l(e),{method:"PUT",credentials:"include",headers:a?void 0:{"Content-Type":"application/json"},body:a?t:JSON.stringify(t||{})}))}async function d(e){return s(await fetch(l(e),{method:"DELETE",credentials:"include"}))}async function u(e,t){return s(await fetch(l(e),{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t||{})}))}},27648:function(e,t,a){"use strict";a.d(t,{default:function(){return r.a}});var n=a(72972),r=a.n(n)},99376:function(e,t,a){"use strict";var n=a(35475);a.o(n,"useParams")&&a.d(t,{useParams:function(){return n.useParams}}),a.o(n,"usePathname")&&a.d(t,{usePathname:function(){return n.usePathname}}),a.o(n,"useRouter")&&a.d(t,{useRouter:function(){return n.useRouter}}),a.o(n,"useSearchParams")&&a.d(t,{useSearchParams:function(){return n.useSearchParams}})},76098:function(e,t,a){"use strict";var n=a(2265);let r=n.forwardRef(function(e,t){let{title:a,titleId:r,...l}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),a?n.createElement("title",{id:r},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z"}))});t.Z=r},19967:function(e,t,a){"use strict";var n=a(2265);let r=n.forwardRef(function(e,t){let{title:a,titleId:r,...l}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),a?n.createElement("title",{id:r},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))});t.Z=r}},function(e){e.O(0,[2972,2971,2117,1744],function(){return e(e.s=49110)}),_N_E=e.O()}]);