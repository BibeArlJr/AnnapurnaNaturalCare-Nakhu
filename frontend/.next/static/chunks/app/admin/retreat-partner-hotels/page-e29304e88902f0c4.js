(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9414],{3207:function(e,t,a){Promise.resolve().then(a.bind(a,49413))},49413:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return c}});var s=a(57437),n=a(2265),i=a(32617),r=a(66610);let l=[3,4,5];function c(){let[e,t]=(0,n.useState)([]),[a,c]=(0,n.useState)(!0),[o,d]=(0,n.useState)({location:"",starRating:"",pricePerNight:"",isActive:!0}),[u,h]=(0,n.useState)(null),[p,x]=(0,n.useState)(!1),g=async()=>{c(!0);try{let e=await (0,i.R1)("/partner-hotels");t((null==e?void 0:e.data)||e||[])}catch(e){console.error("Partner hotels load error:",e)}finally{c(!1)}};(0,n.useEffect)(()=>{g()},[]);let m=e=>{var t,a;h(e._id),d({location:e.location||"",starRating:e.starRating||"",pricePerNight:null!==(t=e.pricePerNight)&&void 0!==t?t:"",isActive:null===(a=e.isActive)||void 0===a||a})},f=()=>{h(null),d({location:"",starRating:"",pricePerNight:"",isActive:!0})},v=async()=>{if(!o.location.trim()){alert("Location is required");return}if(!o.starRating){alert("Star rating is required");return}let e={location:o.location.trim(),starRating:Number(o.starRating),pricePerNight:Number(o.pricePerNight)||0,isActive:!!o.isActive};x(!0);try{u?await (0,i.pE)("/partner-hotels/".concat(u),e):await (0,i.sg)("/partner-hotels",e),f(),g()}catch(e){alert((0,r.i)(e,"Failed to save partner hotel"))}finally{x(!1)}},b=async e=>{try{await (0,i.pE)("/partner-hotels/".concat(e._id),{isActive:!e.isActive}),t(t=>t.map(t=>t._id===e._id?{...t,isActive:!t.isActive}:t))}catch(e){alert((0,r.i)(e,"Failed to update status"))}},N=async e=>{if(confirm("Delete this partner hotel?"))try{await (0,i.QW)("/partner-hotels/".concat(e)),t(t=>t.filter(t=>t._id!==e))}catch(e){alert((0,r.i)(e,"Failed to delete partner hotel"))}},y=(0,n.useMemo)(()=>e||[],[e]);return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-white",children:"Partner Hotels"}),(0,s.jsx)("p",{className:"text-sm text-slate-400",children:"Manage global partner hotel accommodation options for retreats and packages."})]})}),(0,s.jsxs)("div",{className:"bg-slate-900 border border-slate-800 rounded-xl p-4 space-y-3",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("label",{className:"text-sm text-slate-300",children:"Location"}),(0,s.jsx)("input",{value:o.location,onChange:e=>d(t=>({...t,location:e.target.value})),placeholder:"e.g. Thamel",className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-teal-500"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("label",{className:"text-sm text-slate-300",children:"Star rating"}),(0,s.jsxs)("select",{value:o.starRating,onChange:e=>d(t=>({...t,starRating:e.target.value})),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-3 text-white",children:[(0,s.jsx)("option",{value:"",children:"Select"}),l.map(e=>(0,s.jsxs)("option",{value:e,children:[e," ★"]},e))]})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("label",{className:"text-sm text-slate-300",children:"Price per night (USD)"}),(0,s.jsx)("input",{type:"number",min:"0",value:o.pricePerNight,onChange:e=>d(t=>({...t,pricePerNight:e.target.value})),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-3 text-white"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("label",{className:"text-sm text-slate-300",children:"Active"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:o.isActive,onChange:e=>d(t=>({...t,isActive:e.target.checked})),className:"h-4 w-4"}),(0,s.jsx)("span",{className:"text-sm text-slate-200",children:o.isActive?"Active":"Inactive"})]})]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:v,disabled:p,className:"px-4 py-3 rounded-lg bg-teal-600 text-white hover:bg-teal-500 transition disabled:opacity-70",children:p?"Saving...":u?"Save changes":"Add partner hotel"}),u&&(0,s.jsx)("button",{onClick:f,className:"px-4 py-3 rounded-lg bg-slate-800 text-slate-200",children:"Cancel edit"})]})]}),a?(0,s.jsx)("p",{className:"text-slate-400 text-sm",children:"Loading..."}):0===y.length?(0,s.jsx)("div",{className:"text-slate-400 text-sm bg-slate-900 border border-slate-800 rounded-lg p-6",children:"No partner hotels yet. Add your first option."}):(0,s.jsxs)("div",{className:"border border-slate-800 rounded-xl overflow-hidden bg-slate-900",children:[(0,s.jsxs)("div",{className:"grid grid-cols-12 px-4 py-3 text-xs uppercase tracking-wide text-slate-400 border-b border-slate-800",children:[(0,s.jsx)("span",{className:"col-span-4",children:"Location"}),(0,s.jsx)("span",{className:"col-span-2",children:"Star"}),(0,s.jsx)("span",{className:"col-span-2",children:"Price / night"}),(0,s.jsx)("span",{className:"col-span-2",children:"Status"}),(0,s.jsx)("span",{className:"col-span-2 text-right",children:"Actions"})]}),y.map(e=>(0,s.jsxs)("div",{className:"grid grid-cols-12 px-4 py-3 text-sm text-white border-b border-slate-800 last:border-b-0 items-center",children:[(0,s.jsx)("div",{className:"col-span-4 font-semibold",children:e.location}),(0,s.jsx)("div",{className:"col-span-2",children:e.starRating?"".concat(e.starRating," ★"):"—"}),(0,s.jsxs)("div",{className:"col-span-2",children:["USD ",e.pricePerNight||0]}),(0,s.jsx)("div",{className:"col-span-2",children:(0,s.jsx)("button",{onClick:()=>b(e),className:"inline-flex items-center px-3 py-1 rounded-full text-xs ".concat(e.isActive?"bg-green-900/60 text-green-300":"bg-slate-800 text-slate-300"),children:e.isActive?"Active":"Inactive"})}),(0,s.jsxs)("div",{className:"col-span-2 flex justify-end gap-2",children:[(0,s.jsx)("button",{onClick:()=>m(e),className:"px-3 py-1 rounded-lg bg-slate-800 hover:bg-slate-700 text-slate-100 text-sm",children:"Edit"}),(0,s.jsx)("button",{onClick:()=>N(e._id),className:"px-3 py-1 rounded-lg bg-red-900/60 hover:bg-red-800 text-red-100 text-sm",children:"Delete"})]})]},e._id))]})]})}},32617:function(e,t,a){"use strict";a.d(t,{QW:function(){return o},R1:function(){return r},nc:function(){return d},pE:function(){return c},sg:function(){return l}});let s="http://localhost:5000/api".replace(/\/$/,""),n="".concat(s,"/api");async function i(e){let t=await e.json().catch(()=>({}));if(!e.ok){let a=Error((null==t?void 0:t.message)||"Request failed");throw a.status=e.status,a}return t}async function r(e){return i(await fetch("".concat(n).concat(e),{method:"GET",credentials:"include"}))}async function l(e,t){let a="undefined"!=typeof FormData&&t instanceof FormData;return i(await fetch("".concat(n).concat(e),{method:"POST",credentials:"include",headers:a?void 0:{"Content-Type":"application/json"},body:a?t:JSON.stringify(t||{})}))}async function c(e,t){let a="undefined"!=typeof FormData&&t instanceof FormData;return i(await fetch("".concat(n).concat(e),{method:"PUT",credentials:"include",headers:a?void 0:{"Content-Type":"application/json"},body:a?t:JSON.stringify(t||{})}))}async function o(e){return i(await fetch("".concat(n).concat(e),{method:"DELETE",credentials:"include"}))}async function d(e,t){return i(await fetch("".concat(n).concat(e),{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t||{})}))}},66610:function(e,t,a){"use strict";function s(e){var t;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Something went wrong";if(!e)return a;let s=(null===(t=e.response)||void 0===t?void 0:t.data)||e.data;if((null==s?void 0:s.errors)&&"object"==typeof s.errors){let e=Object.values(s.errors).flatMap(e=>Array.isArray(null==e?void 0:e._errors)?e._errors:[]).filter(Boolean);if(e.length)return e.join(", ")}return(null==s?void 0:s.message)?s.message:"string"==typeof e?e:e.message?e.message:a}a.d(t,{i:function(){return s}})}},function(e){e.O(0,[2971,2117,1744],function(){return e(e.s=3207)}),_N_E=e.O()}]);