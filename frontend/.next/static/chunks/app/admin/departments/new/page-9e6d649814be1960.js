(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8801],{78398:function(e,t,n){Promise.resolve().then(n.bind(n,49819))},49819:function(e,t,n){"use strict";n.d(t,{default:function(){return o}});var a=n(57437),r=n(2265),u=n(99376);n(27648);var i=n(32617);function o(e){let{mode:t,initialData:n}=e,o=(0,u.useRouter)(),[s,c]=(0,r.useState)({name:(null==n?void 0:n.name)||"",description:(null==n?void 0:n.description)||"",image:(null==n?void 0:n.heroImage)||(null==n?void 0:n.image)||""});function l(e,t){c({...s,[e]:t})}async function d(e){e.preventDefault();try{"create"===t?await (0,i.sg)("/departments",{...s,heroImage:s.image}):await (0,i.pE)("/departments/".concat(n._id),{...s,heroImage:s.image}),o.push("/admin/departments")}catch(e){alert(e.message||"Failed")}}return(0,a.jsxs)("form",{onSubmit:d,className:"space-y-4 max-w-xl",children:[(0,a.jsx)("input",{type:"text",placeholder:"Department Name",value:s.name,onChange:e=>l("name",e.target.value),className:"border p-2 rounded w-full",required:!0}),(0,a.jsx)("textarea",{placeholder:"Description",value:s.description,onChange:e=>l("description",e.target.value),className:"border p-2 rounded w-full h-24"}),(0,a.jsx)("input",{type:"text",placeholder:"Image URL (optional)",value:s.image,onChange:e=>l("image",e.target.value),className:"border p-2 rounded w-full"}),(0,a.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded",children:"create"===t?"Create":"Update"})]})}},32617:function(e,t,n){"use strict";n.d(t,{QW:function(){return l},R1:function(){return o},f8:function(){return u},nc:function(){return d},pE:function(){return c},sg:function(){return s}});let a="http://localhost:5000/api".replace(/\/$/,""),r=a.endsWith("/api")?a:"".concat(a,"/api");function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.startsWith("/")?e:"/".concat(e),n="".concat(r).concat(t);return console.log("[api] request url:",n),n}async function i(e){let t=await e.json().catch(()=>({}));if(!e.ok){let n=Error((null==t?void 0:t.message)||"Request failed");throw n.status=e.status,n}return t}async function o(e){return i(await fetch(u(e),{method:"GET",credentials:"include"}))}async function s(e,t){let n="undefined"!=typeof FormData&&t instanceof FormData;return i(await fetch(u(e),{method:"POST",credentials:"include",headers:n?void 0:{"Content-Type":"application/json"},body:n?t:JSON.stringify(t||{})}))}async function c(e,t){let n="undefined"!=typeof FormData&&t instanceof FormData;return i(await fetch(u(e),{method:"PUT",credentials:"include",headers:n?void 0:{"Content-Type":"application/json"},body:n?t:JSON.stringify(t||{})}))}async function l(e){return i(await fetch(u(e),{method:"DELETE",credentials:"include"}))}async function d(e,t){return i(await fetch(u(e),{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t||{})}))}},27648:function(e,t,n){"use strict";n.d(t,{default:function(){return r.a}});var a=n(72972),r=n.n(a)},99376:function(e,t,n){"use strict";var a=n(35475);n.o(a,"useParams")&&n.d(t,{useParams:function(){return a.useParams}}),n.o(a,"usePathname")&&n.d(t,{usePathname:function(){return a.usePathname}}),n.o(a,"useRouter")&&n.d(t,{useRouter:function(){return a.useRouter}}),n.o(a,"useSearchParams")&&n.d(t,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[2972,2971,2117,1744],function(){return e(e.s=78398)}),_N_E=e.O()}]);