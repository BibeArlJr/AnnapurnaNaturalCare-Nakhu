(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7181],{69422:function(e,t,a){Promise.resolve().then(a.bind(a,1268))},1268:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return y}});var l=a(57437),s=a(2265),n=a(49513),r=a(30083),i=a(34379),o=a(32617),d=a(5137),c=a(9878),u=a(14663);function m(e){let{pkg:t,onEdit:a,onDelete:s,onToggleStatus:n,updatingStatus:r}=e;return(0,l.jsxs)("div",{className:"bg-[#11151c] border border-white/10 rounded-xl p-4 hover:border-teal-600/40 transition shadow-sm",children:[(0,l.jsx)("img",{src:t.imageUrl||"/placeholder-package.png",alt:t.name,className:"w-full h-32 object-cover rounded-xl mb-3",loading:"lazy"}),(0,l.jsxs)("div",{className:"min-w-0 mb-2 flex items-start justify-between gap-3",children:[(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsx)("div",{className:"flex items-center justify-between gap-2",children:(0,l.jsx)("h3",{className:"text-lg font-semibold text-white line-clamp-1",children:t.name})}),(0,l.jsxs)("p",{className:"text-sm text-teal-300 font-semibold",children:[t.price?"$".concat(t.price):"Price N/A"," ",t.duration&&"\xb7 ".concat(t.duration)]})]}),(0,l.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,l.jsx)(u.t,{status:t.status}),(0,l.jsx)(u.W,{status:t.status,onToggle:()=>null==n?void 0:n(t),disabled:r})]})]}),(0,l.jsx)("p",{className:"text-sm text-gray-400 line-clamp-3 mb-4",children:t.shortDescription||"No description."}),Array.isArray(t.departments)&&t.departments.length>0&&(0,l.jsx)("div",{className:"flex flex-wrap gap-1 mb-3",children:t.departments.map(e=>(0,l.jsx)("span",{className:"px-2 py-1 bg-slate-800 text-xs rounded text-slate-200 border border-slate-700",children:e.name||e},e._id||e))}),(0,l.jsx)("div",{className:"flex items-center justify-between",children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("button",{onClick:()=>null==a?void 0:a(t),className:"p-2 rounded-md bg-slate-800 hover:bg-slate-700 transition",title:"Edit",children:(0,l.jsx)(d.Z,{className:"h-5 w-5 text-teal-300"})}),(0,l.jsx)("button",{onClick:()=>null==s?void 0:s(t._id),className:"p-2 rounded-md bg-slate-800 hover:bg-rose-700 transition",title:"Delete",children:(0,l.jsx)(c.Z,{className:"h-5 w-5 text-rose-300"})})]})})]})}var p=a(66610),x=a(65223),h=a(30166);a(98527);let g=(0,h.default)(()=>Promise.all([a.e(3070),a.e(1804)]).then(a.t.bind(a,5600,23)),{loadableGenerated:{webpack:()=>[5600]},ssr:!1});function v(e){let{open:t,onClose:a,onSaved:n}=e,r=(0,s.useRef)(null),[i,d]=(0,s.useState)([]),[c,u]=(0,s.useState)([]),[m,h]=(0,s.useState)(!1),[v,f]=(0,s.useState)({name:"",slug:"",price:"",duration:"",treatmentType:"",department:"",shortDescription:"",longDescription:"",included:"",galleryImages:[],promoVideos:[],videoUrl:""}),[b,j]=(0,s.useState)(null),[y,N]=(0,s.useState)(null),[w,C]=(0,s.useState)(!1);async function D(){try{let e=await (0,o.R1)("/departments"),t=(null==e?void 0:e.data)||e||[];d(t)}catch(e){console.error("Departments load error:",e)}try{let e=await (0,o.R1)("/treatment-types"),t=(null==e?void 0:e.data)||e||[];u(t)}catch(e){console.error("Treatment types load error:",e)}}if((0,s.useEffect)(()=>{t&&(D(),f({name:"",slug:"",price:"",duration:"",treatmentType:"",department:"",shortDescription:"",longDescription:"",included:"",galleryImages:[],promoVideos:[],videoUrl:""}),j(null),N(null),C(!1),h(!1))},[t]),!t)return null;function k(e){return e.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function S(e){let{name:t,value:a}=e.target;f(e=>{let l={...e,[t]:a};return"name"!==t||m||(l.slug=k(a)),l})}async function T(e){e.preventDefault(),C(!0);try{let e;let t=new FormData;t.append("name",v.name),v.slug&&t.append("slug",v.slug),""!==v.price&&t.append("price",Number(v.price)),""!==v.duration&&(t.append("duration",Number(v.duration)),t.append("durationDays",Number(v.duration))),t.append("shortDescription",v.shortDescription),v.longDescription&&t.append("description",v.longDescription),(v.included||"").split(/[\n,]/).map(e=>e.trim()).filter(Boolean).forEach(e=>t.append("included[]",e)),v.department&&(t.append("department",v.department),t.append("departments",v.department)),v.treatmentType&&t.append("treatmentType",v.treatmentType),b&&t.append("coverImage",b),y&&!b&&t.append("coverImage",y),(v.galleryImages||[]).forEach(e=>{e&&t.append("galleryImages[]",e)});let l=[...v.promoVideos||[]];v.videoUrl&&l.push(v.videoUrl),l.forEach(e=>{e&&t.append("promoVideos[]",e)});let s="http://localhost:5000/api".replace(/\/$/,""),r=await fetch("".concat(s,"/api/packages"),{method:"POST",body:t,credentials:"include"});try{e=await r.json()}catch(t){e=null}if(!r.ok){let t=(0,p.i)({data:e},"Failed to save package");throw Error(t)}null==n||n(),null==a||a()}catch(e){alert((0,p.i)(e,"Failed to save package"))}finally{C(!1)}}let E="w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-teal-500";return(0,l.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 px-4",children:(0,l.jsxs)("div",{className:"relative w-full max-w-4xl max-h-[90vh] bg-[#0f131a] border border-white/10 rounded-2xl shadow-2xl flex flex-col",children:[(0,l.jsx)("button",{onClick:a,className:"absolute top-4 right-4 text-gray-300 hover:text-white bg-slate-700/40 hover:bg-slate-700 rounded-full p-2 transition",children:"✕"}),(0,l.jsxs)("div",{className:"px-6 pt-6 pb-3 border-b border-slate-800",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Add Package"}),(0,l.jsx)("p",{className:"text-sm text-slate-400 mt-1",children:"Create a new service package with pricing, departments, and details."})]}),(0,l.jsxs)("form",{onSubmit:T,className:"flex-1 overflow-y-auto px-6 pb-6 pt-4 space-y-6",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("label",{className:"text-sm text-slate-300",children:"Name"}),(0,l.jsx)("input",{name:"name",value:v.name,onChange:S,className:E,required:!0})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("label",{className:"text-sm text-slate-300",children:"Slug"}),(0,l.jsx)("span",{className:"text-xs text-slate-500",children:"Used in URLs. Auto-generated from name."})]}),(0,l.jsx)("input",{name:"slug",value:v.slug,onChange:function(e){let t=k(e.target.value);h(!0),f(e=>({...e,slug:t}))},className:E,placeholder:"naturopathy-detox-program"})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("label",{className:"text-sm text-slate-300",children:"Price ($)"}),(0,l.jsx)("input",{type:"number",name:"price",value:v.price,onChange:S,className:E,required:!0})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("label",{className:"text-sm text-slate-300",children:"Duration"}),(0,l.jsx)("span",{className:"text-xs text-slate-500",children:"(Total days of the treatment package)"})]}),(0,l.jsx)("input",{name:"duration",value:v.duration,onChange:S,className:E,placeholder:"e.g., 7, 14, 21"})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("label",{className:"text-sm text-slate-300",children:"Treatment Type"}),(0,l.jsxs)("select",{name:"treatmentType",value:v.treatmentType,onChange:S,className:"".concat(E," bg-slate-900"),required:!0,children:[(0,l.jsx)("option",{value:"",children:"Select treatment type"}),c.map(e=>(0,l.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("label",{className:"text-sm text-slate-300",children:"Department"}),(0,l.jsxs)("select",{name:"department",value:v.department,onChange:S,className:"".concat(E," bg-slate-900"),required:!0,children:[(0,l.jsx)("option",{value:"",children:"Select department"}),i.map(e=>(0,l.jsx)("option",{value:e._id,children:e.name},e._id))]})]})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("label",{className:"text-sm text-slate-300",children:"Short Description"}),(0,l.jsx)("input",{name:"shortDescription",value:v.shortDescription,onChange:S,className:E})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"text-sm text-slate-300",children:"Long Description"}),(0,l.jsx)("div",{className:"bg-slate-900/40 border border-slate-700 rounded-xl",children:(0,l.jsx)(g,{theme:"snow",value:v.longDescription,onChange:e=>f(t=>({...t,longDescription:e}))})})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("label",{className:"text-sm text-slate-300",children:"Included (comma or new line)"}),(0,l.jsx)("textarea",{name:"included",value:v.included,onChange:S,rows:3,className:"".concat(E," resize-none"),placeholder:"Consultation\nTherapy sessions\nDiet plan"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"border-2 border-dashed border-slate-700 bg-slate-900/40 rounded-xl p-4 flex flex-col items-center justify-center text-slate-300 cursor-pointer hover:border-teal-500 transition",onClick:()=>{var e;return null===(e=r.current)||void 0===e?void 0:e.click()},onDragOver:e=>e.preventDefault(),onDrop:function(e){var t;e.preventDefault();let a=null===(t=e.dataTransfer.files)||void 0===t?void 0:t[0];a&&(j(a),N(URL.createObjectURL(a)))},children:[(0,l.jsx)("input",{type:"file",accept:"image/*",ref:r,className:"hidden",onChange:function(e){var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];a&&(j(a),N(URL.createObjectURL(a)))}}),y?(0,l.jsx)("img",{src:y,alt:"Cover preview",className:"w-full max-w-xs h-32 object-cover rounded-lg border border-slate-700"}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("p",{className:"font-medium",children:"Cover image"}),(0,l.jsx)("p",{className:"text-xs text-slate-500",children:"Click or drop PNG/JPG"})]})]}),(0,l.jsx)(x.Z,{title:"Media",images:v.galleryImages,setImages:e=>f(t=>({...t,galleryImages:e.slice(0,10)})),videos:v.promoVideos,setVideos:e=>f(t=>({...t,promoVideos:e.slice(0,3)})),maxImages:10,maxVideos:3}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("label",{className:"text-sm text-slate-300",children:"YouTube / Vimeo link (optional)"}),(0,l.jsx)("input",{type:"text",value:v.videoUrl,onChange:e=>f(t=>({...t,videoUrl:e.target.value})),placeholder:"Paste a video URL",className:E})]})]})]}),(0,l.jsxs)("div",{className:"mt-auto border-t border-slate-800 bg-[#0b1017] px-6 py-4 flex justify-end gap-3",children:[(0,l.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 rounded-lg bg-slate-800 text-white hover:bg-slate-700 transition",children:"Cancel"}),(0,l.jsx)("button",{type:"submit",onClick:T,disabled:w,className:"px-4 py-2 rounded-lg bg-teal-600 text-white hover:bg-teal-500 transition disabled:opacity-70",children:w?"Saving...":"Save Package"})]})]})})}let f=(0,h.default)(()=>Promise.all([a.e(3070),a.e(1804)]).then(a.t.bind(a,5600,23)),{loadableGenerated:{webpack:()=>[5600]},ssr:!1});function b(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.toString().toLowerCase().trim().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-")}function j(e){let{open:t,onClose:a,onSaved:n,pkg:r}=e,i=(0,s.useRef)(null),[d,c]=(0,s.useState)([]),[u,m]=(0,s.useState)([]),[h,g]=(0,s.useState)({name:"",price:"",duration:"",treatmentType:"",department:"",shortDescription:"",longDescription:"",included:"",slug:"",galleryImages:[],promoVideos:[],videoUrl:""}),[v,j]=(0,s.useState)(null),[y,N]=(0,s.useState)(null),[w,C]=(0,s.useState)(!1);async function D(){try{let e=await (0,o.R1)("/departments"),t=(null==e?void 0:e.data)||e||[];c(t)}catch(e){console.error("Departments load error:",e)}try{let e=await (0,o.R1)("/treatment-types"),t=(null==e?void 0:e.data)||e||[];m(t)}catch(e){console.error("Treatment types load error:",e)}}if((0,s.useEffect)(()=>{if(t){var e,a,l,s,n,i;D();let t=Array.isArray(null==r?void 0:r.promoVideos)?r.promoVideos.map(e=>"string"==typeof e?e:null==e?void 0:e.url).filter(Boolean):(null==r?void 0:r.promoVideo)?[r.promoVideo]:[],o=t[0]||"";g({name:(null==r?void 0:r.name)||"",price:(null==r?void 0:r.price)||"",duration:(null==r?void 0:r.durationDays)||(null==r?void 0:r.duration)||"",treatmentType:(null==r?void 0:null===(e=r.treatmentType)||void 0===e?void 0:e._id)||(null==r?void 0:r.treatmentType)||(null==r?void 0:null===(a=r.treatmentType)||void 0===a?void 0:a.id)||"",department:(null==r?void 0:null===(l=r.department)||void 0===l?void 0:l._id)||(null==r?void 0:r.department)||(null==r?void 0:null===(n=r.departments)||void 0===n?void 0:null===(s=n[0])||void 0===s?void 0:s._id)||(null==r?void 0:null===(i=r.departments)||void 0===i?void 0:i[0])||"",shortDescription:(null==r?void 0:r.shortDescription)||"",longDescription:(null==r?void 0:r.longDescription)||"",included:((null==r?void 0:r.included)||[]).join("\n"),slug:(null==r?void 0:r.slug)||b((null==r?void 0:r.name)||""),galleryImages:(null==r?void 0:r.galleryImages)||[],promoVideos:t,videoUrl:(null==r?void 0:r.videoUrl)||o}),j(null),N((null==r?void 0:r.imageUrl)||null),C(!1)}},[t,r]),!t)return null;function k(e){let{name:t,value:a}=e.target;if("name"===t){let e=b(a);g(t=>{let l=b(t.name||""),s=!t.slug||t.slug===l;return{...t,name:a,slug:s?e:t.slug}});return}if("slug"===t){g(e=>({...e,slug:b(a)}));return}g(e=>({...e,[t]:a}))}async function S(e){e.preventDefault(),C(!0);try{var t;let e;let l=(null===(t=h.slug)||void 0===t?void 0:t.trim())?h.slug.trim():b(h.name||"");if(!l)throw Error("Slug is required");let s=new FormData;s.append("name",h.name),s.append("price",h.price),s.append("duration",h.duration),s.append("durationDays",h.duration),s.append("shortDescription",h.shortDescription),s.append("longDescription",h.longDescription),s.append("included",h.included),s.append("slug",l),h.department&&(s.append("department",h.department),s.append("departments",h.department)),h.treatmentType&&s.append("treatmentType",h.treatmentType),v?s.append("coverImage",v):y&&s.append("coverImage",y),(h.galleryImages||[]).forEach(e=>{e&&s.append("galleryImages[]",e)});let i=[...h.promoVideos||[]];h.videoUrl&&i.push(h.videoUrl),i.forEach(e=>{e&&s.append("promoVideos[]",e)});let o="http://localhost:5000/api".replace(/\/$/,""),d=await fetch("".concat(o,"/api/packages/").concat(null==r?void 0:r._id),{method:"PUT",body:s,credentials:"include"});try{e=await d.json()}catch(t){e=null}if(!d.ok){let t=(0,p.i)({data:e},"Failed to update package");throw Error(t)}null==n||n(),null==a||a()}catch(e){alert((0,p.i)(e,"Failed to update package"))}finally{C(!1)}}let T="w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-teal-500";return(0,l.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 px-4 py-8 overflow-y-auto",children:(0,l.jsxs)("div",{className:"relative w-full max-w-4xl max-h-[90vh] bg-[#0f131a] border border-white/10 rounded-2xl shadow-2xl flex flex-col overflow-y-auto",children:[(0,l.jsx)("button",{onClick:a,className:"absolute top-4 right-4 text-gray-300 hover:text-white bg-slate-700/40 hover:bg-slate-700 rounded-full p-2 transition",children:"✕"}),(0,l.jsxs)("div",{className:"px-6 pt-6 pb-3 border-b border-slate-800 flex-shrink-0",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Edit Package"}),(0,l.jsx)("p",{className:"text-sm text-slate-400 mt-1",children:"Update package details."})]}),(0,l.jsxs)("form",{onSubmit:S,className:"flex-1 min-h-0 overflow-y-auto px-6 pb-6 pt-4 space-y-6",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("label",{className:"text-sm text-slate-300",children:"Name"}),(0,l.jsx)("input",{name:"name",value:h.name,onChange:k,className:T,required:!0})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("label",{className:"text-sm text-slate-300",children:"Slug"}),(0,l.jsx)("input",{name:"slug",value:h.slug,onChange:k,className:T,required:!0}),(0,l.jsx)("p",{className:"text-xs text-slate-500",children:"Generated from name; you can adjust if needed."})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("label",{className:"text-sm text-slate-300",children:"Price"}),(0,l.jsx)("input",{type:"number",name:"price",value:h.price,onChange:k,className:T,required:!0})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("label",{className:"text-sm text-slate-300",children:"Duration"}),(0,l.jsx)("input",{name:"duration",value:h.duration,onChange:k,className:T})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("label",{className:"text-sm text-slate-300",children:"Treatment Type"}),(0,l.jsxs)("select",{name:"treatmentType",value:h.treatmentType,onChange:k,className:"".concat(T," bg-slate-900"),required:!0,children:[(0,l.jsx)("option",{value:"",children:"Select treatment type"}),u.map(e=>(0,l.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("label",{className:"text-sm text-slate-300",children:"Department"}),(0,l.jsxs)("select",{name:"department",value:h.department,onChange:k,className:"".concat(T," bg-slate-900"),required:!0,children:[(0,l.jsx)("option",{value:"",children:"Select department"}),d.map(e=>(0,l.jsx)("option",{value:e._id,children:e.name},e._id))]})]})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("label",{className:"text-sm text-slate-300",children:"Short Description"}),(0,l.jsx)("input",{name:"shortDescription",value:h.shortDescription,onChange:k,className:T})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"text-sm text-slate-300",children:"Long Description"}),(0,l.jsx)("div",{className:"bg-slate-900/40 border border-slate-700 rounded-xl",children:(0,l.jsx)(f,{theme:"snow",value:h.longDescription,onChange:e=>g(t=>({...t,longDescription:e}))})})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("label",{className:"text-sm text-slate-300",children:"Included (comma or new line)"}),(0,l.jsx)("textarea",{name:"included",value:h.included,onChange:k,rows:3,className:"".concat(T," resize-none"),placeholder:"Consultation Therapy sessions Diet plan"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"border-2 border-dashed border-slate-700 bg-slate-900/40 rounded-xl p-4 flex flex-col items-center justify-center text-slate-300 cursor-pointer hover:border-teal-500 transition",onClick:()=>{var e;return null===(e=i.current)||void 0===e?void 0:e.click()},onDragOver:e=>e.preventDefault(),onDrop:function(e){var t;e.preventDefault();let a=null===(t=e.dataTransfer.files)||void 0===t?void 0:t[0];a&&(j(a),N(URL.createObjectURL(a)))},children:[(0,l.jsx)("input",{type:"file",accept:"image/*",ref:i,className:"hidden",onChange:function(e){var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];a&&(j(a),N(URL.createObjectURL(a)))}}),y?(0,l.jsx)("img",{src:y,alt:"Preview",className:"w-full max-w-xs h-32 object-cover rounded-lg border border-slate-700"}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("p",{className:"font-medium",children:"Cover image"}),(0,l.jsx)("p",{className:"text-xs text-slate-500",children:"Click or drop PNG/JPG"})]})]}),(0,l.jsx)(x.Z,{title:"Media",images:h.galleryImages,setImages:e=>g(t=>({...t,galleryImages:e.slice(0,10)})),videos:h.promoVideos,setVideos:e=>g(t=>({...t,promoVideos:e.slice(0,3)})),maxImages:10,maxVideos:3}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("label",{className:"text-sm text-slate-300",children:"YouTube link (optional)"}),(0,l.jsx)("input",{type:"text",value:h.videoUrl,onChange:e=>g(t=>({...t,videoUrl:e.target.value})),placeholder:"Paste a YouTube URL",className:T})]})]})]}),(0,l.jsxs)("div",{className:"mt-auto border-t border-slate-800 bg-[#0b1017] px-6 py-4 flex justify-end gap-3",children:[(0,l.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 rounded-lg bg-slate-800 text-white hover:bg-slate-700 transition",children:"Cancel"}),(0,l.jsx)("button",{type:"submit",onClick:S,disabled:w,className:"px-4 py-2 rounded-lg bg-teal-600 text-white hover:bg-teal-500 transition disabled:opacity-70",children:w?"Saving...":"Save Changes"})]})]})})}function y(){let[e,t]=(0,s.useState)([]),[a,d]=(0,s.useState)([]),[c,u]=(0,s.useState)(""),[p,x]=(0,s.useState)(!0),[h,g]=(0,s.useState)(!1),[f,b]=(0,s.useState)(null),[y,N]=(0,s.useState)(null);async function w(){x(!0);try{let e=await (0,o.R1)("/packages?includeDrafts=true"),a=(null==e?void 0:e.data)||e||[];t(a),d(a)}catch(e){console.error("Package fetch error:",e)}x(!1)}async function C(e){if(confirm("Delete this package?"))try{await (0,o.QW)("/packages/".concat(e)),t(t=>t.filter(t=>t._id!==e)),d(t=>t.filter(t=>t._id!==e))}catch(e){alert(e.message||"Failed to delete package")}}function D(e,a){t(t=>t.map(t=>t._id===e?{...t,status:a}:t)),d(t=>t.map(t=>t._id===e?{...t,status:a}:t))}async function k(e){let t="published"===e.status?"draft":"published";D(e._id,t),N(e._id);try{await (0,o.nc)("/packages/".concat(e._id,"/status"),{status:t})}catch(t){D(e._id,e.status),alert(t.message||"Failed to update status")}finally{N(null)}}return(0,s.useEffect)(()=>{w()},[]),(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsxs)("h1",{className:"text-2xl text-white font-semibold flex items-center gap-2",children:[(0,l.jsx)(n.Z,{className:"h-7 w-7 text-teal-400"}),"Manage Packages"]}),(0,l.jsxs)("button",{onClick:()=>g(!0),className:"flex items-center gap-2 bg-teal-600 hover:bg-teal-500 text-white px-5 py-2 rounded-lg transition",children:[(0,l.jsx)(r.Z,{className:"h-5 w-5"}),"Add New Package"]})]}),(0,l.jsxs)("div",{className:"relative w-full sm:w-80",children:[(0,l.jsx)(i.Z,{className:"absolute left-3 top-3.5 h-5 w-5 text-gray-400"}),(0,l.jsx)("input",{value:c,onChange:t=>(function(t){u(t);let a=t.toLowerCase();d(e.filter(e=>(e.name||"").toLowerCase().includes(a)||(e.shortDescription||"").toLowerCase().includes(a)))})(t.target.value),placeholder:"Search packages...",className:"bg-[#11151c] border border-white/10 text-white rounded-lg py-3 pl-10 pr-3 w-full outline-none focus:border-teal-500"})]}),p&&(0,l.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-6 animate-pulse",children:Array.from({length:6}).map((e,t)=>(0,l.jsx)("div",{className:"h-40 bg-slate-800 rounded-xl"},t))}),!p&&0===a.length&&(0,l.jsxs)("div",{className:"text-center py-20 text-gray-400",children:[(0,l.jsx)(n.Z,{className:"h-16 w-16 text-gray-600 mx-auto mb-4"}),(0,l.jsx)("p",{children:"No packages found."}),(0,l.jsx)("button",{onClick:()=>g(!0),className:"inline-block mt-4 bg-teal-600 hover:bg-teal-500 text-white px-5 py-2 rounded-lg transition",children:"Add First Package"})]}),!p&&a.length>0&&(0,l.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-6",children:a.map(e=>(0,l.jsx)(m,{pkg:e,onDelete:C,onEdit:e=>b(e),onToggleStatus:k,updatingStatus:y===e._id},e._id))}),(0,l.jsx)(v,{open:h,onClose:()=>g(!1),onSaved:()=>{g(!1),w()}}),(0,l.jsx)(j,{open:!!f,pkg:f,onClose:()=>b(null),onSaved:()=>{b(null),w()}})]})}},34379:function(e,t,a){"use strict";var l=a(2265);let s=l.forwardRef(function(e,t){let{title:a,titleId:s,...n}=e;return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),a?l.createElement("title",{id:s},a):null,l.createElement("path",{fillRule:"evenodd",d:"M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z",clipRule:"evenodd"}))});t.Z=s},5137:function(e,t,a){"use strict";var l=a(2265);let s=l.forwardRef(function(e,t){let{title:a,titleId:s,...n}=e;return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),a?l.createElement("title",{id:s},a):null,l.createElement("path",{d:"M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-8.4 8.4a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32l8.4-8.4Z"}),l.createElement("path",{d:"M5.25 5.25a3 3 0 0 0-3 3v10.5a3 3 0 0 0 3 3h10.5a3 3 0 0 0 3-3V13.5a.75.75 0 0 0-1.5 0v5.25a1.5 1.5 0 0 1-1.5 1.5H5.25a1.5 1.5 0 0 1-1.5-1.5V8.25a1.5 1.5 0 0 1 1.5-1.5h5.25a.75.75 0 0 0 0-1.5H5.25Z"}))});t.Z=s},30083:function(e,t,a){"use strict";var l=a(2265);let s=l.forwardRef(function(e,t){let{title:a,titleId:s,...n}=e;return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),a?l.createElement("title",{id:s},a):null,l.createElement("path",{fillRule:"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"}))});t.Z=s},49513:function(e,t,a){"use strict";var l=a(2265);let s=l.forwardRef(function(e,t){let{title:a,titleId:s,...n}=e;return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),a?l.createElement("title",{id:s},a):null,l.createElement("path",{fillRule:"evenodd",d:"M5.25 2.25a3 3 0 0 0-3 3v4.318a3 3 0 0 0 .879 2.121l9.58 9.581c.92.92 2.39 1.186 3.548.428a18.849 18.849 0 0 0 5.441-5.44c.758-1.16.492-2.629-.428-3.548l-9.58-9.581a3 3 0 0 0-2.122-.879H5.25ZM6.375 7.5a1.125 1.125 0 1 0 0-2.25 1.125 1.125 0 0 0 0 2.25Z",clipRule:"evenodd"}))});t.Z=s},9878:function(e,t,a){"use strict";var l=a(2265);let s=l.forwardRef(function(e,t){let{title:a,titleId:s,...n}=e;return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),a?l.createElement("title",{id:s},a):null,l.createElement("path",{fillRule:"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z",clipRule:"evenodd"}))});t.Z=s}},function(e){e.O(0,[6458,9038,2971,2117,1744],function(){return e(e.s=69422)}),_N_E=e.O()}]);