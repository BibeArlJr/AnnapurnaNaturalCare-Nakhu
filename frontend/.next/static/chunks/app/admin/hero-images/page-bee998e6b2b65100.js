(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6537],{66104:function(e,t,a){Promise.resolve().then(a.bind(a,90692))},90692:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return u}});var l=a(57437),n=a(2265),r=a(32617),s=a(46243),i=a(19967);let o=n.forwardRef(function(e,t){let{title:a,titleId:l,...r}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},r),a?n.createElement("title",{id:l},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18"}))}),c=n.forwardRef(function(e,t){let{title:a,titleId:l,...r}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},r),a?n.createElement("title",{id:l},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 13.5 12 21m0 0-7.5-7.5M12 21V3"}))});var d=a(61601);function u(){let[e,t]=(0,n.useState)([]),[a,u]=(0,n.useState)(!0),[m,h]=(0,n.useState)(!1),[f,g]=(0,n.useState)(!1),p=async()=>{u(!0);try{let e=await (0,r.R1)("/hero-images"),a=(null==e?void 0:e.data)||e||[];t(a)}catch(e){console.error("Hero images load error:",e)}finally{u(!1)}};(0,n.useEffect)(()=>{p()},[]);let x=async t=>{let a=null==t?void 0:t[0];if(a&&!(e.length>=6)){g(!0);try{await (0,r.sg)("/hero-images",{url:a}),p()}catch(e){alert(e.message||"Upload failed")}finally{g(!1)}}},v=(e,a)=>{t(t=>{let l=[...t],n=e+a;return n<0||n>=l.length?t:([l[e],l[n]]=[l[n],l[e]],l)})},b=async()=>{h(!0);try{await (0,r.pE)("/hero-images/reorder",{order:e.map((e,t)=>({id:e._id,order:t}))}),p()}catch(e){alert(e.message||"Failed to save order")}finally{h(!1)}},j=async e=>{if(confirm("Delete this hero image?"))try{await (0,r.QW)("/hero-images/".concat(e)),t(t=>t.filter(t=>t._id!==e))}catch(e){alert(e.message||"Delete failed")}};return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-2xl font-semibold text-white",children:"Hero Banner Images"}),(0,l.jsx)("p",{className:"text-sm text-slate-400",children:"Upload up to 6 images for the homepage hero slider."})]}),(0,l.jsx)("div",{className:"w-64",children:(0,l.jsx)(s.Z,{accept:"image/*",maxItems:1,value:[],disabled:f||e.length>=6,onChange:x})})]}),a?(0,l.jsx)("p",{className:"text-slate-400 text-sm",children:"Loading..."}):0===e.length?(0,l.jsxs)("div",{className:"border border-slate-800 bg-slate-900 rounded-xl p-6 text-slate-300 flex items-center gap-3",children:[(0,l.jsx)(i.Z,{className:"h-8 w-8 text-teal-400"}),"No hero images yet. Upload one to get started."]}):(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map((t,a)=>(0,l.jsxs)("div",{className:"rounded-xl border border-slate-800 bg-slate-900 overflow-hidden",children:[(0,l.jsx)("div",{className:"aspect-video bg-slate-800",children:(0,l.jsx)("img",{src:t.url,alt:t.caption||"Hero ".concat(a+1),className:"w-full h-full object-cover"})}),(0,l.jsxs)("div",{className:"p-3 flex items-center justify-between gap-2",children:[(0,l.jsx)("div",{className:"text-sm text-slate-200 line-clamp-2",children:t.caption||"â€”"}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("button",{onClick:()=>v(a,-1),className:"p-2 rounded-lg bg-slate-800 hover:bg-slate-700",disabled:0===a,children:(0,l.jsx)(o,{className:"h-4 w-4"})}),(0,l.jsx)("button",{onClick:()=>v(a,1),className:"p-2 rounded-lg bg-slate-800 hover:bg-slate-700",disabled:a===e.length-1,children:(0,l.jsx)(c,{className:"h-4 w-4"})}),(0,l.jsx)("button",{onClick:()=>j(t._id),className:"p-2 rounded-lg bg-rose-900/50 hover:bg-rose-800 text-rose-100",children:(0,l.jsx)(d.Z,{className:"h-4 w-4"})})]})]})]},t._id))}),(0,l.jsx)("div",{className:"flex justify-end",children:(0,l.jsx)("button",{onClick:b,disabled:m,className:"px-4 py-2 rounded-lg bg-teal-600 text-white hover:bg-teal-500 disabled:opacity-60",children:m?"Saving...":"Save order"})})]})]})}},46243:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var l=a(57437),n=a(2265),r=a(32617);function s(e){let{value:t=[],onChange:a,maxItems:s=10,accept:i="*/*",allowUrls:o=!1,disabled:c=!1,onUploadStart:d,onUploadEnd:u,onError:m}=e,[h,f]=(0,n.useState)(!1),[g,p]=(0,n.useState)(""),x=(0,n.useRef)(null),v=Math.max(0,s-t.length),b=async e=>{if(!(null==e?void 0:e.length)||0===v)return;let l=Array.from(e).slice(0,v);try{null==d||d(),f(!0);let e=[];for(let t of l){let a=new FormData;a.append("image",t),a.append("folder","admin-media");let l=await fetch((0,r.f8)("/upload"),{method:"POST",body:a,credentials:"include"});if(!l.ok)throw Error("Upload failed");let n=await l.json(),s=(null==n?void 0:n.secure_url)||(null==n?void 0:n.url);s&&e.push(s)}e.length&&(null==a||a([...t,...e].slice(0,s)))}catch(e){null==m||m((null==e?void 0:e.message)||"Upload failed")}finally{f(!1),null==u||u()}},j=e=>{let l=t.filter((t,a)=>a!==e);null==a||a(l)};return(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"border border-dashed border-slate-700 rounded-lg p-4 text-center text-slate-300 cursor-pointer bg-slate-900/50 ".concat(c||h?"opacity-60 cursor-not-allowed":"hover:border-teal-500"),onClick:()=>{var e;return!c&&!h&&(null===(e=x.current)||void 0===e?void 0:e.click())},onDragOver:e=>{e.preventDefault()},onDrop:e=>{e.preventDefault(),c||h||b(e.dataTransfer.files)},children:[(0,l.jsx)("input",{ref:x,type:"file",accept:i,multiple:!0,className:"hidden",disabled:c||h,onChange:e=>b(e.target.files)}),(0,l.jsx)("p",{className:"text-sm font-medium",children:"Click to upload or drop files"}),(0,l.jsxs)("p",{className:"text-xs text-slate-500",children:["Max ",s," items"]}),h&&(0,l.jsx)("p",{className:"text-xs text-teal-300 mt-2",children:"Uploading..."})]}),o&&(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("input",{value:g,onChange:e=>p(e.target.value),placeholder:"Paste media URL",className:"flex-1 bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-white",disabled:c||h||t.length>=s}),(0,l.jsx)("button",{type:"button",onClick:()=>{let e=(g||"").trim();e&&!(t.length>=s)&&(null==a||a([...t,e].slice(0,s)),p(""))},disabled:c||h||!g||t.length>=s,className:"px-3 py-2 rounded-lg bg-teal-600 text-white text-sm disabled:opacity-50",children:"Add"})]}),(null==t?void 0:t.length)?(0,l.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:t.map((e,t)=>{let a="string"==typeof e?e:(null==e?void 0:e.url)||"",n=i.startsWith("image")||a&&a.match(/\.(png|jpe?g|webp)$/i);return(0,l.jsxs)("div",{className:"relative rounded-lg overflow-hidden border border-slate-700 bg-slate-900/40",children:[n?(0,l.jsx)("img",{src:a,alt:"media-".concat(t),className:"w-full h-24 object-cover"}):(0,l.jsx)("div",{className:"h-24 flex items-center justify-center text-xs text-slate-200 px-2 break-all",children:a}),(0,l.jsx)("button",{type:"button",onClick:()=>j(t),className:"absolute top-1 right-1 bg-black/70 text-white rounded-full text-xs px-2 py-0.5",children:"\xd7"})]},"".concat(a||t,"-").concat(t))})}):null]})}},32617:function(e,t,a){"use strict";a.d(t,{QW:function(){return d},R1:function(){return i},f8:function(){return r},nc:function(){return u},pE:function(){return c},sg:function(){return o}});let l="http://localhost:5000/api".replace(/\/$/,""),n=l.endsWith("/api")?l:"".concat(l,"/api");function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.startsWith("/")?e:"/".concat(e),a="".concat(n).concat(t);return console.log("[api] request url:",a),a}async function s(e){let t=await e.json().catch(()=>({}));if(!e.ok){let a=Error((null==t?void 0:t.message)||"Request failed");throw a.status=e.status,a}return t}async function i(e){return s(await fetch(r(e),{method:"GET",credentials:"include"}))}async function o(e,t){let a="undefined"!=typeof FormData&&t instanceof FormData;return s(await fetch(r(e),{method:"POST",credentials:"include",headers:a?void 0:{"Content-Type":"application/json"},body:a?t:JSON.stringify(t||{})}))}async function c(e,t){let a="undefined"!=typeof FormData&&t instanceof FormData;return s(await fetch(r(e),{method:"PUT",credentials:"include",headers:a?void 0:{"Content-Type":"application/json"},body:a?t:JSON.stringify(t||{})}))}async function d(e){return s(await fetch(r(e),{method:"DELETE",credentials:"include"}))}async function u(e,t){return s(await fetch(r(e),{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t||{})}))}},19967:function(e,t,a){"use strict";var l=a(2265);let n=l.forwardRef(function(e,t){let{title:a,titleId:n,...r}=e;return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},r),a?l.createElement("title",{id:n},a):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))});t.Z=n},61601:function(e,t,a){"use strict";var l=a(2265);let n=l.forwardRef(function(e,t){let{title:a,titleId:n,...r}=e;return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},r),a?l.createElement("title",{id:n},a):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))});t.Z=n}},function(e){e.O(0,[2971,2117,1744],function(){return e(e.s=66104)}),_N_E=e.O()}]);