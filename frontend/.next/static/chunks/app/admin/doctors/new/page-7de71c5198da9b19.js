(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7463],{35720:function(e,t,a){Promise.resolve().then(a.bind(a,85026))},85026:function(e,t,a){"use strict";a.d(t,{default:function(){return c}});var l=a(57437),s=a(2265),r=a(30166),n=a(99376),i=a(32617);function o(e){let{schedule:t,onChange:a}=e;return(0,l.jsxs)("div",{className:"border p-4 rounded space-y-4",children:[(0,l.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"Weekly Schedule"}),["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].map(e=>{let s=t.find(t=>t.day===e)||{day:e,slots:[]};return(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"capitalize font-medium",children:e}),(0,l.jsx)("div",{className:"flex gap-2 flex-wrap",children:s.slots.map(s=>(0,l.jsxs)("span",{className:"bg-gray-200 px-2 py-1 rounded text-sm cursor-pointer",onClick:()=>{a(t.map(t=>t.day===e?{...t,slots:t.slots.filter(e=>e!==s)}:t))},children:[s," âœ•"]},s))}),(0,l.jsx)("button",{type:"button",onClick:()=>(function(e){let l=prompt("Enter time slot (HH:mm)");l&&a(t.map(t=>t.day===e?{...t,slots:[...t.slots,l]}:t))})(e),className:"text-blue-600 text-sm mt-1",children:"+ Add Slot"}),(0,l.jsx)("hr",{className:"my-3"})]},e)})]})}a(98527);let d=(0,r.default)(()=>Promise.all([a.e(3070),a.e(1804)]).then(a.t.bind(a,5600,23)),{loadableGenerated:{webpack:()=>[5600]},ssr:!1});function c(e){var t;let{mode:a,initialData:r}=e,c=(0,n.useRouter)(),f=(0,s.useRef)(null),[x,h]=(0,s.useState)([]),[g,v]=(0,s.useState)({name:(null==r?void 0:r.name)||"",title:(null==r?void 0:r.title)||"",departmentId:(null==r?void 0:r.departmentId)||"",degree:(null==r?void 0:r.degree)||"",specialties:(null==r?void 0:null===(t=r.specialties)||void 0===t?void 0:t.join(", "))||"",experienceYears:(null==r?void 0:r.experienceYears)||0,description:(null==r?void 0:r.description)||(null==r?void 0:r.bio)||"",photo:(null==r?void 0:r.photo)||"",galleryImages:(null==r?void 0:r.galleryImages)||[],videoUrl:(null==r?void 0:r.videoUrl)||"",medicalQualifications:(null==r?void 0:r.medicalQualifications)||[],schedule:(null==r?void 0:r.schedule)||[{day:"monday",slots:[]},{day:"tuesday",slots:[]},{day:"wednesday",slots:[]},{day:"thursday",slots:[]},{day:"friday",slots:[]},{day:"saturday",slots:[]},{day:"sunday",slots:[]}]}),[y,b]=(0,s.useState)(""),[j,N]=(0,s.useState)((null==r?void 0:r.photo)||""),[w,C]=(0,s.useState)(""),[P,S]=(0,s.useState)(""),[D,R]=(0,s.useState)((null==r?void 0:r.videoUrl)||""),[k,U]=(0,s.useState)("");function _(e,t){v({...g,[e]:t})}function O(e,t,a){let l=[...g.medicalQualifications];l[e]={...l[e],[t]:a},v({...g,medicalQualifications:l})}function E(e){if(!e)return;let t=new FileReader;t.onloadend=()=>{S(t.result.toString()),N(t.result.toString()),C(e.name)},t.readAsDataURL(e)}async function I(e){var t;e.preventDefault();let l=Array.isArray(g.galleryImages)?g.galleryImages:[],s=l.filter(e=>e&&!e.startsWith("data:")),n=l.filter(e=>e&&e.startsWith("data:")),o={...g,specialties:g.specialties.split(",").map(e=>e.trim()).filter(Boolean),description:g.description,bio:g.description,degree:g.degree,medicalQualifications:(g.medicalQualifications||[]).filter(e=>e&&e.degree),galleryImages:s,galleryImageData:n,videoUrl:null===(t=g.videoUrl)||void 0===t?void 0:t.trim(),videoData:k||void 0,imageData:P||void 0};try{"create"===a?await (0,i.sg)("/doctors",o):await (0,i.pE)("/doctors/".concat(r._id),o),c.push("/admin/doctors")}catch(e){alert(e.message||"Failed")}}return(0,s.useEffect)(()=>{!async function(){try{let e=await (0,i.R1)("/departments");h(e.data||[])}catch(e){h([])}}()},[]),(0,l.jsxs)("form",{onSubmit:I,className:"space-y-4 max-w-2xl",children:[(0,l.jsx)("input",{className:"border p-2 rounded w-full",placeholder:"Doctor Name",value:g.name,onChange:e=>_("name",e.target.value),required:!0}),(0,l.jsx)("input",{className:"border p-2 rounded w-full",placeholder:"Title (e.g., Senior Cardiologist)",value:g.title,onChange:e=>_("title",e.target.value),required:!0}),(0,l.jsx)("input",{className:"border p-2 rounded w-full",placeholder:"Degree (e.g., MD, MBBS)",value:g.degree,onChange:e=>_("degree",e.target.value)}),(0,l.jsxs)("select",{className:"border p-2 rounded w-full",value:g.departmentId,onChange:e=>_("departmentId",e.target.value),required:!0,children:[(0,l.jsx)("option",{value:"",children:"Select Department"}),x.map(e=>(0,l.jsx)("option",{value:e._id,children:e.name},e._id))]}),(0,l.jsx)("input",{className:"border p-2 rounded w-full",placeholder:"Specialties (comma separated)",value:g.specialties,onChange:e=>_("specialties",e.target.value)}),(0,l.jsx)("input",{type:"number",className:"border p-2 rounded w-full",placeholder:"Experience (years)",value:g.experienceYears,onChange:e=>_("experienceYears",e.target.value)}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("p",{className:"text-sm font-medium text-neutral-700",children:"Doctor Description"}),(0,l.jsx)(d,{theme:"snow",value:g.description,onChange:e=>_("description",e),placeholder:"Add rich details about the doctor",modules:{toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["link"],["clean"]]}})]}),(0,l.jsx)("input",{className:"border p-2 rounded w-full",placeholder:"Photo URL",value:g.photo,onChange:e=>_("photo",e.target.value)}),(0,l.jsxs)("div",{className:"space-y-3 rounded-2xl border border-slate-800 bg-slate-900/70",children:[(0,l.jsxs)("div",{className:"border-b border-slate-800 px-4 py-3",children:[(0,l.jsx)("p",{className:"text-sm font-semibold text-white",children:"Media"}),(0,l.jsx)("p",{className:"text-xs text-slate-400",children:"Styled like the patient review uploader for gallery & video."})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4",children:[(0,l.jsxs)(u,{title:"Profile photo",helper:"Drop or click to upload the main headshot.",children:[(0,l.jsxs)("div",{className:"border-2 border-dashed border-slate-700 bg-slate-900/60 rounded-xl p-4 flex flex-col gap-3 items-center justify-center text-slate-300 cursor-pointer hover:border-teal-500 transition",onDragOver:e=>e.preventDefault(),onDrop:function(e){var t;e.preventDefault();let a=null===(t=e.dataTransfer.files)||void 0===t?void 0:t[0];a&&E(a)},onClick:()=>{var e;return null===(e=f.current)||void 0===e?void 0:e.click()},children:[(0,l.jsx)("input",{type:"file",accept:"image/*",ref:f,className:"hidden",onChange:function(e){var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];a&&E(a)}}),(0,l.jsxs)("div",{className:"text-center space-y-1",children:[(0,l.jsx)("p",{className:"font-medium",children:"Drop an image here or click to upload"}),(0,l.jsx)("p",{className:"text-xs text-slate-500",children:"Recommended: square, under 5MB. JPG or PNG."})]}),w&&(0,l.jsxs)("p",{className:"text-xs text-teal-300",children:["Selected: ",w]})]}),j||g.photo?(0,l.jsxs)("div",{className:"w-full grid grid-cols-1 md:grid-cols-[140px_1fr] gap-3 items-center",children:[(0,l.jsx)("img",{src:j||g.photo,alt:"Preview",className:"w-full max-w-[140px] h-28 object-cover rounded-lg border border-slate-700"}),(0,l.jsx)("p",{className:"text-xs text-slate-400",children:"This preview will be uploaded to Cloudinary and saved."})]}):null]}),(0,l.jsxs)(u,{title:"Gallery images",helper:"Upload or paste up to 10 images.",children:[(0,l.jsx)(p,{accept:"image/png,image/jpeg,image/webp",multiple:!0,onChange:function(e){Array.from(e.target.files||[]).forEach(e=>{let t=new FileReader;t.onloadend=()=>{v(e=>({...e,galleryImages:[...e.galleryImages||[],t.result.toString()]}))},t.readAsDataURL(e)})},label:"Upload images"}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:(g.galleryImages||[]).map((e,t)=>(0,l.jsx)(m,{src:e,onRemove:()=>{v(e=>({...e,galleryImages:(e.galleryImages||[]).filter((e,a)=>a!==t)}))}},e+t))}),(0,l.jsx)("p",{className:"text-[11px] text-slate-500",children:"Accepted: JPG/PNG/WEBP. Max 10 images."})]}),(0,l.jsxs)(u,{title:"Profile video",helper:"Paste a YouTube/Vimeo link or direct video URL.",children:[(0,l.jsx)("input",{className:"w-full rounded-lg bg-slate-900 border border-slate-700 px-3 py-2 text-white text-sm placeholder-slate-500",placeholder:"Video URL (optional)",value:g.videoUrl,onChange:e=>_("videoUrl",e.target.value)}),(0,l.jsx)(p,{accept:"video/mp4,video/quicktime,video/webm",onChange:function(e){var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!a)return;let l=new FileReader;l.onloadend=()=>{U(l.result.toString()),R(URL.createObjectURL(a)),v(e=>({...e,videoUrl:""}))},l.readAsDataURL(a)},label:"Upload video file"}),D||g.videoUrl?(0,l.jsx)("div",{className:"mt-2 overflow-hidden rounded-lg border border-slate-700 bg-black",children:(0,l.jsx)("iframe",{src:D||g.videoUrl,className:"w-full aspect-video",title:"Doctor video preview",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0})}):null]})]})]}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("p",{className:"text-sm font-medium text-neutral-700",children:"Medical Qualifications"}),(0,l.jsx)("button",{type:"button",onClick:function(){v(e=>({...e,medicalQualifications:[...e.medicalQualifications||[],{degree:"",institution:"",year:""}]}))},className:"px-3 py-1 text-sm rounded bg-neutral-200 hover:bg-neutral-300 transition",children:"Add"})]}),(0,l.jsx)("div",{className:"space-y-3",children:(g.medicalQualifications||[]).map((e,t)=>(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 items-start",children:[(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("label",{className:"text-xs text-neutral-600",children:"Degree (required)"}),(0,l.jsx)("input",{className:"border p-2 rounded w-full",value:e.degree,onChange:e=>O(t,"degree",e.target.value),placeholder:"e.g., MD, MBBS",required:!0})]}),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("label",{className:"text-xs text-neutral-600",children:"Institution"}),(0,l.jsx)("input",{className:"border p-2 rounded w-full",value:e.institution||"",onChange:e=>O(t,"institution",e.target.value),placeholder:"e.g., Johns Hopkins"})]}),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("label",{className:"text-xs text-neutral-600",children:"Year"}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("input",{className:"border p-2 rounded w-full",value:e.year||"",onChange:e=>O(t,"year",e.target.value),placeholder:"e.g., 2015"}),(0,l.jsx)("button",{type:"button",onClick:()=>{v(e=>({...e,medicalQualifications:e.medicalQualifications.filter((e,a)=>a!==t)}))},className:"px-3 py-2 text-sm rounded bg-rose-100 text-rose-700 hover:bg-rose-200 transition",children:"Remove"})]})]})]},t))})]}),(0,l.jsx)(o,{schedule:g.schedule,onChange:e=>_("schedule",e)}),(0,l.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded",children:"create"===a?"Create Doctor":"Update Doctor"})]})}function u(e){let{title:t,helper:a,children:s}=e;return(0,l.jsxs)("div",{className:"space-y-3 rounded-xl border border-slate-800 bg-slate-900/70 p-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-semibold text-white",children:t}),a?(0,l.jsx)("p",{className:"text-xs text-slate-400",children:a}):null]}),(0,l.jsx)("div",{className:"space-y-2",children:s})]})}function p(e){let{accept:t,multiple:a,onChange:s,label:r}=e;return(0,l.jsxs)("label",{className:"flex flex-col items-center justify-center gap-2 rounded-xl border border-dashed border-slate-700 bg-slate-900/60 px-4 py-5 text-slate-300 cursor-pointer hover:border-teal-500 hover:bg-slate-900 transition",children:[(0,l.jsx)("input",{type:"file",accept:t,multiple:a,className:"hidden",onChange:e=>{s&&s(e)}}),(0,l.jsx)("span",{className:"text-xs text-slate-400",children:r}),(0,l.jsx)("span",{className:"text-[11px] text-slate-500",children:t||""})]})}function m(e){let{src:t,onRemove:a}=e;return(0,l.jsxs)("div",{className:"relative h-20 w-20 rounded-lg overflow-hidden border border-slate-700 bg-slate-800",children:[(0,l.jsx)("img",{src:t,className:"h-full w-full object-cover",alt:"Gallery"}),(0,l.jsx)("button",{type:"button",onClick:a,className:"absolute top-1 right-1 bg-black/70 text-white rounded-full text-xs px-1",children:"\xd7"})]})}},32617:function(e,t,a){"use strict";a.d(t,{QW:function(){return d},R1:function(){return n},nc:function(){return c},pE:function(){return o},sg:function(){return i}});let l="http://localhost:5000/api".replace(/\/$/,""),s="".concat(l,"/api");async function r(e){let t=await e.json().catch(()=>({}));if(!e.ok){let a=Error((null==t?void 0:t.message)||"Request failed");throw a.status=e.status,a}return t}async function n(e){return r(await fetch("".concat(s).concat(e),{method:"GET",credentials:"include"}))}async function i(e,t){let a="undefined"!=typeof FormData&&t instanceof FormData;return r(await fetch("".concat(s).concat(e),{method:"POST",credentials:"include",headers:a?void 0:{"Content-Type":"application/json"},body:a?t:JSON.stringify(t||{})}))}async function o(e,t){let a="undefined"!=typeof FormData&&t instanceof FormData;return r(await fetch("".concat(s).concat(e),{method:"PUT",credentials:"include",headers:a?void 0:{"Content-Type":"application/json"},body:a?t:JSON.stringify(t||{})}))}async function d(e){return r(await fetch("".concat(s).concat(e),{method:"DELETE",credentials:"include"}))}async function c(e,t){return r(await fetch("".concat(s).concat(e),{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t||{})}))}},30166:function(e,t,a){"use strict";a.d(t,{default:function(){return s.a}});var l=a(55775),s=a.n(l)},99376:function(e,t,a){"use strict";var l=a(35475);a.o(l,"useParams")&&a.d(t,{useParams:function(){return l.useParams}}),a.o(l,"usePathname")&&a.d(t,{usePathname:function(){return l.usePathname}}),a.o(l,"useRouter")&&a.d(t,{useRouter:function(){return l.useRouter}}),a.o(l,"useSearchParams")&&a.d(t,{useSearchParams:function(){return l.useSearchParams}})},55775:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r}});let l=a(60917);a(57437),a(2265);let s=l._(a(15602));function r(e,t){var a;let l={loading:e=>{let{error:t,isLoading:a,pastDelay:l}=e;return null}};"function"==typeof e&&(l.loader=e);let r={...l,...t};return(0,s.default)({...r,modules:null==(a=r.loadableGenerated)?void 0:a.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},81523:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return s}});let l=a(18993);function s(e){let{reason:t,children:a}=e;if("undefined"==typeof window)throw new l.BailoutToCSRError(t);return a}},15602:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return d}});let l=a(57437),s=a(2265),r=a(81523),n=a(70049);function i(e){return{default:e&&"default"in e?e.default:e}}let o={loader:()=>Promise.resolve(i(()=>null)),loading:null,ssr:!0},d=function(e){let t={...o,...e},a=(0,s.lazy)(()=>t.loader().then(i)),d=t.loading;function c(e){let i=d?(0,l.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,o=t.ssr?(0,l.jsxs)(l.Fragment,{children:["undefined"==typeof window?(0,l.jsx)(n.PreloadCss,{moduleIds:t.modules}):null,(0,l.jsx)(a,{...e})]}):(0,l.jsx)(r.BailoutToCSR,{reason:"next/dynamic",children:(0,l.jsx)(a,{...e})});return(0,l.jsx)(s.Suspense,{fallback:i,children:o})}return c.displayName="LoadableComponent",c}},70049:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return r}});let l=a(57437),s=a(20544);function r(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let a=(0,s.getExpectedRequestStore)("next/dynamic css"),r=[];if(a.reactLoadableManifest&&t){let e=a.reactLoadableManifest;for(let a of t){if(!e[a])continue;let t=e[a].files.filter(e=>e.endsWith(".css"));r.push(...t)}}return 0===r.length?null:(0,l.jsx)(l.Fragment,{children:r.map(e=>(0,l.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:a.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},98527:function(){}},function(e){e.O(0,[6458,2971,2117,1744],function(){return e(e.s=35720)}),_N_E=e.O()}]);