(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[56],{72277:function(e,t,l){Promise.resolve().then(l.bind(l,58442))},58442:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return g}});var a=l(57437),s=l(2265),i=l(50102),n=l(30083),r=l(32617),d=l(97129),o=l(32578),c=l(22631),u=l(5137),m=l(9878),x=l(14663);function h(e){var t,l,s,n,r,d;let{item:h,onDelete:g,onEdit:f,onToggle:b,toggleDisabled:p=!1}=e,v=(null===(n=h.images)||void 0===n?void 0:n.length)?{type:"image",src:h.images[0]}:(null===(r=h.videos)||void 0===r?void 0:r.length)?{type:"video",src:h.videos[0]}:(null===(d=h.youtubeLinks)||void 0===d?void 0:d.length)?{type:"youtube",src:h.youtubeLinks[0]}:null,j=(null===(t=h.images)||void 0===t?void 0:t.length)||0,w=(null===(l=h.videos)||void 0===l?void 0:l.length)||0,y=(null===(s=h.youtubeLinks)||void 0===s?void 0:s.length)||0;return(0,a.jsxs)("div",{className:"relative rounded-2xl border border-white/10 bg-[#11151c] overflow-hidden hover:border-teal-600/40 transition shadow-sm flex flex-col",children:[(0,a.jsxs)("div",{className:"aspect-square bg-slate-900",children:[(null==v?void 0:v.type)==="image"&&(0,a.jsx)("img",{src:v.src,alt:h.title,className:"h-full w-full object-cover",loading:"lazy"}),(null==v?void 0:v.type)==="video"&&(0,a.jsx)("video",{src:v.src,className:"h-full w-full object-cover",muted:!0,loop:!0}),(null==v?void 0:v.type)==="youtube"&&(0,a.jsx)("iframe",{src:v.src,className:"h-full w-full",title:h.title,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),!v&&(0,a.jsx)("div",{className:"h-full w-full bg-slate-800"})]}),(0,a.jsxs)("div",{className:"p-3 space-y-2 flex-1",children:[(0,a.jsx)("p",{className:"text-white font-semibold line-clamp-2",children:h.title}),(0,a.jsx)("p",{className:"text-xs text-slate-400 line-clamp-2",children:h.description}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-xs text-slate-400",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(i.Z,{className:"h-4 w-4 text-teal-300"})," ",j," photos"]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4 text-teal-300"})," ",w," videos"]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(c.Z,{className:"h-4 w-4 text-teal-300"})," ",y," YouTube"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-[11px] text-slate-500",children:[(0,a.jsx)("p",{children:h.createdAt?new Date(h.createdAt).toLocaleDateString():""}),b&&(0,a.jsx)(x.W,{status:h.isPublished?"published":"draft",onToggle:b,disabled:p})]})]}),(0,a.jsxs)("div",{className:"absolute inset-0 bg-black/40 opacity-0 hover:opacity-100 transition flex items-start justify-end p-2 gap-2",children:[(0,a.jsx)("button",{onClick:()=>null==f?void 0:f(h),className:"p-2 rounded-md bg-slate-900/80 hover:bg-teal-700 transition",title:"Edit",children:(0,a.jsx)(u.Z,{className:"h-5 w-5 text-teal-300"})}),(0,a.jsx)("button",{onClick:()=>null==g?void 0:g(h._id),className:"p-2 rounded-md bg-slate-900/80 hover:bg-rose-700 transition",title:"Delete",children:(0,a.jsx)(m.Z,{className:"h-5 w-5 text-rose-300"})})]})]})}function g(){let[e,t]=(0,s.useState)([]),[l,o]=(0,s.useState)(!0),[c,u]=(0,s.useState)(""),[m,x]=(0,s.useState)(!1),[g,f]=(0,s.useState)(null),[b,p]=(0,s.useState)(null);async function v(){o(!0),u("");try{let e=await (0,r.R1)("/gallery"),l=(null==e?void 0:e.data)||e||[];t(l)}catch(e){u("Failed to load gallery")}o(!1)}async function j(e){p(e._id);try{let l=await (0,r.pE)("/gallery/".concat(e._id),{isPublished:!e.isPublished}),a=(null==l?void 0:l.data)||l;t(t=>t.map(t=>t._id===e._id?{...t,...a}:t))}catch(e){alert(e.message||"Failed to update publish status")}finally{p(null)}}async function w(e){if(confirm("Delete this gallery item?"))try{await (0,r.QW)("/gallery/".concat(e)),t(t=>t.filter(t=>t._id!==e))}catch(e){alert(e.message||"Delete failed")}}return(0,s.useEffect)(()=>{v()},[]),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h1",{className:"text-2xl text-white font-semibold flex items-center gap-2",children:[(0,a.jsx)(i.Z,{className:"h-7 w-7 text-teal-400"}),"Manage Gallery"]}),(0,a.jsxs)("button",{onClick:()=>{f(null),x(!0)},className:"flex items-center gap-2 bg-teal-600 hover:bg-teal-500 text-white px-5 py-2 rounded-lg transition",children:[(0,a.jsx)(n.Z,{className:"h-5 w-5"}),"Add Gallery Item"]})]}),c&&(0,a.jsx)("div",{className:"rounded-lg border border-rose-500/40 bg-rose-900/20 text-rose-200 px-4 py-3 text-sm",children:c}),l&&(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:Array.from({length:8}).map((e,t)=>(0,a.jsx)("div",{className:"h-40 bg-slate-800 rounded-xl animate-pulse"},t))}),!l&&0===e.length&&(0,a.jsxs)("div",{className:"text-center py-20 text-gray-400",children:[(0,a.jsx)(i.Z,{className:"h-16 w-16 text-gray-600 mx-auto mb-4"}),(0,a.jsx)("p",{children:"No images found."}),(0,a.jsx)("button",{onClick:()=>x(!0),className:"inline-block mt-4 bg-teal-600 hover:bg-teal-500 text-white px-5 py-2 rounded-lg transition",children:"Add First Image"})]}),!l&&e.length>0&&(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:e.map(e=>(0,a.jsx)(h,{item:e,onDelete:w,onEdit:e=>{f(e),x(!0)},onToggle:()=>j(e),toggleDisabled:b===e._id},e._id))}),(0,a.jsx)(d.Z,{open:m,onClose:()=>x(!1),onSaved:()=>{x(!1),v()},initialData:g})]})}},14663:function(e,t,l){"use strict";l.d(t,{W:function(){return i},t:function(){return s}});var a=l(57437);function s(e){let{status:t}=e,l="published"===t;return(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-[11px] font-semibold ".concat(l?"bg-emerald-600/20 text-emerald-200 border border-emerald-500/40":"bg-slate-700/60 text-slate-200 border border-slate-600"),children:l?"Published":"Draft"})}function i(e){let{status:t,onToggle:l,disabled:s}=e,i="published"===t;return(0,a.jsx)("button",{type:"button",onClick:l,disabled:s,className:"relative inline-flex h-7 w-12 items-center rounded-full border ".concat(i?"bg-emerald-600/30 border-emerald-400":"bg-slate-700 border-slate-500"," transition disabled:opacity-60"),"aria-label":"Toggle publish",children:(0,a.jsx)("span",{className:"absolute left-1 h-5 w-5 rounded-full bg-white transition-transform ".concat(i?"translate-x-5":"translate-x-0")})})}},5137:function(e,t,l){"use strict";var a=l(2265);let s=a.forwardRef(function(e,t){let{title:l,titleId:s,...i}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),l?a.createElement("title",{id:s},l):null,a.createElement("path",{d:"M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-8.4 8.4a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32l8.4-8.4Z"}),a.createElement("path",{d:"M5.25 5.25a3 3 0 0 0-3 3v10.5a3 3 0 0 0 3 3h10.5a3 3 0 0 0 3-3V13.5a.75.75 0 0 0-1.5 0v5.25a1.5 1.5 0 0 1-1.5 1.5H5.25a1.5 1.5 0 0 1-1.5-1.5V8.25a1.5 1.5 0 0 1 1.5-1.5h5.25a.75.75 0 0 0 0-1.5H5.25Z"}))});t.Z=s},30083:function(e,t,l){"use strict";var a=l(2265);let s=a.forwardRef(function(e,t){let{title:l,titleId:s,...i}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),l?a.createElement("title",{id:s},l):null,a.createElement("path",{fillRule:"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"}))});t.Z=s},9878:function(e,t,l){"use strict";var a=l(2265);let s=a.forwardRef(function(e,t){let{title:l,titleId:s,...i}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),l?a.createElement("title",{id:s},l):null,a.createElement("path",{fillRule:"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z",clipRule:"evenodd"}))});t.Z=s}},function(e){e.O(0,[7129,2971,2117,1744],function(){return e(e.s=72277)}),_N_E=e.O()}]);