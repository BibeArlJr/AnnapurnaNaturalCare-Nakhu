(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5920],{71221:function(t,e,n){Promise.resolve().then(n.bind(n,23597))},23597:function(t,e,n){"use strict";n.d(e,{default:function(){return c}});var a=n(57437),u=n(2265),r=n(1233);function c(){let{login:t,error:e}=(0,r.a)(),[n,c]=(0,u.useState)(""),[o,s]=(0,u.useState)(""),[i,l]=(0,u.useState)(""),[d,f]=(0,u.useState)(!1);async function h(e){e.preventDefault(),l(""),f(!0);try{await t(n,o)}catch(t){l(t.message||"Login failed")}finally{f(!1)}}return(0,a.jsxs)("form",{onSubmit:h,className:"space-y-4 max-w-sm mx-auto",children:[(0,a.jsx)("input",{type:"email",placeholder:"Email",className:"border p-2 rounded w-full",value:n,onChange:t=>c(t.target.value),required:!0}),(0,a.jsx)("input",{type:"password",placeholder:"Password",className:"border p-2 rounded w-full",value:o,onChange:t=>s(t.target.value),required:!0}),(i||e)&&(0,a.jsx)("p",{className:"text-red-600 text-sm",children:i||e}),(0,a.jsx)("button",{type:"submit",className:"w-full bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:bg-blue-300",disabled:d,children:d?"Logging in...":"Login"})]})}},1233:function(t,e,n){"use strict";n.d(e,{AuthProvider:function(){return s},a:function(){return i}});var a=n(57437),u=n(2265),r=n(99376),c=n(32617);let o=(0,u.createContext)(null);function s(t){let{children:e}=t,[n,s]=(0,u.useState)(null),[i,l]=(0,u.useState)(!0),[d,f]=(0,u.useState)(""),h=(0,r.useRouter)();async function m(){try{let t=await (0,c.R1)("/auth/me");s(t.data||null),f("")}catch(t){s(null),f("")}finally{l(!1)}}async function p(t,e){l(!0);try{let n=await (0,c.sg)("/auth/login",{email:t,password:e});s(n.data||null),f(""),h.push("/admin")}catch(t){throw f(t.message||"Login failed"),s(null),t}finally{l(!1)}}async function y(){try{await (0,c.sg)("/auth/logout")}catch(t){}s(null),h.push("/admin/login")}return(0,u.useEffect)(()=>{m()},[]),(0,a.jsx)(o.Provider,{value:{user:n,loading:i,error:d,login:p,logout:y,refresh:m},children:e})}function i(){return(0,u.useContext)(o)}},32617:function(t,e,n){"use strict";n.d(e,{QW:function(){return i},R1:function(){return c},nc:function(){return l},pE:function(){return s},sg:function(){return o}});let a="http://localhost:5000/api".replace(/\/$/,""),u="".concat(a,"/api");async function r(t){let e=await t.json().catch(()=>({}));if(!t.ok){let n=Error((null==e?void 0:e.message)||"Request failed");throw n.status=t.status,n}return e}async function c(t){return r(await fetch("".concat(u).concat(t),{method:"GET",credentials:"include"}))}async function o(t,e){let n="undefined"!=typeof FormData&&e instanceof FormData;return r(await fetch("".concat(u).concat(t),{method:"POST",credentials:"include",headers:n?void 0:{"Content-Type":"application/json"},body:n?e:JSON.stringify(e||{})}))}async function s(t,e){let n="undefined"!=typeof FormData&&e instanceof FormData;return r(await fetch("".concat(u).concat(t),{method:"PUT",credentials:"include",headers:n?void 0:{"Content-Type":"application/json"},body:n?e:JSON.stringify(e||{})}))}async function i(t){return r(await fetch("".concat(u).concat(t),{method:"DELETE",credentials:"include"}))}async function l(t,e){return r(await fetch("".concat(u).concat(t),{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e||{})}))}},99376:function(t,e,n){"use strict";var a=n(35475);n.o(a,"useParams")&&n.d(e,{useParams:function(){return a.useParams}}),n.o(a,"usePathname")&&n.d(e,{usePathname:function(){return a.usePathname}}),n.o(a,"useRouter")&&n.d(e,{useRouter:function(){return a.useRouter}}),n.o(a,"useSearchParams")&&n.d(e,{useSearchParams:function(){return a.useSearchParams}})}},function(t){t.O(0,[2971,2117,1744],function(){return t(t.s=71221)}),_N_E=t.O()}]);