(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4574],{99696:function(e,t,a){Promise.resolve().then(a.bind(a,46867))},46867:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return v}});var n=a(57437),l=a(2265),s=a(71096),r=a.n(s),i=a(32617),o=a(99376);let d={paid:"bg-emerald-900/70 text-emerald-200",pending:"bg-amber-900/70 text-amber-200",cancelled:"bg-red-900/70 text-red-200",failed:"bg-red-900/70 text-red-200",refunded:"bg-slate-800 text-slate-200"},c=e=>null==e||""===e?"—":e,u=e=>"$".concat(Number(e||0).toFixed(2)),m=e=>e?r()(e).format("MMM D, YYYY"):"—",p=e=>"health"===e||"package"===e?"Health Package":"retreat"===e?"Retreat Program":"health_program"===e?"Health Program":"course"===e?"Course":"—",x=e=>{if(null==e||isNaN(e))return"—";let t=["","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"],a=["","","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"],n=e=>e<20?t[e]:e<100?"".concat(a[Math.floor(e/10)]).concat(e%10?"-"+t[e%10]:""):e<1e3?"".concat(t[Math.floor(e/100)]," hundred").concat(e%100?" "+n(e%100):""):e<1e6?"".concat(n(Math.floor(e/1e3))," thousand").concat(e%1e3?" "+n(e%1e3):""):"".concat(e),l=Math.floor(e),s=Math.round((e-l)*100),r=n(l)||"zero",i=s?" and ".concat(n(s)," cents"):"";return"".concat(r," dollars").concat(i)};function h(e,t,a){var n,l,s,r,i,o,d,c,u,m,p,x,h,v,g,f,b,y,j,N,w,P,k,D,S,$,M,_,T,C,Y,O,A;let I=[],R=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];for(let e of t){let t=Number(e);if(!isNaN(t)&&t>0)return t}return 0},H=Number((null==t?void 0:t.numberOfPeople)||(null==t?void 0:t.peopleCount)||(null==t?void 0:t.participants)||(null==e?void 0:null===(n=e.metadata)||void 0===n?void 0:n.numberOfPeople)||1)||1,U=null==e?void 0:e.bookingType,E="retreat_program"===U?"retreat":"health_program"===U?"health_program":"course"===U?"course":"health"===U||"package"===U?"health":U,F=Number(null==e?void 0:e.amount)||0,L=Number((null==t?void 0:t.totalPriceUSD)||(null==t?void 0:t.totalPrice)||(null==e?void 0:null===(l=e.metadata)||void 0===l?void 0:l.totalPriceUSD)||(null==e?void 0:null===(s=e.metadata)||void 0===s?void 0:s.totalPrice))||0;if("retreat"===E){let n=(null==t?void 0:t.programTitle)||(null==t?void 0:null===(i=t.program)||void 0===i?void 0:i.title)||(null==a?void 0:a.title)||(null==e?void 0:null===(o=e.metadata)||void 0===o?void 0:o.programTitle)||(null==e?void 0:null===(d=e.metadata)||void 0===d?void 0:d.programName),l=R(null==a?void 0:a.basePricePerPerson,null==a?void 0:a.pricePerPersonUSD,null==a?void 0:a.retreatPricePerPerson,null==t?void 0:null===(c=t.program)||void 0===c?void 0:c.pricePerPerson,null==t?void 0:null===(u=t.program)||void 0===u?void 0:u.pricePerPersonUSD,null==t?void 0:null===(m=t.program)||void 0===m?void 0:m.basePricePerPerson,null==t?void 0:null===(p=t.program)||void 0===p?void 0:p.basePrice,null==t?void 0:t.pricePerPersonUSD,null==t?void 0:t.retreatPricePerPerson,null==t?void 0:t.pricePerPerson,null==t?void 0:t.retreatPricePerPersonUSD,null==t?void 0:t.programPricePerPerson,null==e?void 0:null===(x=e.metadata)||void 0===x?void 0:x.retreatPricePerPerson);l&&I.push({label:"Retreat Program",sub:n||"—",qty:H,unit:l,total:l*H});let s=(null==t?void 0:t.accommodationChoice)||(null==t?void 0:t.accommodationType)||(null==t?void 0:null===(h=t.accommodation)||void 0===h?void 0:h.key),r=(null==t?void 0:null===(v=t.accommodation)||void 0===v?void 0:v.label)||(null==t?void 0:t.accommodationLabel)||s||(null==a?void 0:null===(f=a.accommodationPricing)||void 0===f?void 0:null===(g=f.find(e=>e.key===s))||void 0===g?void 0:g.label)||(null==e?void 0:null===(b=e.metadata)||void 0===b?void 0:b.accommodationLabel),D=R(null==e?void 0:null===(y=e.metadata)||void 0===y?void 0:y.accommodationPricePerNight,null==e?void 0:null===(j=e.metadata)||void 0===j?void 0:j.accommodationPricePerPerson,null==e?void 0:null===(N=e.metadata)||void 0===N?void 0:N.accommodationPricePerPersonUSD,null==t?void 0:t.hotelPricePerNight,null==t?void 0:t.accommodationPricePerNight,null==t?void 0:t.accommodationPricePerPerson,null==t?void 0:t.accommodationPricePerPersonUSD,s&&(null==a?void 0:null===(w=a.accommodationPricing)||void 0===w?void 0:w.length)?null===(P=a.accommodationPricing.find(e=>e.key===s))||void 0===P?void 0:P.pricePerPersonUSD:0),S=Number((null==t?void 0:t.accommodationNights)||(null==t?void 0:t.hotelNights)||(null==e?void 0:null===(k=e.metadata)||void 0===k?void 0:k.accommodationNights))||Number((null==a?void 0:a.durationDays)||(null==a?void 0:a.duration))||1;D&&I.push({label:"Accommodation",sub:r||"Selected option",qty:H,unit:D,total:D*S*H})}else if("health_program"===E){let a=(null==t?void 0:t.programTitle)||(null==t?void 0:null===(D=t.program)||void 0===D?void 0:D.title)||(null==e?void 0:null===(S=e.metadata)||void 0===S?void 0:S.programTitle)||"Health Program",n=R(null==t?void 0:t.pricePerPerson,null==t?void 0:t.pricePerPersonUSD,null==e?void 0:null===($=e.metadata)||void 0===$?void 0:$.pricePerPerson,null==e?void 0:null===(M=e.metadata)||void 0===M?void 0:M.pricePerPersonUSD);n&&I.push({label:"Health Program",sub:a,qty:H,unit:n,total:n*H})}else if("course"===E){let a=(null==t?void 0:t.courseTitle)||(null==t?void 0:null===(_=t.course)||void 0===_?void 0:_.title)||(null==e?void 0:null===(T=e.metadata)||void 0===T?void 0:T.courseTitle)||"Course",n=R(null==t?void 0:t.pricePerPerson,null==e?void 0:null===(C=e.metadata)||void 0===C?void 0:C.pricePerPerson,null==t?void 0:t.pricePerPersonUSD,null==e?void 0:null===(Y=e.metadata)||void 0===Y?void 0:Y.pricePerPersonUSD);n&&I.push({label:"Course",sub:a,qty:H,unit:n,total:n*H})}else{let n=(null==t?void 0:t.packageName)||(null==a?void 0:a.name),l=(null==t?void 0:t.pricePerPerson)||(null==t?void 0:t.pricePerPersonUSD)||(null==a?void 0:a.price)||(null==a?void 0:a.pricePerPersonUSD)||(null==e?void 0:null===(O=e.metadata)||void 0===O?void 0:O.pricePerPerson)||((null==e?void 0:null===(A=e.metadata)||void 0===A?void 0:A.packageSubtotal)&&H?Number(e.metadata.packageSubtotal)/H:0)||((null==e?void 0:e.amount)&&H?e.amount/H:0)||0;l&&I.push({label:"Health Package",sub:n||"—",qty:H,unit:l,total:l*H})}if(0===I.length&&(F||L)){let e=F||L;I.push({label:"retreat"===E?"Retreat Program":"health"===E?"Health Package":"Booking",sub:(null==t?void 0:t.programTitle)||(null==a?void 0:a.title)||(null==t?void 0:t.packageName)||(null==a?void 0:a.name)||"Booking",qty:H,unit:e/H,total:e})}let z=I.reduce((e,t)=>e+(Number(t.total)||0),0)||F||(null==e?void 0:null===(r=e.metadata)||void 0===r?void 0:r.subtotal)||L||0;return{rows:I,subtotal:z,qty:H}}function v(){let[e,t]=(0,l.useState)([]),[a,s]=(0,l.useState)(!0),[v,k]=(0,l.useState)({status:"",bookingType:"",email:"",startDate:"",endDate:""}),[D,S]=(0,l.useState)({paidAmount:0,pendingAmount:0,count:0}),[$,M]=(0,l.useState)(null),[_,T]=(0,l.useState)(!1),[C,Y]=(0,l.useState)(!1),[O,A]=(0,l.useState)(null),[I,R]=(0,l.useState)(null),[H,U]=(0,l.useState)(!1),[E,F]=(0,l.useState)(!1),[L,z]=(0,l.useState)(!1),[V,B]=(0,l.useState)(!1),[W,J]=(0,l.useState)([]),q=(0,l.useRef)(null),Z=(0,l.useRef)(null);(0,o.useRouter)();let G=(0,l.useMemo)(()=>{let e=new URLSearchParams;return Object.entries(v).forEach(t=>{let[a,n]=t;n&&e.append(a,n)}),e.toString()},[v]),Q=async()=>{s(!0);try{let e=await (0,i.R1)("/admin/payments".concat(G?"?".concat(G):""));t((null==e?void 0:e.data)||e||[]),S((null==e?void 0:e.totals)||{paidAmount:0,pendingAmount:0,count:0})}catch(e){console.error("Payments load error:",e)}finally{s(!1)}};(0,l.useEffect)(()=>{Q()},[G]);let K=(0,l.useMemo)(()=>{let t=r()().subtract(30,"day");return e.filter(e=>"paid"===e.status&&e.createdAt&&r()(e.createdAt).isAfter(t)).reduce((e,t)=>e+(Number(t.amount)||0),0)},[e]),X=async e=>{T(!0),M(e),A(null),R(null),U(!1);try{let l=await (0,i.R1)("/admin/payments/".concat(e._id)),s=(null==l?void 0:l.data)||l||e;if(M(s),s.bookingId)try{var t,a,n;if("health"===s.bookingType){let e=await (0,i.R1)("/package-bookings"),t=((null==e?void 0:e.data)||e||[]).find(e=>e._id===s.bookingId);if(t?A(t):U(!0),null==t?void 0:t.packageId){let e=await (0,i.R1)("/packages/".concat(t.packageId)).catch(()=>null);((null==e?void 0:e.data)||(null==e?void 0:e.name))&&R(e.data||e)}}else if("retreat"===s.bookingType){let e=await (0,i.R1)("/retreat-bookings"),a=((null==e?void 0:e.data)||e||[]).find(e=>e._id===s.bookingId);a?A(a):U(!0);let n=(null==a?void 0:a.programId)||(null===(t=s.metadata)||void 0===t?void 0:t.programId);if(n){let e=await (0,i.R1)("/retreat-programs/".concat(n)).catch(()=>null);((null==e?void 0:e.data)||(null==e?void 0:e.title))&&R(e.data||e)}}else if("health_program"===s.bookingType){let e=await (0,i.R1)("/health-program-bookings"),t=((null==e?void 0:e.data)||e||[]).find(e=>e._id===s.bookingId);t?A(t):U(!0);let n=(null==t?void 0:t.programId)||(null===(a=s.metadata)||void 0===a?void 0:a.programId);if(n){let e=await (0,i.R1)("/health-programs/".concat(n)).catch(()=>null);((null==e?void 0:e.data)||(null==e?void 0:e.title))&&R(e.data||e)}}else if("course"===s.bookingType){let e=await (0,i.R1)("/course-bookings"),t=((null==e?void 0:e.data)||e||[]).find(e=>e._id===s.bookingId);t?A(t):U(!0);let a=(null==t?void 0:t.courseId)||(null===(n=s.metadata)||void 0===n?void 0:n.courseId);if(a){let e=await (0,i.R1)("/courses/".concat(a)).catch(()=>null);((null==e?void 0:e.data)||(null==e?void 0:e.title))&&R(e.data||e)}}}catch(e){U(!0)}}catch(e){}finally{T(!1)}},ee=e=>{F(!0),setTimeout(()=>{var e;return null===(e=q.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth",block:"start"})},50)},et=async e=>{try{await navigator.clipboard.writeText(e||"")}catch(e){}},ea=e=>{let t=G?"?".concat(G):"";window.open("/api/admin/payments/export/".concat(e).concat(t),"_blank")},en=e=>{J(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},el=async()=>{if(W.length&&window.confirm("Cancel selected payments? This will mark them cancelled and set linked bookings to unpaid.")){Y(!0);try{await Promise.all(W.map(e=>(0,i.nc)("/admin/payments/".concat(e,"/cancel")))),t(e=>{let t=e.filter(e=>!W.includes(e._id)),a=t.filter(e=>"paid"===e.status).reduce((e,t)=>e+(Number(t.amount)||0),0),n=t.filter(e=>"pending"===e.status).reduce((e,t)=>e+(Number(t.amount)||0),0);return S({paidAmount:a,pendingAmount:n,count:t.length}),t}),J([]),await Q()}catch(e){alert((null==e?void 0:e.message)||"Failed to cancel selected payments")}finally{Y(!1)}}},es=async()=>{if(null==$?void 0:$._id){Y(!0);try{let e=await (0,i.nc)("/admin/payments/".concat($._id,"/mark-paid")),t=(null==e?void 0:e.data)||e;t&&M(t),await Q()}catch(e){alert((null==e?void 0:e.message)||"Failed to mark paid")}finally{Y(!1)}}},er=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Receipt",a=window.open("","PRINT","height=900,width=700");a&&(a.document.write("\n      <html>\n        <head>\n          <title>".concat(t,"</title>\n          <style>\n            @media print {\n              @page { margin: 14mm; }\n            }\n            body { margin: 0; padding: 0; background: #f7f8fa; color: #0f172a; font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', sans-serif; }\n            .page { padding: 32px 28px; max-width: 880px; margin: 0 auto; }\n            .card { background: #ffffff; border: 1px solid #d1d5db; border-radius: 12px; padding: 20px; margin-bottom: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); }\n            h1,h2,h3,h4 { margin: 0; color: #0f172a; }\n            .muted { color: #6b7280; }\n            .table { width: 100%; border-collapse: collapse; margin-top: 12px; }\n            .table th { text-align: left; font-size: 12px; letter-spacing: 0.08em; color: #6b7280; padding: 10px 8px; border-bottom: 1px solid #e5e7eb; background: #f3f4f6; }\n            .table td { padding: 10px 8px; border-bottom: 1px solid #e5e7eb; font-size: 14px; }\n            .table tbody tr:nth-child(odd) { background: #fafafa; }\n            .badge { display: inline-block; padding: 4px 10px; border-radius: 9999px; font-size: 11px; font-weight: 600; }\n            .badge-green { background: rgba(16,185,129,0.12); color: #047857; }\n            .badge-amber { background: rgba(251,191,36,0.18); color: #b45309; }\n            .badge-red { background: rgba(248,113,113,0.15); color: #b91c1c; }\n            .grid { display: grid; gap: 12px; }\n            .grid-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }\n            .flex { display: flex; align-items: center; }\n            .space-between { justify-content: space-between; }\n            .right { text-align: right; }\n            .center { text-align: center; }\n            .mt-2 { margin-top: 8px; }\n            .mt-3 { margin-top: 12px; }\n            .mb-1 { margin-bottom: 4px; }\n            .title { font-size: 18px; font-weight: 700; }\n            .subtitle { font-size: 13px; color: #6b7280; }\n            .bordered { border: 1px solid #e5e7eb; border-radius: 12px; padding: 12px; }\n            .footer-note { font-size: 12px; color: #6b7280; margin-top: 10px; }\n            .logo-box { width: 52px; height: 52px; border-radius: 12px; background: linear-gradient(135deg, #10b981, #14b8a6); display: flex; align-items: center; justify-content: center; color: #fff; font-weight: 700; }\n          </style>\n        </head>\n        <body>\n          <div class=\"page\">\n            ").concat(e,"\n          </div>\n        </body>\n      </html>\n    ")),a.document.close(),a.focus(),a.print(),a.close())},ei=function(e,t,a){var n,l;let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],{rows:r,subtotal:i}=h(e||{},t||{},a||{}),o=(null==e?void 0:e._id)?"INV-".concat(((l=e._id)&&"string"==typeof l?l.length>10?"".concat(l.slice(0,8),"…"):l:"—").toUpperCase()):"INV-—",d=x((null==e?void 0:e.amount)||0),c='\n      <div class="card flex space-between">\n        <div class="flex" style="gap:12px;">\n          <div class="logo-box">AN</div>\n          <div>\n            <div class="title">Annapurna Nature Cure Hospital</div>\n            <div class="subtitle">Healthy living for everyone</div>\n            <div class="muted">info@example.com \xb7 +977-0000000000 \xb7 Kathmandu, Nepal</div>\n          </div>\n        </div>\n        <div class="right">\n          <div class="title">Invoice</div>\n          <div class="muted">'.concat(o,'</div>\n          <div class="muted">Date: ').concat(m(null==e?void 0:e.createdAt),'</div>\n          <div class="muted">Payment ID: ').concat((null==e?void 0:e._id)||"—","</div>\n        </div>\n      </div>\n    "),v=(null==e?void 0:e.status)==="paid"?'<span class="badge badge-green">Paid</span>':'<span class="badge badge-amber">Pending</span>',g=(null==e?void 0:e.gateway)==="stripe"?'<span class="badge badge-green">Stripe</span>':'<span class="badge badge-amber">Manual</span>',f='\n      <div class="card grid grid-2">\n        <div>\n          <div class="subtitle mb-1">Customer</div>\n          <div class="mb-1"><strong>Name:</strong> <span class="muted">'.concat((null==t?void 0:t.userName)||(null==e?void 0:e.userName)||"—",'</span></div>\n          <div class="mb-1"><strong>Email:</strong> <span class="muted">').concat((null==t?void 0:t.email)||(null==e?void 0:e.userEmail)||"—",'</span></div>\n          <div class="mb-1"><strong>Phone:</strong> <span class="muted">').concat((null==t?void 0:t.phone)||(null==e?void 0:e.userPhone)||"—",'</span></div>\n          <div class="mb-1"><strong>Country:</strong> <span class="muted">').concat((null==t?void 0:t.country)||(null==e?void 0:e.userCountry)||"—",'</span></div>\n        </div>\n        <div>\n          <div class="subtitle mb-1">Booking</div>\n          <div class="mb-1"><strong>Booking ID:</strong> <span class="muted">').concat((null==e?void 0:e.bookingId)||"—",'</span></div>\n          <div class="mb-1"><strong>Program/Package:</strong> <span class="muted">').concat((null==t?void 0:t.programTitle)||(null==t?void 0:t.packageName)||(null==a?void 0:a.title)||(null==a?void 0:a.name)||"—",'</span></div>\n          <div class="mb-1"><strong>Type:</strong> <span class="muted">').concat(p(null==e?void 0:e.bookingType),'</span></div>\n          <div class="mb-1"><strong>People:</strong> <span class="muted">').concat((null==t?void 0:t.numberOfPeople)||(null==e?void 0:null===(n=e.metadata)||void 0===n?void 0:n.numberOfPeople)||"—",'</span></div>\n          <div class="mb-1"><strong>Preferred start date:</strong> <span class="muted">').concat((null==t?void 0:t.preferredStartDate)?m(t.preferredStartDate):"—",'</span></div>\n          <div class="mt-2" style="display:flex; gap:6px;">').concat(v).concat(g,"</div>\n        </div>\n      </div>\n    "),b=0===r.length?'<tr><td colspan="5" class="muted">No breakdown available.</td></tr>':r.map((e,t)=>'\n          <tr>\n            <td class="center">'.concat(t+1,"</td>\n            <td>\n              <div><strong>").concat(e.label,"</strong></div>\n              ").concat(e.sub?'<div class="muted">'.concat(e.sub,"</div>"):"",'\n            </td>\n            <td class="center">').concat(e.qty,'</td>\n            <td class="right">').concat(u(e.unit),'</td>\n            <td class="right">').concat(u(e.total),"</td>\n          </tr>")).join(""),y='\n      <div class="card">\n        <div class="title mb-1">Receipt</div>\n        <table class="table">\n          <thead>\n            <tr>\n              <th style="width:6%;">#</th>\n              <th style="width:44%;">Description</th>\n              <th style="width:15%;" class="center">People</th>\n              <th style="width:17%;" class="right">Unit price</th>\n              <th style="width:18%;" class="right">Line total</th>\n            </tr>\n          </thead>\n          <tbody>'.concat(b,'</tbody>\n        </table>\n        <div class="mt-3 bordered">\n          <div class="flex space-between mb-1">\n            <span class="muted">Subtotal</span>\n            <strong>').concat(u(i),'</strong>\n          </div>\n          <div class="flex space-between">\n            <span class="muted">Total paid</span>\n            <div class="title">').concat(u((null==e?void 0:e.amount)||0),'</div>\n          </div>\n          <div class="muted mt-2">Amount in words: ').concat(d,"</div>\n        </div>\n      </div>\n    "),j='\n      <div class="card grid grid-2">\n        <div>\n          <div class="muted">This is a system generated invoice.</div>\n        </div>\n        <div class="right">\n          <div class="muted">Authorized Signature</div>\n          <div style="border-bottom: 1px solid #d1d5db; height: 28px; margin-top: 8px;"></div>\n        </div>\n      </div>\n    ';return s?c+f+y+j:c+y+j},eo=()=>{er(ei($,O,I,!1),"Receipt")},ed=()=>{er(ei($,O,I,!0),"Invoice")},ec=e=>{"receipt"===e?eo():"full"===e&&ed(),B(!1)};return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-semibold text-white",children:"Billing Dashboard"}),(0,n.jsx)("p",{className:"text-sm text-slate-400",children:"Manage payments for packages, retreats, health programs, and courses."})]}),(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("button",{onClick:()=>ea("csv"),className:"px-3 py-2 rounded-lg border border-slate-700 bg-slate-900 text-slate-200 hover:bg-slate-800 text-sm",children:"Export CSV"}),(0,n.jsx)("button",{onClick:()=>ea("pdf"),className:"px-3 py-2 rounded-lg border border-slate-700 bg-slate-900 text-slate-200 hover:bg-slate-800 text-sm",children:"Export PDF"})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-3",children:[(0,n.jsx)(g,{label:"Total paid",value:"$".concat((D.paidAmount||0).toFixed(2)),accent:"text-emerald-300"}),(0,n.jsx)(g,{label:"Total pending",value:"$".concat((D.pendingAmount||0).toFixed(2)),accent:"text-amber-300"}),(0,n.jsx)(g,{label:"Payments",value:D.count||0}),(0,n.jsx)(g,{label:"Net revenue",value:"$".concat((D.paidAmount||0).toFixed(2)),accent:"text-emerald-200"}),(0,n.jsx)(g,{label:"Last 30 days revenue",value:"$".concat(K.toFixed(2)),accent:"text-emerald-200"})]}),(0,n.jsx)("div",{className:"border border-slate-800 rounded-xl bg-slate-900 p-4 space-y-3",children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-3",children:[(0,n.jsxs)("select",{value:v.status,onChange:e=>k(t=>({...t,status:e.target.value})),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 text-sm focus:outline-none focus:ring-2 focus:ring-teal-500",children:[(0,n.jsx)("option",{value:"",children:"All statuses"}),(0,n.jsx)("option",{value:"paid",children:"Paid"}),(0,n.jsx)("option",{value:"pending",children:"Pending"}),(0,n.jsx)("option",{value:"cancelled",children:"Cancelled"}),(0,n.jsx)("option",{value:"refunded",children:"Refunded"})]}),(0,n.jsxs)("select",{value:v.bookingType,onChange:e=>k(t=>({...t,bookingType:e.target.value})),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 text-sm focus:outline-none focus:ring-2 focus:ring-teal-500",children:[(0,n.jsx)("option",{value:"",children:"All types"}),(0,n.jsx)("option",{value:"health",children:"Health Package"}),(0,n.jsx)("option",{value:"retreat",children:"Retreat"}),(0,n.jsx)("option",{value:"health_program",children:"Health Program"}),(0,n.jsx)("option",{value:"course",children:"Course"})]}),(0,n.jsx)("input",{type:"email",placeholder:"Search by email",value:v.email,onChange:e=>k(t=>({...t,email:e.target.value})),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 text-sm focus:outline-none focus:ring-2 focus:ring-teal-500"}),(0,n.jsx)("input",{type:"date",value:v.startDate,onChange:e=>k(t=>({...t,startDate:e.target.value})),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 text-sm focus:outline-none focus:ring-2 focus:ring-teal-500"}),(0,n.jsx)("input",{type:"date",value:v.endDate,onChange:e=>k(t=>({...t,endDate:e.target.value})),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 text-sm focus:outline-none focus:ring-2 focus:ring-teal-500"})]})}),a?(0,n.jsx)("p",{className:"text-slate-400 text-sm",children:"Loading..."}):0===e.length?(0,n.jsx)("div",{className:"border border-slate-800 rounded-xl bg-slate-900 p-6 text-center text-slate-400",children:"No payments found."}):(0,n.jsxs)("div",{className:"overflow-hidden border border-slate-800 rounded-xl bg-slate-900",children:[(0,n.jsxs)("div",{className:"sticky top-0 z-10 flex items-center justify-between px-4 py-3 border-b border-slate-800 text-sm text-slate-200 bg-slate-900",children:[(0,n.jsxs)("div",{children:[W.length," selected"]}),(0,n.jsx)("div",{className:"flex items-center gap-3",children:(0,n.jsx)("button",{disabled:!W.length||C,onClick:el,className:"px-3 py-1.5 rounded-lg border ".concat(W.length?"border-red-500 text-red-200 hover:bg-red-500/10":"border-slate-700 text-slate-500 cursor-not-allowed"),children:"Cancel selected"})})]}),(0,n.jsxs)("div",{className:"min-w-full overflow-x-auto",children:[(0,n.jsxs)("div",{className:"grid grid-cols-[40px_120px_180px_160px_1fr_120px_110px_110px_80px] min-w-[1100px] px-6 py-3 text-[11px] uppercase tracking-wide text-slate-400 border-b border-slate-800 items-center",children:[(0,n.jsx)("span",{className:"flex items-center justify-center",children:(0,n.jsx)("input",{type:"checkbox",onChange:()=>{W.length===e.length?J([]):J(e.map(e=>e._id))},checked:W.length===e.length&&e.length>0,className:"h-4 w-4"})}),(0,n.jsx)("span",{className:"text-left",children:"Date"}),(0,n.jsx)("span",{className:"text-left",children:"Type"}),(0,n.jsx)("span",{className:"text-left",children:"Customer"}),(0,n.jsx)("span",{className:"text-left",children:"Email"}),(0,n.jsx)("span",{className:"text-right",children:"Amount"}),(0,n.jsx)("span",{className:"text-center",children:"Status"}),(0,n.jsx)("span",{className:"text-center",children:"Gateway"}),(0,n.jsx)("span",{className:"text-right",children:"Action"})]}),e.map(e=>{var t,a,l,s;let i=(null===(t=e.metadata)||void 0===t?void 0:t.programName)||(null===(a=e.metadata)||void 0===a?void 0:a.courseTitle)||(null===(l=e.metadata)||void 0===l?void 0:l.programTitle)||(null===(s=e.metadata)||void 0===s?void 0:s.packageName)||"—",o=W.includes(e._id);return(0,n.jsxs)("div",{className:"grid grid-cols-[40px_120px_180px_160px_1fr_120px_110px_110px_80px] min-w-[1100px] px-6 py-4 text-sm text-white border-b border-slate-800 last:border-b-0 items-center transition-colors ".concat(o?"bg-slate-800/60":"hover:bg-slate-900/70"),children:[(0,n.jsx)("div",{className:"flex items-center justify-center",children:(0,n.jsx)("input",{type:"checkbox",className:"h-4 w-4",checked:o,onChange:()=>en(e._id)})}),(0,n.jsx)("div",{className:"truncate text-slate-200",children:e.createdAt?r()(e.createdAt).format("MMM D, YYYY"):"—"}),(0,n.jsxs)("div",{className:"space-y-1 truncate",children:[(0,n.jsx)("p",{className:"font-semibold",title:e.bookingType||"—",children:p(e.bookingType)}),(0,n.jsx)("p",{className:"text-xs text-slate-400 truncate",title:i,children:i})]}),(0,n.jsx)("div",{className:"truncate",children:(0,n.jsx)("p",{className:"font-semibold truncate",title:e.userName||"—",children:e.userName||"—"})}),(0,n.jsx)("div",{className:"truncate text-slate-200",title:e.userEmail||"—",children:e.userEmail||"—"}),(0,n.jsxs)("div",{className:"text-right font-semibold text-slate-100 whitespace-nowrap",children:["$",(e.amount||0).toFixed(2)]}),(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsx)("span",{className:"px-3 py-1 rounded-full text-[11px] ".concat(d[e.status]||"bg-slate-800 text-slate-200"),children:e.status})}),(0,n.jsxs)("div",{className:"flex justify-center items-center gap-2 text-slate-200",title:e.gateway||"—",children:[(0,n.jsx)("span",{className:"h-2.5 w-2.5 rounded-full ".concat("stripe"===e.gateway?"bg-emerald-400":"bg-slate-400")}),(0,n.jsx)("span",{className:"capitalize text-sm truncate",children:"stripe"===e.gateway?"Stripe":"Manual"})]}),(0,n.jsx)("div",{className:"text-right",children:(0,n.jsx)("button",{onClick:()=>X(e),className:"text-xs text-slate-100 hover:text-white underline-offset-2 hover:underline",children:"View"})})]},e._id)})]})]}),$&&(0,n.jsx)("div",{className:"fixed inset-0 bg-black/70 z-50 flex items-start justify-center p-4 md:p-10",children:(0,n.jsxs)("div",{className:"w-full max-w-5xl max-h-[90vh] bg-[#0f131a] border border-white/10 shadow-2xl rounded-2xl overflow-hidden flex flex-col",children:[(0,n.jsxs)("div",{className:"sticky top-0 z-10 flex items-center justify-between px-8 py-5 bg-[#0f131a] border-b border-white/5",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Payment details"}),(0,n.jsx)("button",{onClick:()=>M(null),className:"text-slate-400 hover:text-white text-xl",children:"\xd7"})]}),(0,n.jsx)("div",{className:"overflow-y-auto px-8 py-6 space-y-6 flex-1",children:_?(0,n.jsx)("p",{className:"text-slate-400 text-sm",children:"Loading..."}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(y,{selected:$,booking:O,copyToClipboard:et}),"cancelled"===$.status?(0,n.jsxs)("div",{className:"border border-red-500/50 bg-red-900/30 text-red-100 rounded-xl px-4 py-3 text-sm",children:[(0,n.jsx)("p",{className:"font-semibold",children:"Payment cancelled"}),(0,n.jsx)("p",{className:"text-red-200",children:"Associated booking is now unpaid/cancelled. You can mark it paid again if this was a mistake."}),(0,n.jsx)("div",{className:"mt-2 flex gap-2",children:(0,n.jsx)("button",{onClick:es,className:"px-3 py-1.5 rounded-lg border border-red-300 text-red-100 hover:bg-red-500/10 text-xs",children:"Mark as paid again"})})]}):null,(0,n.jsx)(j,{selected:$,productData:I,onShowBooking:()=>ee($),showBookingDetails:E,onShowProduct:()=>{z(!0),setTimeout(()=>{var e;return null===(e=Z.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth",block:"start"})},50)},showProductDetails:L}),(0,n.jsx)(N,{selected:$,booking:O,bookingMissing:H}),E&&O?(0,n.jsx)(b,{title:"Booking details",children:(0,n.jsxs)("div",{ref:q,className:"space-y-2",children:[(0,n.jsx)(f,{label:"Name",value:c(O.userName||O.name)}),(0,n.jsx)(f,{label:"Email",value:c(O.email)}),(0,n.jsx)(f,{label:"Phone",value:c(O.phone)}),(0,n.jsx)(f,{label:"Country",value:c(O.country)}),(0,n.jsx)(f,{label:"Start date",value:O.preferredStartDate?r()(O.preferredStartDate).format("MMM D, YYYY"):"—"}),(0,n.jsx)(f,{label:"People",value:c(O.numberOfPeople||O.peopleCount)}),(0,n.jsx)(f,{label:"Notes",value:c(O.additionalNotes||O.notes)})]})}):null,L&&I?(0,n.jsx)(b,{title:"Package / Program details",children:(0,n.jsxs)("div",{ref:Z,className:"space-y-2",children:[(0,n.jsx)(f,{label:"Title",value:c(I.title||I.name)}),(0,n.jsx)(f,{label:"Duration",value:c(I.durationDays||I.duration)}),(0,n.jsx)(f,{label:"Price / person",value:c(I.pricePerPersonUSD||I.price||I.retreatPricePerPerson)}),(0,n.jsx)(f,{label:"Type",value:c(I.programType)})]})}):null,(0,n.jsx)(b,{title:"Receipt",action:(0,n.jsx)("button",{onClick:()=>B(!0),disabled:"cancelled"===$.status,className:"px-3 py-1.5 rounded-full border text-xs ".concat("cancelled"===$.status?"border-slate-700 text-slate-500 cursor-not-allowed":"border-slate-700 text-slate-100 hover:bg-slate-800"),children:"Download"}),children:(0,n.jsx)("div",{className:"sm:col-span-2 w-full",children:(0,n.jsx)(w,{payment:$,booking:O,product:I})})}),E&&O?(0,n.jsx)(b,{title:"Booking details",children:(0,n.jsxs)("div",{ref:q,className:"space-y-2",children:[(0,n.jsx)(f,{label:"Name",value:c(O.userName||O.name)}),(0,n.jsx)(f,{label:"Email",value:c(O.email)}),(0,n.jsx)(f,{label:"Phone",value:c(O.phone)}),(0,n.jsx)(f,{label:"Country",value:c(O.country)}),(0,n.jsx)(f,{label:"Start date",value:O.preferredStartDate?r()(O.preferredStartDate).format("MMM D, YYYY"):"—"}),(0,n.jsx)(f,{label:"People",value:c(O.numberOfPeople||O.peopleCount)}),(0,n.jsx)(f,{label:"Notes",value:c(O.additionalNotes||O.notes)})]})}):null,L&&I?(0,n.jsx)(b,{title:"Package / Program details",children:(0,n.jsxs)("div",{ref:Z,className:"space-y-2",children:[(0,n.jsx)(f,{label:"Title",value:c(I.title||I.name)}),(0,n.jsx)(f,{label:"Duration",value:c(I.durationDays||I.duration)}),(0,n.jsx)(f,{label:"Price / person",value:c(I.pricePerPersonUSD||I.price||I.retreatPricePerPerson)}),(0,n.jsx)(f,{label:"Type",value:c(I.programType)})]})}):null,$.metadata&&Object.keys($.metadata||{}).length?(0,n.jsx)(P,{metadata:$.metadata}):null,V&&(0,n.jsx)("div",{className:"fixed inset-0 z-50 bg-black/60 flex items-center justify-center px-4",children:(0,n.jsxs)("div",{className:"w-full max-w-sm bg-slate-900 border border-slate-700 rounded-2xl p-5 space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("p",{className:"text-base font-semibold text-white",children:"Download options"}),(0,n.jsx)("button",{onClick:()=>B(!1),className:"text-slate-400 hover:text-white text-lg",children:"\xd7"})]}),(0,n.jsx)("p",{className:"text-sm text-slate-400",children:"Choose what you want to export."}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("button",{onClick:()=>ec("receipt"),className:"w-full px-4 py-2.5 rounded-xl bg-slate-800 hover:bg-slate-700 text-white text-sm font-semibold",children:"Download receipt only"}),(0,n.jsx)("button",{onClick:()=>ec("full"),className:"w-full px-4 py-2.5 rounded-xl border border-slate-600 text-white text-sm font-semibold hover:bg-slate-800",children:"Download full invoice (details)"})]})]})})]})})]})})]})}function g(e){let{label:t,value:a,accent:l}=e;return(0,n.jsxs)("div",{className:"rounded-xl border border-slate-800 bg-slate-900 px-4 py-3",children:[(0,n.jsx)("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:t}),(0,n.jsx)("p",{className:"text-xl font-semibold text-white ".concat(l||""),children:a})]})}function f(e){let{label:t,value:a,mono:l,onClick:s}=e;return(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)("p",{className:"text-[11px] text-slate-400",children:t}),s?(0,n.jsx)("button",{type:"button",onClick:s,className:"text-base text-left ".concat(l?"font-mono break-all":"font-semibold"," text-slate-100 hover:text-teal-300"),children:a||"Not provided"}):(0,n.jsx)("p",{className:"text-base ".concat(l?"font-mono break-all":"font-semibold"," text-slate-100"),children:a||"Not provided"})]})}function b(e){let{title:t,children:a,action:l}=e;return(0,n.jsxs)("div",{className:"space-y-3 border border-slate-800 rounded-xl p-4 bg-slate-900/70",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,n.jsx)("h4",{className:"text-sm font-semibold text-slate-200",children:t}),l?(0,n.jsx)("div",{className:"shrink-0",children:l}):null]}),(0,n.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:a})]})}function y(e){let{selected:t,booking:a,copyToClipboard:l}=e,s=t.cancelledAt?r()(t.cancelledAt).format("MMM D, YYYY HH:mm"):null;return(0,n.jsx)("div",{className:"border border-slate-800 rounded-xl bg-slate-900/80 p-4 space-y-2",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:(null==a?void 0:a.userName)||t.userName||"Customer"}),(0,n.jsxs)("p",{className:"text-3xl font-semibold text-white",children:["$",(t.amount||0).toFixed(2)]}),(0,n.jsx)("p",{className:"text-sm text-slate-400",children:t.createdAt?r()(t.createdAt).format("MMM D, YYYY HH:mm"):"—"}),s?(0,n.jsxs)("p",{className:"text-xs text-red-200",children:["Cancelled on ",s]}):null,(0,n.jsxs)("button",{type:"button",onClick:()=>l(t._id),className:"text-xs text-slate-500 hover:text-teal-300",title:"Copy payment ID",children:["Reference: ",t._id||"—"]})]}),(0,n.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,n.jsx)("span",{className:"px-3 py-1 rounded-full text-[11px] ".concat(d[t.status]||"bg-slate-800 text-slate-200"),children:t.status}),(0,n.jsx)("span",{className:"px-3 py-1 rounded-full text-[11px] ".concat("stripe"===t.gateway?"bg-emerald-900/60 text-emerald-200":"bg-slate-800 text-slate-200"),children:"stripe"===t.gateway?"Stripe":"Manual"})]})]})})}function j(e){let{selected:t,productData:a,onShowBooking:l,showBookingDetails:s,onShowProduct:r,showProductDetails:i}=e,o=(null==t?void 0:t.bookingType)==="retreat"?"View retreat program":(null==t?void 0:t.bookingType)==="health"?"View package details":(null==t?void 0:t.bookingType)==="health_program"?"View health program":(null==t?void 0:t.bookingType)==="course"?"View course":"View product";return(0,n.jsxs)("div",{className:"flex flex-wrap gap-3 justify-center",children:[a&&!i&&(0,n.jsx)("button",{onClick:r,className:"px-4 py-2 rounded-full border border-slate-700 bg-slate-900 text-slate-100 hover:bg-slate-800 text-xs",children:o}),t.bookingId&&!s&&(0,n.jsx)("button",{onClick:l,className:"px-4 py-2 rounded-full border border-slate-700 bg-slate-900 text-slate-100 hover:bg-slate-800 text-xs",children:"View booking details"})]})}function N(e){let{selected:t,booking:a,bookingMissing:l}=e;return(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 border border-slate-800 rounded-xl bg-slate-900/70 p-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(f,{label:"Customer",value:c((null==a?void 0:a.userName)||t.userName)}),(0,n.jsx)(f,{label:"Email",value:c((null==a?void 0:a.email)||t.userEmail)}),(0,n.jsx)(f,{label:"Phone",value:c((null==a?void 0:a.phone)||t.userPhone)}),(0,n.jsx)(f,{label:"Country",value:c((null==a?void 0:a.country)||t.userCountry)})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(f,{label:"Payment method",value:"stripe"===t.gateway?"Stripe":"Manual"}),(0,n.jsx)(f,{label:"Type",value:p(t.bookingType)}),(0,n.jsx)(f,{label:"Booking ID",value:c(t.bookingId||(l?"record not found":"—"))}),(0,n.jsx)(f,{label:"Booking date",value:(null==a?void 0:a.preferredStartDate)?r()(a.preferredStartDate).format("MMM D, YYYY"):"—"})]})]})}function w(e){let{payment:t,booking:a,product:l}=e,{rows:s,subtotal:r}=h(t,a,l);return(0,n.jsxs)("div",{className:"space-y-5",children:[(0,n.jsxs)("div",{className:"overflow-hidden rounded-xl border border-slate-800 bg-slate-900/60",children:[(0,n.jsxs)("div",{className:"grid grid-cols-[1fr_5fr_2fr_2fr_2fr] gap-x-4 px-6 py-3 text-xs uppercase tracking-wide text-slate-300 font-semibold border-b border-slate-800",children:[(0,n.jsx)("span",{className:"text-left",children:"#"}),(0,n.jsx)("span",{className:"text-left",children:"Description"}),(0,n.jsx)("span",{className:"text-center",children:"People"}),(0,n.jsx)("span",{className:"text-right",children:"Unit price"}),(0,n.jsx)("span",{className:"text-right",children:"Line total"})]}),0===s.length?(0,n.jsx)("div",{className:"px-6 py-4 text-sm text-slate-300",children:"No breakdown available."}):s.map((e,t)=>(0,n.jsxs)("div",{className:"grid grid-cols-[1fr_5fr_2fr_2fr_2fr] gap-x-4 px-6 py-3 text-sm text-slate-100 border-b border-slate-800 last:border-b-0",style:{minHeight:48},children:[(0,n.jsx)("span",{className:"text-left font-mono text-slate-300",children:t+1}),(0,n.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,n.jsx)("p",{className:"font-semibold leading-snug break-words",children:e.label}),e.sub?(0,n.jsx)("p",{className:"text-xs text-slate-400 leading-snug break-words",children:e.sub}):null]}),(0,n.jsx)("span",{className:"text-center font-mono",children:e.qty}),(0,n.jsxs)("span",{className:"text-right font-mono",children:["$",Number(e.unit||0).toFixed(2)]}),(0,n.jsxs)("span",{className:"text-right font-mono",children:["$",Number(e.total||0).toFixed(2)]})]},"".concat(e.label,"-").concat(t)))]}),(0,n.jsxs)("div",{className:"space-y-2 pt-2",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"text-sm text-slate-400",children:"Subtotal"}),(0,n.jsxs)("span",{className:"text-sm text-slate-100 font-mono",children:["$",Number(r||0).toFixed(2)]})]}),(0,n.jsxs)("div",{className:"border-t border-slate-800 pt-3 flex items-center justify-between",children:[(0,n.jsx)("span",{className:"text-sm text-slate-300",children:"Total paid"}),(0,n.jsxs)("span",{className:"text-lg font-semibold text-white font-mono",children:["$",((null==t?void 0:t.amount)||0).toFixed(2)]})]}),(0,n.jsxs)("p",{className:"text-xs italic text-slate-400 pt-1",children:["Amount in words: ",x((null==t?void 0:t.amount)||0)]})]})]})}function P(e){let{metadata:t}=e,[a,s]=(0,l.useState)(!1);return(0,n.jsxs)("div",{className:"border border-slate-800 rounded-xl bg-slate-900/70",children:[(0,n.jsxs)("button",{type:"button",onClick:()=>s(e=>!e),className:"w-full flex items-center justify-between px-4 py-3 text-sm text-slate-200",children:[(0,n.jsx)("span",{children:"Technical metadata"}),(0,n.jsx)("span",{className:"text-slate-400 text-xs",children:a?"Hide":"Show"})]}),a&&(0,n.jsx)("div",{className:"px-4 pb-4",children:(0,n.jsx)("div",{className:"bg-slate-900 border border-slate-800 rounded-lg p-3 overflow-auto text-xs text-slate-100",children:(0,n.jsx)("pre",{children:JSON.stringify(t,null,2)})})})]})}},32617:function(e,t,a){"use strict";a.d(t,{QW:function(){return c},R1:function(){return i},f8:function(){return s},nc:function(){return u},pE:function(){return d},sg:function(){return o}});let n="http://localhost:5000/api".replace(/\/$/,""),l=n.endsWith("/api")?n:"".concat(n,"/api");function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.startsWith("/")?e:"/".concat(e),a="".concat(l).concat(t);return console.log("[api] request url:",a),a}async function r(e){let t=await e.json().catch(()=>({}));if(!e.ok){let a=Error((null==t?void 0:t.message)||"Request failed");throw a.status=e.status,a}return t}async function i(e){return r(await fetch(s(e),{method:"GET",credentials:"include"}))}async function o(e,t){let a="undefined"!=typeof FormData&&t instanceof FormData;return r(await fetch(s(e),{method:"POST",credentials:"include",headers:a?void 0:{"Content-Type":"application/json"},body:a?t:JSON.stringify(t||{})}))}async function d(e,t){let a="undefined"!=typeof FormData&&t instanceof FormData;return r(await fetch(s(e),{method:"PUT",credentials:"include",headers:a?void 0:{"Content-Type":"application/json"},body:a?t:JSON.stringify(t||{})}))}async function c(e){return r(await fetch(s(e),{method:"DELETE",credentials:"include"}))}async function u(e,t){return r(await fetch(s(e),{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t||{})}))}},71096:function(e){var t;t=function(){"use strict";var e="millisecond",t="second",a="minute",n="hour",l="week",s="month",r="quarter",i="year",o="date",d="Invalid Date",c=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,u=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m=function(e,t,a){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(a)+e},p="en",x={};x[p]={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],a=e%100;return"["+e+(t[(a-20)%10]||t[a]||"th")+"]"}};var h="$isDayjsObject",v=function(e){return e instanceof y||!(!e||!e[h])},g=function e(t,a,n){var l;if(!t)return p;if("string"==typeof t){var s=t.toLowerCase();x[s]&&(l=s),a&&(x[s]=a,l=s);var r=t.split("-");if(!l&&r.length>1)return e(r[0])}else{var i=t.name;x[i]=t,l=i}return!n&&l&&(p=l),l||!n&&p},f=function(e,t){if(v(e))return e.clone();var a="object"==typeof t?t:{};return a.date=e,a.args=arguments,new y(a)},b={s:m,z:function(e){var t=-e.utcOffset(),a=Math.abs(t);return(t<=0?"+":"-")+m(Math.floor(a/60),2,"0")+":"+m(a%60,2,"0")},m:function e(t,a){if(t.date()<a.date())return-e(a,t);var n=12*(a.year()-t.year())+(a.month()-t.month()),l=t.clone().add(n,s),r=a-l<0,i=t.clone().add(n+(r?-1:1),s);return+(-(n+(a-l)/(r?l-i:i-l))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(d){return({M:s,y:i,w:l,d:"day",D:o,h:n,m:a,s:t,ms:e,Q:r})[d]||String(d||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}};b.l=g,b.i=v,b.w=function(e,t){return f(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var y=function(){function m(e){this.$L=g(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[h]=!0}var p=m.prototype;return p.parse=function(e){this.$d=function(e){var t=e.date,a=e.utc;if(null===t)return new Date(NaN);if(b.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(c);if(n){var l=n[2]-1||0,s=(n[7]||"0").substring(0,3);return a?new Date(Date.UTC(n[1],l,n[3]||1,n[4]||0,n[5]||0,n[6]||0,s)):new Date(n[1],l,n[3]||1,n[4]||0,n[5]||0,n[6]||0,s)}}return new Date(t)}(e),this.init()},p.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},p.$utils=function(){return b},p.isValid=function(){return this.$d.toString()!==d},p.isSame=function(e,t){var a=f(e);return this.startOf(t)<=a&&a<=this.endOf(t)},p.isAfter=function(e,t){return f(e)<this.startOf(t)},p.isBefore=function(e,t){return this.endOf(t)<f(e)},p.$g=function(e,t,a){return b.u(e)?this[t]:this.set(a,e)},p.unix=function(){return Math.floor(this.valueOf()/1e3)},p.valueOf=function(){return this.$d.getTime()},p.startOf=function(e,r){var d=this,c=!!b.u(r)||r,u=b.p(e),m=function(e,t){var a=b.w(d.$u?Date.UTC(d.$y,t,e):new Date(d.$y,t,e),d);return c?a:a.endOf("day")},p=function(e,t){return b.w(d.toDate()[e].apply(d.toDate("s"),(c?[0,0,0,0]:[23,59,59,999]).slice(t)),d)},x=this.$W,h=this.$M,v=this.$D,g="set"+(this.$u?"UTC":"");switch(u){case i:return c?m(1,0):m(31,11);case s:return c?m(1,h):m(0,h+1);case l:var f=this.$locale().weekStart||0,y=(x<f?x+7:x)-f;return m(c?v-y:v+(6-y),h);case"day":case o:return p(g+"Hours",0);case n:return p(g+"Minutes",1);case a:return p(g+"Seconds",2);case t:return p(g+"Milliseconds",3);default:return this.clone()}},p.endOf=function(e){return this.startOf(e,!1)},p.$set=function(l,r){var d,c=b.p(l),u="set"+(this.$u?"UTC":""),m=((d={}).day=u+"Date",d[o]=u+"Date",d[s]=u+"Month",d[i]=u+"FullYear",d[n]=u+"Hours",d[a]=u+"Minutes",d[t]=u+"Seconds",d[e]=u+"Milliseconds",d)[c],p="day"===c?this.$D+(r-this.$W):r;if(c===s||c===i){var x=this.clone().set(o,1);x.$d[m](p),x.init(),this.$d=x.set(o,Math.min(this.$D,x.daysInMonth())).$d}else m&&this.$d[m](p);return this.init(),this},p.set=function(e,t){return this.clone().$set(e,t)},p.get=function(e){return this[b.p(e)]()},p.add=function(e,r){var o,d=this;e=Number(e);var c=b.p(r),u=function(t){var a=f(d);return b.w(a.date(a.date()+Math.round(t*e)),d)};if(c===s)return this.set(s,this.$M+e);if(c===i)return this.set(i,this.$y+e);if("day"===c)return u(1);if(c===l)return u(7);var m=((o={})[a]=6e4,o[n]=36e5,o[t]=1e3,o)[c]||1,p=this.$d.getTime()+e*m;return b.w(p,this)},p.subtract=function(e,t){return this.add(-1*e,t)},p.format=function(e){var t=this,a=this.$locale();if(!this.isValid())return a.invalidDate||d;var n=e||"YYYY-MM-DDTHH:mm:ssZ",l=b.z(this),s=this.$H,r=this.$m,i=this.$M,o=a.weekdays,c=a.months,m=a.meridiem,p=function(e,a,l,s){return e&&(e[a]||e(t,n))||l[a].slice(0,s)},x=function(e){return b.s(s%12||12,e,"0")},h=m||function(e,t,a){var n=e<12?"AM":"PM";return a?n.toLowerCase():n};return n.replace(u,function(e,n){return n||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return b.s(t.$y,4,"0");case"M":return i+1;case"MM":return b.s(i+1,2,"0");case"MMM":return p(a.monthsShort,i,c,3);case"MMMM":return p(c,i);case"D":return t.$D;case"DD":return b.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return p(a.weekdaysMin,t.$W,o,2);case"ddd":return p(a.weekdaysShort,t.$W,o,3);case"dddd":return o[t.$W];case"H":return String(s);case"HH":return b.s(s,2,"0");case"h":return x(1);case"hh":return x(2);case"a":return h(s,r,!0);case"A":return h(s,r,!1);case"m":return String(r);case"mm":return b.s(r,2,"0");case"s":return String(t.$s);case"ss":return b.s(t.$s,2,"0");case"SSS":return b.s(t.$ms,3,"0");case"Z":return l}return null}(e)||l.replace(":","")})},p.utcOffset=function(){return-(15*Math.round(this.$d.getTimezoneOffset()/15))},p.diff=function(e,o,d){var c,u=this,m=b.p(o),p=f(e),x=(p.utcOffset()-this.utcOffset())*6e4,h=this-p,v=function(){return b.m(u,p)};switch(m){case i:c=v()/12;break;case s:c=v();break;case r:c=v()/3;break;case l:c=(h-x)/6048e5;break;case"day":c=(h-x)/864e5;break;case n:c=h/36e5;break;case a:c=h/6e4;break;case t:c=h/1e3;break;default:c=h}return d?c:b.a(c)},p.daysInMonth=function(){return this.endOf(s).$D},p.$locale=function(){return x[this.$L]},p.locale=function(e,t){if(!e)return this.$L;var a=this.clone(),n=g(e,t,!0);return n&&(a.$L=n),a},p.clone=function(){return b.w(this.$d,this)},p.toDate=function(){return new Date(this.valueOf())},p.toJSON=function(){return this.isValid()?this.toISOString():null},p.toISOString=function(){return this.$d.toISOString()},p.toString=function(){return this.$d.toUTCString()},m}(),j=y.prototype;return f.prototype=j,[["$ms",e],["$s",t],["$m",a],["$H",n],["$W","day"],["$M",s],["$y",i],["$D",o]].forEach(function(e){j[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),f.extend=function(e,t){return e.$i||(e(t,y,f),e.$i=!0),f},f.locale=g,f.isDayjs=v,f.unix=function(e){return f(1e3*e)},f.en=x[p],f.Ls=x,f.p={},f},e.exports=t()},99376:function(e,t,a){"use strict";var n=a(35475);a.o(n,"useParams")&&a.d(t,{useParams:function(){return n.useParams}}),a.o(n,"usePathname")&&a.d(t,{usePathname:function(){return n.usePathname}}),a.o(n,"useRouter")&&a.d(t,{useRouter:function(){return n.useRouter}}),a.o(n,"useSearchParams")&&a.d(t,{useSearchParams:function(){return n.useSearchParams}})}},function(e){e.O(0,[2971,2117,1744],function(){return e(e.s=99696)}),_N_E=e.O()}]);